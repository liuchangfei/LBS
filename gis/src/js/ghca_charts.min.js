ghca_charts=(function(c){var e={};function f(i){if(e[i]){return e[i].exports}var g=e[i]={exports:{},id:i,loaded:false};c[i].call(g.exports,g,g.exports,f);g.loaded=true;return g.exports}f.m=c;f.c=e;f.p="";return f(0)})([function(g,c,j){var f={};f.effet={};f.events={};f.layout={};f.layout.css={};f.layout.model={};f.view={};f.view.component={};f.view.component.charts={};f.view.elements={};f.view.elements.plugins={};f.view.elements.plugins.label={};f.view.elements.plugins.links={};f.view.elements.plugins.nodes={};f.view.elements.plugins.tool={};f.view.elements.shape={};f.view.util={};var e=[];function i(m){for(var l in m){e.push(m[l]);i(m[l])}}i(f);f.effet.Effet=j(1);f.effet.eraserEffet=j(3);f.events.BaseEvent=j(4);f.layout.barLayout=j(5);f.layout.horizontalLayout=j(6);f.layout.layout=j(7);f.layout.layoutFeatures=j(8);f.layout.model.sankeyModel=j(9);f.layout.pieLayout=j(10);f.layout.sankeyLayout=j(11);f.layout.scatterLayout=j(12);f.layout.sunburstLayout=j(13);f.layout.topoLayout=j(14);f.layout.treelayout=j(15);f.layout.treemapLayout=j(16);f.layout.verticalLayout=j(17);f.view.component.baseComponent=j(18);f.view.component.chartMap=j(19);f.view.component.charts.area=j(20);f.view.component.charts.axis=j(21);f.view.component.charts.bar=j(22);f.view.component.charts.baseAxis=j(23);f.view.component.charts.baseChart=j(24);f.view.component.charts.chart=j(25);f.view.component.charts.heading=j(26);f.view.component.charts.horAxis=j(27);f.view.component.charts.legend=j(28);f.view.component.charts.legendItem=j(29);f.view.component.charts.line=j(30);f.view.component.charts.pie=j(31);f.view.component.charts.sankey=j(32);f.view.component.charts.scatter=j(33);f.view.component.charts.sunburst=j(34);f.view.component.charts.topology=j(35);f.view.component.charts.tree=j(36);f.view.component.charts.treemap=j(37);f.view.component.charts.verAxis=j(38);f.view.component.eagleEye=j(39);f.view.component.eagleEyeContainer=j(40);f.view.component.svg=j(41);f.view.component.svgCanvas=j(42);f.view.component.tagContainer=j(43);f.view.elements.baseElement=j(44);f.view.elements.circleElement=j(45);f.view.elements.imageElement=j(46);f.view.elements.mulitextElement=j(47);f.view.elements.pathElement=j(48);f.view.elements.plugins.imageTag=j(49);f.view.elements.plugins.label.baseLabel=j(50);f.view.elements.plugins.label.label=j(51);f.view.elements.plugins.label.pieLabel=j(52);f.view.elements.plugins.linkMap=j(53);f.view.elements.plugins.links.baseLink=j(54);f.view.elements.plugins.links.curveLink=j(55);f.view.elements.plugins.links.link=j(56);f.view.elements.plugins.links.parallelLink=j(57);f.view.elements.plugins.links.sankeyLink=j(58);f.view.elements.plugins.nodeMap=j(59);f.view.elements.plugins.nodes.arcClass=j(60);f.view.elements.plugins.nodes.baseNode=j(61);f.view.elements.plugins.nodes.circle=j(62);f.view.elements.plugins.nodes.demoImageNode=j(63);f.view.elements.plugins.nodes.expandTool=j(64);f.view.elements.plugins.nodes.groupNode=j(65);f.view.elements.plugins.nodes.hBarNode=j(66);f.view.elements.plugins.nodes.imageNode=j(67);f.view.elements.plugins.nodes.lineNode=j(68);f.view.elements.plugins.nodes.node=j(69);f.view.elements.plugins.nodes.pathNode=j(70);f.view.elements.plugins.nodes.sankeyNode=j(71);f.view.elements.plugins.nodes.treemapNode=j(72);f.view.elements.plugins.nodes.usePlugin=j(73);f.view.elements.plugins.nodes.vBarNode=j(74);f.view.elements.plugins.nodes.verTool=j(75);f.view.elements.plugins.plugin=j(76);f.view.elements.plugins.pluginMap=j(77);f.view.elements.plugins.tool.percentageInfo=j(78);f.view.elements.plugins.tool.toolTip=j(79);f.view.elements.rectElement=j(80);f.view.elements.shape.baseShape=j(81);f.view.elements.shape.circleShape=j(82);f.view.elements.shape.rectShape=j(83);f.view.graph=j(84);f.view.util.classFactory=j(85);f.view.util.colorUtil=j(86);f.view.util.commonUtil=j(87);f.view.util.constant=j(88);f.view.util.dataParser=j(89);f.view.util.elementUtil=j(90);f.view.util.eventUtil=j(91);f.view.util.math=j(92);f.view.util.mouseUtil=j(93);f.view.util.objectUtil=j(94);f.view.util.regexUtil=j(95);f.view.util.selectUtil=j(96);f.view.util.stringUtil=j(97);f.view.util.svgUtil=j(98);f.view.util.UUIDUtil=j(99);function k(n){for(var l in n){var m=n[l];if(m instanceof Function&&m.hasOwnProperty("struct")){m.struct(f)}else{if(e.indexOf(m)!==-1){k(m)}}}}k(f);g.exports=f},function(e,c,f){(function(i){var g=function(){var j=this;j.dispatch=i.dispatch("play","end","stop");var k={};this.config=function(m){if(!arguments.length){return k}k=m;return this};var l;this.target=function(m){if(!arguments.length){return l}l=m;return this};this.play=function(){};this.stop=function(){};this.end=function(){};this.addEventListener=function(){var m=j.dispatch.on.apply(j.dispatch,arguments);return m===j.dispatch?j:m}};g.struct=function(j){g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(e,c){e.exports=d3},function(e,c){var f=function(){const k=ghca_charts.events.BaseEvent;const l=ghca_charts.view.util.UUIDUtil;const i=ghca_charts.view.util.regexUtil;const m=ghca_charts.view.util.eventUtil;var j=this;j.config({dasharray:"5,5",borderWidth:2,borderColor:"{color}",borderOpacity:0.6,});var g="<clipPath class='eraserEffet'><path ></path></clipPath>";this.play=function(){};this.stop=function(){};this.end=function(){}};f.struct=function(g){var i=g.view.elements.plugins.plugin;i.struct(g);f.prototype=Object.create(i.prototype);f.prototype.constructor=f};e.exports=f},function(f,c){var e=function(g,j){var i=this;i.data=j;i.target=g};e.struct=function(g){e.prototype.constructor=e};e.LEGEND_ITEM_CLICK="legendItemClick";e.NODE_MOUSE_OVER="nodeMouseOver";e.NODE_MOUSE_OUT="nodeMouseOut";e.SHOW_TOOL_TIP="showToolTip";e.HIDE_TOOL_TIP="hideToolTip";e.UPDATE_TOOL_TIP="updateToolTip";e.MODE_CHANGE="modeChange";e.ADD_ITEMS="addItems";e.REMOVE_ITEMS="removeItems";e.REOMVE_ALL_SELECTED_ITEMS="removeAllSelectedItems";e.SEARCH_TEXT="searchText";e.UPDATE_PROPERTIES="updateProperties";e.HIDDEN_PROPERTIES="hiddeProperties";e.TOPO_NODE_FOCUS_IN="topoNodeFocusIn";e.POSITION_CHANGE="positionChange";e.SIZE_CHANGE="sizeChange";e.CONTENT_CHANGE="contentChange";e.EAGLE_EYE_DRAG="eagleEyeDrag";e.EAGLE_EYE_DRAG_CHANGE="eagleEyeDragChange";f.exports=e},function(e,c,f){(function(i){var g=function(k,l){const q=ghca_charts.layout.layout;q.apply(this,arguments);var u=this;var o=[];this.items=function(v){if(!arguments.length){return o}o=v;return this};var s="normal";this.barType=function(v){if(!arguments.length){return s}s=v;return this};var j=false;this.isReverse=function(v){if(!arguments.length){return j}j=v;return this};var t=null;this.stackName=function(v){if(!arguments.length){return t}t=v;return this};var p=0.1;this.padding=function(v){if(!arguments.length){return p}p=v;return this};var m=NaN;this.maxBarSize=function(v){if(!arguments.length){return m}m=v;return this};this.measure=function(K){var I,an,L,ak,z,aj,ag,aa,J,W=0,v=u.target(),ab=v.seriesData();if(v.horAxis()){ag=v.horAxis();I=ag.scaleIns();I=I.rangeRound(I.range());L=ag.key();z=ag.type()}if(v.verAxis()){aa=v.verAxis();an=aa.scaleIns();an=an.rangeRound(an.range());ak=aa.key();aj=aa.type()}var ae=ag.interval(),af=aa.interval(),aw=v.visibleItems(),Z=z==="enum"&&aj!=="enum",ai=Z?ak:L;if(ab&&ab.length>0){var ay=v.seriesIndex();var ar=ab[ay];var ah,al,au,B=NaN,am={},Y=[];for(var at=0,G=ab.length;at<G;at++){var V=ab[at];var Q=V.data;var H=Q.filter(function(az){return !az.hasOwnProperty("visible")||az.visible});if(H.length===0){continue}var ad=V.layout;al=0;if(ad.type.toLowerCase()==="barlayout"){var ax=ad.barType;au=n(ad,at);if(Y.indexOf(au)===-1){Y.push(au)}if(!ad.hasOwnProperty("barType")||ax==="normal"){W++}else{if(ax==="stack"||ax==="percentStack"){if(!am.hasOwnProperty(au)){am[au]=[];W++}am[au].push(Q);al=am[au].length}else{if(ax==="overlap"){W=1}}}if(ay===at){B=Y.indexOf(au);ah=al-1;var X=am[au];for(var aq=0,E=Q.length;aq<E;aq++){var ac=Q[aq];var ap=0;for(var ao=0;ao<ah;ao++){ap+=X[ao][aq][ai]}ac.stackValue=ap}}}}if(W===0){return}var X,Q,ac,R=[];for(var N in am){R.length=0;X=am[N];for(var at=0,G=X.length;at<G;at++){Q=X[at];for(var aq=0,E=Q.length;aq<E;aq++){ac=Q[aq];if(at===0){R.push(ac[ai])}else{R[aq]+=ac[ai]}}}for(var at=0,G=X.length;at<G;at++){Q=X[at];for(var aq=0,E=Q.length;aq<E;aq++){ac=Q[aq];ac.total=R[aq]}}}if(W>0){if(Z&&I){I.padding(u.padding());ag.axisContainer.call(ag.axisIns())}else{if(!Z&&an){an.padding(u.padding());aa.axisContainer.call(aa.axisIns())}}}if(W>1){var A=[];for(var at=0;at<W;at++){A.push(at)}J=i.scaleBand().domain(A).padding(u.padding());if(Z){J=J.rangeRound([0,I.bandwidth()])}else{J=J.rangeRound([0,an.bandwidth()])}}}var U=Z?aa:ag;if(U){var P=U.data();if(!P.tick){P.tick={}}var ax=u.barType();if(ax==="percentStack"){P.useDomain=true;P.domain=[0,1];P.tick.tickArguments=[10,"%"]}else{P.useDomain=false;var O=P.tick.tickArguments;if(O&&O.toString()===[10,"%"].toString()){P.tick.tickArguments=[5]}}U.update()}var D,T,S,F,C;for(var av,at=0,M=aw.length;at<M;at++){av=aw[at];F=av[L];C=av[ak];if(I&&L&&z==="enum"){av.x=(Z&&J)?I(F)+J(B):I(F);av.dx=J?J.bandwidth():I.bandwidth();if(an&&ak){if(ax==="normal"||ax==="stack"||ax==="overlap"){if(j){av.y=an(av.total)}else{av.y=an(C)-(aa.height()-an(av.stackValue))}av.dy=aa.height()-an(C)}else{if(ax==="percentStack"){av.y=av.stackValue/av.total*aa.height();av.dy=C/av.total*aa.height()}}}}else{if(an&&ak&&aj==="enum"){av.y=(!Z&&J)?an(C)+J(B):an(C);av.dy=J?J.bandwidth():an.bandwidth();if(I&&L){if(ax==="normal"||ax==="stack"||ax==="overlap"){if(j){av.x=I(av.total)-I(F)}else{av.x=1+I(av.stackValue)}av.dx=I(F)}else{if(ax==="percentStack"){av.x=1+av.stackValue/av.total*ag.width();av.dx=F/av.total*ag.width()}}}}}if(Z&&!isNaN(m)&&av.dx>m&&I&&L){if(J){D=J.step()*J.padding();T=(I.bandwidth()-m*W-D*(W-1))/2;av.x=I(F)+T+(m+D)*B}else{av.x+=(av.dx-m)/2}av.dx=m}else{if(!Z&&!isNaN(m)&&av.dy>m&&an&&ak){if(J){D=J.step()*J.padding();S=(an.bandwidth()-m*W-D*(W-1))/2;av.y=an(C)+S+(m+D)*B}else{av.y+=(av.dy-m)/2}av.dy=m}}}if((ax==="stack"||ax==="percentStack"||ax==="overlap")&&K!==true&&v.parent()&&v.parent().axis()){v.parent().axis().update();if(W>0){if(v.horAxis()){ag=v.horAxis();I=ag.scaleIns()}if(v.verAxis()){aa=v.verAxis();an=aa.scaleIns()}if(Z&&I){I.padding(u.padding());ag.axisContainer.call(ag.axisIns())}else{if(!Z&&an){an.padding(u.padding());aa.axisContainer.call(aa.axisIns())}}}}console.log("BarLayout::measure()")};this.toString=function(){return("BarLayout info: \n   size:"+this.target().width()+","+this.target().height())};var r=function(){u.refreshData(l)};var n=function(A,z){if(A.barType!=="stack"&&A.barType!=="percentStack"){return"bar"+z}var v=A.stackName;if(v===null||v===undefined||v===""){return"bar"+z}return v};r()};g.struct=function(j){var k=j.layout.layout;k.struct(j);g.prototype=Object.create(k.prototype);g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(f,c){var e=function(g,j){const r=ghca_charts.layout.layout;r.apply(this,arguments);var u=this;u.isChartLayout(false);var o=null;this.model=function(){return o};var k="left";this.horizontalAlign=function(v){if(!arguments.length){return k}k=v;return this};var n="top";this.verticalAlign=function(v){if(!arguments.length){return n}n=v;return this};var q=6;this.gap=function(v){if(!arguments.length){return q}q=v;return this};var p=false;this.fit=function(v){if(!arguments.length){return p}p=v;return this};var i=0;this.paddingBottom=function(v){if(!arguments.length){return i}i=v;return this};var m=0;this.paddingLeft=function(v){if(!arguments.length){return m}m=v;return this};var l=0;this.paddingRight=function(v){if(!arguments.length){return l}l=v;return this};var t=0;this.paddingTop=function(v){if(!arguments.length){return t}t=v;return this};var s=function(){u.refreshData(j)};this.measure=function(){var G=this,P=G.target(),z=P.children();if(!P||!z||z.length===0){return}var N=G.paddingTop(),O=G.paddingLeft(),v=G.paddingRight(),B=G.paddingBottom(),K=G.horizontalAlign(),C=G.verticalAlign(),I=G.gap(),F=P.width()-O-v,M=P.height()-N-B;var E,D,A,L=z.length,H=0,J=0;if(p||K==="center"){for(J=0;J<L;J++){A=z[J];H+=A.width()}if(p){I=L>1?(F-H)/(L-1):0}H+=I*(L-1)}for(J=0;J<L;J++){A=z[J];if(p||K==="center"){E=O+(F-H)/2+(A.width()+I)*J}else{if(K==="left"){E=O+(A.width()+I)*J}else{if(K==="right"){E=O+F-A.width()*(J+1)-I*J}}}if(C==="top"){D=N}else{if(C==="middle"){D=N+(M-A.height())/2}else{if(C==="bottom"){D=N+M-A.height()}}}A.x(E);A.y(D);A.renderTransform()}console.log("HorizontalLayout::measure()")};this.toString=function(){return("HorizontalLayout info: ")};s()};e.struct=function(g){var i=g.layout.layout;i.struct(g);e.prototype=Object.create(i.prototype);e.prototype.constructor=e};f.exports=e},function(e,c){var f=function(j,k){const i=ghca_charts.view.util.constant;if(arguments.length<1){throw new Error("传入参数个数错误,当前个数"+arguments.length+",应至少传入1个参数")}var t=this;var r=j;this.target=function(u){if(!arguments.length){return r}r=u;return this};var o=k;this.data=function(u){if(!arguments.length){return o}o=u;t.refreshData(o);return this};var q=null;this.model=function(u){if(!arguments.length){return q}q=u;return this};var m=1;this.scale=function(u){if(!arguments.length){return m}m=u;return this};var g=3;this.maxScale=function(u){if(!arguments.length){return g}g=u;return this};var l=0.3;this.minScale=function(u){if(!arguments.length){return l}l=u;return this};var s=0.05;this.scaleDelta=function(u){if(!arguments.length){return s}s=u;return this};var p=true;this.isChartLayout=function(u){if(!arguments.length){return p}p=u;return this};var n=false;this.useSeriesConfig=function(u){if(!arguments.length){return n}n=u;return this};this.update=function(u){if(t.isChartLayout()&&r&&r.data()&&r.data().useSeriesConfig!==false&&r.parent()&&r.parent().data().seriesConfig&&r.parent().data().seriesConfig.layout){k=r.parent().data().seriesConfig.layout;t.data(k);t.useSeriesConfig(true)}else{t.useSeriesConfig(false);t.refreshData(k)}t.measure(u)};this.measure=function(){};this.zoom=function(u){};this.refreshData=function(v){if(v){for(var u in v){if(t.hasOwnProperty(u)){t[u](v[u])}}}};this.toString=function(){return("Layout info: \n   target:"+this.target()+"\n   data:"+this.data()+"\n   tx:"+this.tx()+"\n   ty:"+this.ty()+"\n   scale:"+this.scale()+"\n   minScale:"+this.minScale()+"\n   maxScale:"+this.maxScale()+"\n   scaleDelta:"+this.scaleDelta())}};f.struct=function(g){f.prototype.constructor=f};e.exports=f},function(f,e){var c=function(){var p=this;var l=0;this.x=function(q){if(!arguments.length){return l}l=q;return this};var k=0;this.y=function(q){if(!arguments.length){return k}k=q;return this};var j=0;this.z=function(q){if(!arguments.length){return j}j=q;return this};var g=0;this.width=function(q){if(!arguments.length){return g}g=q;return this};var o=0;this.height=function(q){if(!arguments.length){return o}o=q;return this};var n=1;this.scaleX=function(q){if(!arguments.length){return n}n=q;return this};var m=1;this.scaleY=function(q){if(!arguments.length){return m}m=q;return this};var i=0;this.rotate=function(q){if(!arguments.length){return i}i=q;return this};this.toString=function(){return("LayoutFeatures info: \n   x:"+this.x()+"\n   y:"+this.y()+"\n   z:"+this.z()+"\n   width:"+this.width()+"\n   height:"+this.height()+"\n   scaleX:"+this.scaleX()+"\n   scaleY:"+this.scaleY()+"\n   rotate:"+this.rotate())}};c.struct=function(g){c.prototype.constructor=c};f.exports=c},function(e,c,f){(function(g){var i=function(){const s=ghca_charts.view.util.constant;var v=this,o=24,q=8,u=[1,1],B=[],n=[];this.nodeWidth=function(H){if(!arguments.length){return o}o=+H;return this};this.nodePadding=function(H){if(!arguments.length){return q}q=+H;return this};this.nodes=function(H){if(!arguments.length){return B}B=H;return this};this.links=function(H){if(!arguments.length){return n}n=H;return this};var G=1;this.scale=function(H){if(!arguments.length){return G}G=H;return this};var t=s.LAYOUT_SCALE_TYPE;this.scaleType=function(H){if(!arguments.length){return t}t=H;return this};this.size=function(H){if(!arguments.length){return u}u=H;return this};var z=false;this.isLikeTree=function(H){if(!arguments.length){return z}z=H;return this};var F=1000;this.maxNodeSize=function(H){if(!arguments.length){return F}F=+H;return this};this.layout=function(H){m();r();k();p(H);l();return this};this.relayoutLinkDepths=function(){l();return this};this.relayout=function(){m();r();k();return this};this.linkPath=function(){var I=0.5;function H(Q){var N=Q.source.x+Q.source.dx,M=Q.target.x,L=g.interpolateNumber(N,M),K=L(I),J=L(1-I),P=Q.source.y+Q.sy+Q.dy/2,O=Q.target.y+Q.ty+Q.dy/2;return"M"+N+","+P+"C"+K+","+P+" "+J+","+O+" "+M+","+O}H.curvature=function(J){if(!arguments.length){return I}I=+J;return H};return H};function m(){}function r(){B.forEach(function(H){H.value=Math.max(g.sum(H.sourceLinks,C),g.sum(H.targetLinks,C))})}function k(){var I=B,K,H=0;while(I.length){K=[];I.forEach(function(L){L.x=H;L.dx=o;L.sourceLinks.forEach(function(M){K.push(M.target)})});I=K;++H}if(v.isLikeTree()===false){D(H)}var J=(u[0]-o)/(H-1);A(J)}function j(){B.forEach(function(H){if(!H.targetLinks.length){H.x=g.min(H.sourceLinks,function(I){return I.target.x})-1}})}function D(H){B.forEach(function(I){if(!I.sourceLinks.length){I.x=H-1}})}function A(H){B.forEach(function(I){I.x*=H})}function p(N){var M=g.nest().key(function(R){return R.x}).sortKeys(g.ascending).entries(B).map(function(R){return R.values});K();I();J();for(var O=1;N>0;--N){Q(O*=0.99);I();L(O);I()}P();function K(){var R=g.min(M,function(S){return(u[1]-(S.length-1)*q)/g.sum(S,C)});if(R<=0){R=1}M.forEach(function(S){S.forEach(function(U,T){U.y=T;U.dy=U.value*R})});n.forEach(function(S){S.dy=S.value*R})}function L(S){M.forEach(function(T,U){T.forEach(function(V){if(V.targetLinks.length){var W=g.sum(V.targetLinks,R)/g.sum(V.targetLinks,C);V.y+=(W-E(V))*S}})});function R(T){return E(T.source)*T.value}}function Q(S){M.slice().reverse().forEach(function(T){T.forEach(function(U){if(U.sourceLinks.length){var V=g.sum(U.sourceLinks,R)/g.sum(U.sourceLinks,C);U.y+=(V-E(U))*S}})});function R(T){return E(T.target)*T.value}}function J(){var T=v.maxNodeSize(),S=0;v.nodes().forEach(function(U){S=U.dy>S?U.dy:S});if(S>T){var R=T/S;v.nodes().forEach(function(U){U.dy*=R});v.links().forEach(function(U){U.dy*=R;U.sy*=R})}}function P(){var S=Infinity;v.nodes().forEach(function(T){S=S>T.y?T.y:S});var R=-S/2;v.nodes().forEach(function(T){T.y+=R})}function I(){M.forEach(function(S){var V,R,U=0,W=S.length,T;S.sort(H);for(T=0;T<W;++T){V=S[T];R=U-V.y;if(R>0){V.y+=R}U=V.y+V.dy+q}R=U-q-u[1];if(R>0){U=V.y-=R;for(T=W-2;T>=0;--T){V=S[T];R=V.y+V.dy+q-U;if(R>0){V.y-=R}U=V.y}}})}function H(S,R){return S.y-R.y}}function l(){B.forEach(function(J){J.sourceLinks.sort(H);J.targetLinks.sort(I)});B.forEach(function(K){var L=0,J=0;K.sourceLinks.forEach(function(M){M.sy=L;L+=M.dy});K.targetLinks.forEach(function(M){M.ty=J;J+=M.dy})});function I(K,J){return K.source.y-J.source.y}function H(K,J){return K.target.y-J.target.y}}function E(H){return H.y+H.dy/2}function C(H){return H.value}};i.struct=function(j){i.prototype.constructor=i};e.exports=i}.call(c,f(2)))},function(e,c,f){(function(g){var i=function(j,l){const u=ghca_charts.layout.layout;u.apply(this,arguments);var z=this;var q=g.pie();this.model=function(){return q};var t=[];this.items=function(A){if(!arguments.length){return t}t=A;return this};var p="value";this.dataKey=function(A){if(!arguments.length){return p}p=A;return this};var k=null;this.roseType=function(A){if(!arguments.length){return k}k=A;return this};var o=p;this.roseKey=function(A){if(!arguments.length){return o}o=A;return this};var s=0;this.startAngle=function(A){if(!arguments.length){return s}s=A;return this};var m=Math.PI*2;this.endAngle=function(A){if(!arguments.length){return m}m=A;return this};var n=function(B,A){return A-B};this.sort=function(A){if(!arguments.length){return n}n=A;return this};var v=function(){z.refreshData(l)};var r=function(B,A){var C=z.sort();if(!C){return null}var D=z.dataKey();return function(F,E){return C.call(z,F[D],E[D])}};this.measure=function(){var D=z.model().startAngle(z.startAngle()).endAngle(z.endAngle()).sort(r()).value(function(J){return J[z.dataKey()]});var F=z.target();var A=F.visibleItems();var H=D(A);var B,C,I=NaN;if(z.roseType()==="radius"){B=z.roseKey()}var E=B!==undefined;var G=0;H.forEach(function(J){var K=J.data[z.dataKey()];G+=K;if(E){J.radiusPercent=J.data[B]/K}var L=J.hasOwnProperty("data")?J.data.id:null;A.forEach(function(N){if(N.id===L){for(var M in J){if(M!=="data"){N[M]=J[M]}}}})});H.forEach(function(J){if(J.data){var K=J.data[z.dataKey()];J.data.percent=K/G}});F.renderPosition();console.log("PieLayout::measure()")};this.toString=function(){return("PieLayout info: \n   size:"+this.target().width()+","+this.target().height())};v()};i.struct=function(j){var k=j.layout.layout;k.struct(j);i.prototype=Object.create(k.prototype);i.prototype.constructor=i};e.exports=i}.call(c,f(2)))},function(e,c,f){(function(g){var i=function(l,m){const t=ghca_charts.layout.layout;const k=ghca_charts.view.util.constant;const o=ghca_charts.view.util.mouseUtil;const s=ghca_charts.layout.model.sankeyModel;t.apply(this,arguments);var A=this;var p=new s();this.model=function(){return p};var j=[];this.nodes=function(){return j};var v=[];this.links=function(){return v};var u=24;this.nodeWidth=function(B){if(!arguments.length){return u}u=+B;return this};var r=1000;this.maxNodeSize=function(B){if(!arguments.length){return r}r=+B;return this};var n=12;this.nodePadding=function(B){if(!arguments.length){return n}n=+B;return this};var q=false;this.isLikeTree=function(B){if(!arguments.length){return q}q=B;return this};var z=function(){A.refreshData(m)};this.scaleLayout=function(H,B){var C,D=A.scale(),J=A.scaleDelta();if(H){C=J;if(D+C>A.maxScale()){return}}else{C=-J;if(D+C<A.minScale()){return}}var G=(C+D)/D;if(B===k.LAYOUT_SCALE_TYPE){this.target().nodes.forEach(function(L){L.x=L.x*G;L.y=L.y*G})}else{if(B===k.LAYOUT_HOR_SCALE_TYPE){this.target().nodes.forEach(function(L){L.x=L.x*G})}else{if(B===k.LAYOUT_VER_SCALE_TYPE){this.target().nodes.forEach(function(L){L.y=L.y*G})}}}G=C/D;var F=A.target(),K=F.x(),I=F.y(),E=F.parent().bgNode();if(B===k.LAYOUT_SCALE_TYPE){K-=(o.relativeX(g.event,E)-K)*G;I-=(o.relativeY(g.event,E)-I)*G}else{if(B===k.LAYOUT_HOR_SCALE_TYPE){K-=(o.relativeX(g.event,E)-K)*G}else{if(B===k.LAYOUT_VER_SCALE_TYPE){I-=(o.relativeY(g.event,E)-I)*G}}}F.x(K);F.y(I);A.scale(D+C)};this.measure=function(){var C=this.model();var B=this,D=B.target();if(arguments.length!==1||arguments[0]!==false){C.nodeWidth(this.nodeWidth()).nodePadding(this.nodePadding()).size([D.width(),D.height()]).nodes(this.nodes()).links(this.links()).scaleType(D.scaleType()).scale(this.scale()).maxNodeSize(this.maxNodeSize()).isLikeTree(this.isLikeTree()).layout(32)}B.target().renderPosition();console.log("SankeyLayout::measure()")};this.zoom=function(D){var C=this;var B=C.target().scaleType();C.scaleLayout(D,B);this.measure(false)};this.toString=function(){return("SankeyLayout info: \n   nodeWidth:"+this.nodeWidth()+"\n   nodePadding:"+this.nodePadding()+"\n   maxNodeSize:"+this.maxNodeSize()+"\n   scaleType:"+this.scaleType()+"\n   isLikeTree:"+this.isLikeTree()+"\n   size:"+this.target().width()+","+this.target().height())};z()};i.struct=function(j){var k=j.layout.layout;k.struct(j);i.prototype=Object.create(k.prototype);i.prototype.constructor=i};e.exports=i}.call(c,f(2)))},function(e,c){var f=function(g,l){const k=ghca_charts.layout.layout;k.apply(this,arguments);var j=this;var n=false;this.isTimeLine=function(o){if(!arguments.length){return n}n=o;return this};var i=[];this.items=function(o){if(!arguments.length){return i}i=o;return this};var m=function(){j.refreshData(l)};this.measure=function(){var H,o,A,q,z,t,p,F,v=j.target();if(v.horAxis()){p=v.horAxis();H=p.scaleIns();A=p.key();z=p.type()}if(v.verAxis()){F=v.verAxis();o=F.scaleIns();q=F.key();t=F.type()}var C=p.interval(),G=F.interval(),s=v.visibleItems();for(var B,E,D,r=0,u=s.length;r<u;r++){B=s[r];if(H&&A){E=B[A];B.x=H(E);if(z==="enum"){if(!j.isTimeLine()){B.x+=H.bandwidth()/2}B.dx=H.bandwidth()}else{if(z==="value"&&C>0){B.dx=H(E+C)-B.x}else{if(z==="time"&&C>0){B.dx=H(new Date(E.getTime()+C*1000))-B.x}}}}if(o&&q){D=B[q];B.y=o(D);if(t==="enum"){if(!j.isTimeLine()){B.y+=o.bandwidth()/2}B.dy=o.bandwidth()}else{if(t==="value"&&C>0){B.dy=B.y-o(D+G)}else{if(t==="time"&&C>0){B.dy=B.y-o(new Date(D.getTime()+G*1000))}}}}}console.log("ScatterLayout::measure()")};this.toString=function(){return("ScatterLayout info: \n   size:"+this.target().width()+","+this.target().height())};m()};f.struct=function(g){var i=g.layout.layout;i.struct(g);f.prototype=Object.create(i.prototype);f.prototype.constructor=f};e.exports=f},function(e,c,f){(function(g){var i=function(k,n){const m=ghca_charts.layout.layout;m.apply(this,arguments);var o=[];this.visibleData=function(){if(!arguments.length){return o}o=arguments[0];return this};var j=0;this.radius=function(){if(!arguments.length){return j}j=arguments[0];return this};var l=[];this.nodes=function(){if(!arguments.length){return l}l=arguments[0];return this};this.model(g.partition());this.measure=function(){var p=this.radius()*this.scale();this.nodes(this.model().size([2*Math.PI,p*p])(g.hierarchy(g.stratify()(this.visibleData())).sum(function(q){return q.children?0:q.data.value}).sort(function(r,q){return q.data.value-r.data.value})).descendants().filter(function(q){return(q.x1-q.x0>0.005)}))};this.zoom=function(t){var r=this.scaleDelta();var p=this.scale();var q=this.maxScale();var s=this.minScale();if(t){p+=r;if(p>q){p=q}}else{p-=r;if(p<s){p=s}}this.scale(p);this.target().update()}};i.struct=function(j){var k=j.layout.layout;k.struct(j);i.prototype=Object.create(k.prototype);i.prototype.constructor=i};e.exports=i}.call(c,f(2)))},function(e,c,f){(function(i){var g=function(t,B){const F=ghca_charts.layout.layout;const u=ghca_charts.view.util.constant;const C=ghca_charts.view.util.mouseUtil;F.apply(this,arguments);var A=this;var l=i.forceSimulation();this.model=function(){return l};var n=false;this.fixed=function(H){if(!arguments.length){return n}n=H;return this};var z=true;this.isAutoLayout=function(H){if(!arguments.length){return z}z=H;return this};var D=[];this.nodes=function(){return D};var k=[];this.links=function(){return k};var o=1;this.alpha=function(H){if(!arguments.length){return o}o=H;return this};var m=30;this.distance=function(H){if(!arguments.length){return m}m=H;return this};var r=20;this.distanceMin=function(H){if(!arguments.length){return r}r=H;return this};var v=200;this.distanceMax=function(H){if(!arguments.length){return v}v=H;return this};var G=-30;this.chargeStrength=function(H){if(!arguments.length){return G}G=H;return this};var s=0.9;this.theta=function(H){if(!arguments.length){return s}s=H;return this};var j=20;this.collideRadius=function(H){if(!arguments.length){return j}j=H;return this};var q=0.7;this.collideStrength=function(H){if(!arguments.length){return q}q=H;return this};var E=function(){A.isFirstMeasure=true;A.refreshData(B)};var p=function(){A.model().nodes(A.target().visibleItems()).alpha(A.alpha()).force("link",i.forceLink(A.links()).distance(A.distance())).force("charge",i.forceManyBody().strength(A.chargeStrength()).theta(A.theta())).force("collide",i.forceCollide().radius(A.collideRadius()).strength(A.collideStrength())).force("center",i.forceCenter(A.target().width()/2,A.target().height()/2))};this.measure=function(){var I=A.target().visibleItems();if(I.length===0){return}var J=A.model();if(A.fixed()){if(A.isAutoLayout()){p();J.stop();for(var K=0,M=Math.ceil(Math.log(J.alphaMin())/Math.log(1-J.alphaDecay()));K<M;++K){J.tick()}}else{for(var L,K=0,H=I.length;K<H;K++){L=I[K];if(!L.hasOwnProperty("x")){L.x=0}if(!L.hasOwnProperty("y")){L.y=0}if(!L.hasOwnProperty("vx")){L.vx=0}if(!L.hasOwnProperty("vy")){L.vy=0}L.index=K}}A.target().renderPosition()}else{p();J.restart()}console.log("TopoLayout::measure()")};this.zoom=function(H){if(A.target().scaleType()===u.LAYOUT_SCALE_TYPE){if(A.fixed()){A.scaleLinkWithNodeFixed(H)}else{A.scaleLinkWithNodeFree(H)}}if(A.fixed()){A.target().renderPosition()}else{p()}};this.scaleLinkWithNodeFixed=function(P){var I,K=A.scale(),S=A.scaleDelta();if(P){I=S;if(K+I>A.maxScale()){return}}else{I=-S;if(K+I<A.minScale()){return}}var O=(I+K)/K;var H=A.target().nodes;for(var J,M=0;M<H.length;M++){J=H[M];J.x=J.x*O;J.y=J.y*O;J.fx=J.x;J.fy=J.y}O=I/K;var N=A.target(),R=N.x(),Q=N.y(),L=N.parent().bgNode();R-=(C.relativeX(i.event,L)-R)*O;Q-=(C.relativeY(i.event,L)-Q)*O;N.x(R);N.y(Q);A.scale(K+I)};this.scaleLinkWithNodeFree=function(I){var K=25,J=A.distance(),H=A.chargeStrength();if(I){J+=K;if(J>A.distanceMax()){return}H-=K}else{J-=K;if(J<A.distanceMin()){return}H+=K}A.distance(J);A.chargeStrength(H)};this.toString=function(){return("TopoLayout info: \n   fixed:"+this.fixed()+"\n   distance:"+this.distance()+"\n   distanceMin:"+this.distanceMin()+"\n   distanceMax:"+this.distanceMax()+"\n   chargeStrength:"+this.chargeStrength()+"\n   theta:"+this.theta()+"\n   collideRadius:"+this.collideRadius()+"\n   collideStrength:"+this.collideStrength()+"\n   alpha:"+this.alpha()+"\n   size:"+this.target().width()+","+this.target().height())};E()};g.struct=function(j){var k=j.layout.layout;k.struct(j);g.prototype=Object.create(k.prototype);g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(e,c,f){(function(i){var g=function(j,l){const v=ghca_charts.layout.layout;const n=ghca_charts.view.util.constant;const u=ghca_charts.view.util.math;v.apply(this,arguments);var A=this;var p=true;this.autoLayout=function(C){if(!arguments.length){return p}p=C;return this};var r=undefined;this.nodeSize=function(C){if(!arguments.length){return r}r=C;return this};var B=undefined;this.size=function(C){if(!arguments.length){return B}B=C;return this};var k=null;this.treeRootNode=function(C){if(!arguments.length){return k}k=C;return this};var t=n.TREE_VER_TYPE;this.direction=function(C){if(!arguments.length){return t}t=C;return this};var s=NaN;this.nodeDistance=function(C){if(!arguments.length){return s}s=C;return this};var q=false;this.hasPathNode=function(C){if(!arguments.length){return q}q=C;return this};var o=i.tree();this.model=function(){return o};var m=0;this.scaleDiff=function(C){if(!arguments.length){return m}m=C;return this};var z=function(){A.refreshData(l);A.model().separation(function(D,C){return(D.parent==C.parent?1:2)/D.depth})};this.radialTreeMeasure=function(E){A.model()(A.treeRootNode());var D=A.treeRootNode();var C=A.target().width()/2,F=A.target().height()/2;A.treeRootNode().descendants().forEach(function(J,I){var G=J.x,L=J.y;L+=L*E;var H=J.children?G-90:G+90;J.labelPosition="start";if(G<180===!J.children){H-=180;J.labelPosition="end"}J.angle=(G-90)/180*Math.PI;J.labelRotateAngle=H;var K=u.circumferencePoint(L,J.angle);J.x=K[0]+C,J.y=K[1]+F;J.cx=C,J.cy=F;J.r=Math.abs(Math.sqrt(Math.pow(D.x-J.x,2)+Math.pow(D.y-J.y,2)));J.data.x=J.x;J.data.y=J.y})};this.verTreeMeasure=function(E){var D=A.treeRootNode();A.model()(D);var C=A.target().width()/2,F=C-D.x;A.treeRootNode().descendants().forEach(function(I,H){var G=I.x,J=I.y;J+=J*E;I.x=G+F,I.y=J+50;I.children?I.labelPosition="start":I.labelPosition="end";I.labelRotateAngle=90;I.data.x=I.x;I.data.y=I.y})};this.horTreeMeasure=function(D){var C=A.treeRootNode();A.model()(C);var F=A.target().height()/2,E=F-C.x;A.treeRootNode().descendants().forEach(function(I,H){var G=I.x,J=I.y;J+=J*D;I.x=J+50,I.y=G+E;I.labelRotateAngle=0;I.children?I.labelPosition="start":I.labelPosition="end";I.data.x=I.x;I.data.y=I.y})};this.measure=function(){var C=A.treeRootNode();if(this.autoLayout()==false&&C.data.x!=undefined){var D=C.descendants();D.forEach(function(H){H.x=H.data.x;H.y=H.data.y});return}var G=this.direction().toLowerCase();var F=ghca_charts.view.util.constant;var E=this.scaleDiff();this.model().size(this.size());if(this.nodeSize()){this.model().nodeSize(this.nodeSize())}switch(G){case F.TREE_RADIAL_TYPE:this.model().size([360,this.size()[1]]);A.radialTreeMeasure(E);break;case F.TREE_HOR_TYPE:A.horTreeMeasure(E);break;case F.TREE_VER_TYPE:A.verTreeMeasure(E);break}};this.zoom=function(G){var E=this.scaleDelta();var C=this.scale()+E;var D=this.maxScale();var F=this.minScale();if(C>D||C<F){return}if(G){this.scaleDiff(E+this.scaleDiff())}else{this.scaleDiff(-E+this.scaleDiff())}var H=function(){var I=arguments[0];I.measure();I.target().updatePosition()};if(Window.Concurrent){Concurrent.Thread.create(H,this)}else{H(this)}};z()};g.struct=function(j){var k=j.layout.layout;k.struct(j);g.prototype=Object.create(k.prototype);g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(module,exports,__webpack_require__){(function(d3){var TreemapLayout=function(_target,_data){const Layout=ghca_charts.layout.layout;const ObjectUtil=ghca_charts.view.util.objectUtil;const StringUtil=ghca_charts.view.util.stringUtil;const RegexUtil=ghca_charts.view.util.regexUtil;Layout.apply(this,arguments);var self=this;var model=d3.treemap();this.model=function(){return model};var items=[];this.items=function(value){if(!arguments.length){return items}items=value;return this};var dataKey="value";this.dataKey=function(value){if(!arguments.length){return dataKey}dataKey=value;return this};var tile="treemapSquarify";this.tile=function(value){if(!arguments.length){return tile}tile=value;return this};var size=["80%","80%"];this.size=function(value){if(!arguments.length){var w=size[0],h=size[1],parent=self.target().parent();w=parent&&RegexUtil.percentRegex.test(w)?parseInt(StringUtil.parsePercent(w)*parent.width()/100):w;h=parent&&RegexUtil.percentRegex.test(h)?parseInt(StringUtil.parsePercent(h)*parent.height()/100):h;return[w,h]}size=ObjectUtil.isArray(value)?value:ObjectUtil.isString(value)?eval(value):size;return this};var round=false;this.round=function(value){if(!arguments.length){return round}round=value;return this};var padding=NaN;this.padding=function(value){if(!arguments.length){return padding}padding=value;return this};var paddingInner=NaN;this.paddingInner=function(value){if(!arguments.length){return paddingInner}paddingInner=value;return this};var paddingOuter=NaN;this.paddingOuter=function(value){if(!arguments.length){return paddingOuter}paddingOuter=value;return this};var paddingTop=NaN;this.paddingTop=function(value){if(!arguments.length){return paddingTop}paddingTop=value;return this};var paddingBottom=NaN;this.paddingBottom=function(value){if(!arguments.length){return paddingBottom}paddingBottom=value;return this};var paddingLeft=NaN;this.paddingLeft=function(value){if(!arguments.length){return paddingLeft}paddingLeft=value;return this};var paddingRight=NaN;this.paddingRight=function(value){if(!arguments.length){return paddingRight}paddingRight=value;return this};var sumType="size";this.sumType=function(value){if(!arguments.length){return sumType}sumType=value;return this};var sizeKey="size";this.sizeKey=function(value){if(!arguments.length){return sizeKey}sizeKey=value;return this};var root=null;this.root=function(value){if(!arguments.length){return root}root=value;return this};var leaves=[];this.leaves=function(value){if(!arguments.length){return leaves}leaves=value;return this};var stratifyId="id";this.stratifyId=function(value){if(!arguments.length){return stratifyId}stratifyId=value;return this};var stratifyParentId="parentId";this.stratifyParentId=function(value){if(!arguments.length){return stratifyParentId}stratifyParentId=value;return this};var init=function(){self.refreshData(_data)};var sumByCount=function(d){return d.children?0:1};var sumBySize=function(d){return d[self.sizeKey()]};var getTileFn=function(titeName){switch(titeName){case"treemapBinary":return d3.treemapBinary;case"treemapDice":return d3.treemapDice;case"treemapSlice":return d3.treemapSlice;case"treemapSliceDice":return d3.treemapSliceDice;case"treemapResquarify":return d3.treemapResquarify;case"treemapSquarify":default:return d3.treemapSquarify}};this.measure=function(){var model=self.model().tile(getTileFn(self.tile())).size(self.size()).round(self.round());if(!isNaN(self.padding())){model.padding(self.padding())}if(!isNaN(self.paddingInner())){model.paddingInner(self.paddingInner())}if(!isNaN(self.paddingOuter())){model.paddingOuter(self.paddingOuter())}if(!isNaN(self.paddingTop())){model.paddingTop(self.paddingTop())}if(!isNaN(self.paddingBottom())){model.paddingBottom(self.paddingBottom())}if(!isNaN(self.paddingLeft())){model.paddingLeft(self.paddingLeft())}if(!isNaN(self.paddingRight())){model.paddingRight(self.paddingRight())}var target=self.target();var data=target.data().data.concat();root=d3.stratify().id(function(d){return d[self.stratifyId()]}).parentId(function(d){return d[self.stratifyParentId()]})(data);var nodes=root.descendants();for(var node,data,i=0,len=nodes.length;i<len;i++){node=nodes[i];data=node.data;if(data.visible===false){var parent=node.parent,children=parent?parent.children:undefined;if(children){children.splice(children.indexOf(node),1)}}}root=d3.hierarchy(root).eachBefore(function(d){d.data=d.data.data;d.data.path=(d.parent?d.parent.data.path+".":"")+d.data.name}).sum(sumType==="size"?sumBySize:sumByCount).sort(function(a,b){return b.height-a.height||b.value-a.value});model(root);self.leaves(root.leaves());target.renderPosition();console.log("TreemapLayout::measure()")};this.toString=function(){return("TreemapLayout info: \n   size:"+this.target().width()+","+this.target().height())};init()};TreemapLayout.struct=function(ghca_charts){var Layout=ghca_charts.layout.layout;Layout.struct(ghca_charts);TreemapLayout.prototype=Object.create(Layout.prototype);TreemapLayout.prototype.constructor=TreemapLayout};module.exports=TreemapLayout}.call(exports,__webpack_require__(2)))},function(f,c){var e=function(g,j){const r=ghca_charts.layout.layout;r.apply(this,arguments);var u=this;u.isChartLayout(false);var o=null;this.model=function(){return o};var k="left";this.horizontalAlign=function(v){if(!arguments.length){return k}k=v;return this};var n="top";this.verticalAlign=function(v){if(!arguments.length){return n}n=v;return this};var q=6;this.gap=function(v){if(!arguments.length){return q}q=v;return this};var p=false;this.fit=function(v){if(!arguments.length){return p}p=v;return this};var i=0;this.paddingBottom=function(v){if(!arguments.length){return i}i=v;return this};var m=0;this.paddingLeft=function(v){if(!arguments.length){return m}m=v;return this};var l=0;this.paddingRight=function(v){if(!arguments.length){return l}l=v;return this};var t=0;this.paddingTop=function(v){if(!arguments.length){return t}t=v;return this};var s=function(){u.refreshData(j)};this.measure=function(){var G=this,P=G.target(),z=P.children();if(!P||!z||z.length===0){return}var M=G.paddingTop(),N=G.paddingLeft(),v=G.paddingRight(),B=G.paddingBottom(),J=G.horizontalAlign(),C=G.verticalAlign(),H=G.gap(),F=P.width()-N-v,L=P.height()-M-B;var E,D,A,K=z.length,O=0,I=0;if(p||C==="middle"){for(I=0;I<K;I++){A=z[I];O+=A.height()}if(p){H=K>1?(L-O)/(K-1):0}O+=H*(K-1)}for(I=0;I<K;I++){A=z[I];if(J==="left"){E=N}else{if(J==="center"){E=N+(F-A.width())/2}else{if(J==="right"){E=N+F-A.width()}}}if(p||C==="middle"){D=M+(L-O)/2+(A.height()+H)*I}else{if(C==="top"){D=M+(A.height()+H)*I}else{if(C==="bottom"){D=M+L-A.height()*(I+1)-H*I}}}A.x(E);A.y(D);A.renderTransform()}console.log("VerticalLayout::measure()")};this.toString=function(){return("VerticalLayout info: ")};s()};e.struct=function(g){var i=g.layout.layout;i.struct(g);e.prototype=Object.create(i.prototype);e.prototype.constructor=e};f.exports=e},function(module,exports,__webpack_require__){(function(d3){var comId=0;var BaseComponent=function(_data,_layout){const Layout=ghca_charts.layout.layout;const LayoutFeatures=ghca_charts.layout.layoutFeatures;const HorizontalLayout=ghca_charts.layout.horizontalLayout;const VerticalLayout=ghca_charts.layout.verticalLayout;const MouseUtil=ghca_charts.view.util.mouseUtil;const SvgUtil=ghca_charts.view.util.svgUtil;const Const=ghca_charts.view.util.constant;const ObjectUtil=ghca_charts.view.util.objectUtil;const EventUtil=ghca_charts.view.util.eventUtil;const BaseEvent=ghca_charts.events.BaseEvent;const RegexUtil=ghca_charts.view.util.regexUtil;var self=this,layoutFeatures=null,defaultWidth=0,defaultHeight=0,defaultMaxWidth=10000,defaultMaxHeight=10000;self.dispatch=d3.dispatch("event");var id=null;this.id=function(value){if(!arguments.length){return id}id=value;return this};var className="mainContainer";this.className=function(value){if(!arguments.length){return className}className=value;return this};var data=_data;this.data=function(value){if(!arguments.length){return data}self.setAttributes(value);data=value;return this};var layout=_layout;this.layout=function(value){if(!arguments.length){return layout}layout=value;if(layout&&!layout.target()){layout.target(self)}return this};var parent=null;this.parent=function(value){if(!arguments.length){return parent}parent=value;if(parent instanceof BaseComponent&&parent.layout()&&!parent.layout().isChartLayout()&&layoutFeatures===null){layoutFeatures=new LayoutFeatures()}else{layoutFeatures=null}return this};var children=[];this.children=function(value){if(!arguments.length){return children}children=value;return this};this.numChildren=function(value){return self.children.length};this.parentWidth=function(){if(!self.parent()||!self.parent().bgNode()){return 0}var box=self.parent().bgNode().getBBox();return box.width};this.parentHeight=function(){if(!self.parent()||!self.parent().bgNode()){return 0}var box=self.parent().bgNode().getBBox();return box.height};var percentX=NaN;this.percentX=function(value){if(!arguments.length){return percentX}percentX=value;return this};var percentY=NaN;this.percentY=function(value){if(!arguments.length){return percentY}percentY=value;return this};var percentZ=NaN;this.percentZ=function(value){if(!arguments.length){return percentZ}percentZ=value;return this};var x=0;this.x=function(value){if(!arguments.length){if(layoutFeatures!==null){return layoutFeatures.x()}return isNaN(percentX)?x:(this.parentWidth()*percentX/100)}if(layoutFeatures===null){x=value}else{layoutFeatures.x(value)}return this};var y=0;this.y=function(value){if(!arguments.length){if(layoutFeatures!==null){return layoutFeatures.y()}return isNaN(percentY)?y:(this.parentHeight()*percentY/100)}if(layoutFeatures===null){y=value}else{layoutFeatures.y(value)}return this};var z=0;this.z=function(value){if(!arguments.length){if(layoutFeatures!==null){return layoutFeatures.z()}return isNaN(percentZ)?z:NaN}if(layoutFeatures===null){z=value}else{layoutFeatures.z(value)}return this};var maxWidth=defaultMaxWidth;this.maxWidth=function(value){if(!arguments.length){return maxWidth}maxWidth=value;return this};var maxHeight=defaultMaxHeight;this.maxHeight=function(value){if(!arguments.length){return maxHeight}maxHeight=value;return this};var minWidth=0;this.minWidth=function(value){if(!arguments.length){return minWidth}minWidth=value;return this};var minHeight=0;this.minHeight=function(value){if(!arguments.length){return minHeight}minHeight=value;return this};var percentWidth=NaN;this.percentWidth=function(value){if(!arguments.length){return percentWidth}percentWidth=value;return this};var percentHeight=NaN;this.percentHeight=function(value){if(!arguments.length){return percentHeight}percentHeight=value;return this};var width=NaN;this.width=function(value){if(!arguments.length){var w;if(isNaN(percentWidth)){w=isNaN(width)?defaultWidth:width}else{w=this.parentWidth()*percentWidth/100}if(w<minWidth){w=minWidth}else{if(w>maxWidth){w=maxWidth}}return w}width=value;return this};var height=NaN;this.height=function(value){if(!arguments.length){var h;if(isNaN(percentHeight)){h=isNaN(height)?defaultHeight:height}else{h=this.parentHeight()*percentHeight/100}if(h<minHeight){h=minHeight}else{if(h>maxHeight){h=maxHeight}}return h}height=value;return this};var scaleX=1;this.scaleX=function(value){if(!arguments.length){return scaleX}scaleX=value;return this};var scaleY=1;this.scaleY=function(value){if(!arguments.length){return scaleY}scaleY=value;return this};var rotate=0;this.rotate=function(value){if(!arguments.length){return rotate}rotate=value;return this};var title=null;this.title=function(value){if(!arguments.length){return title}title=value;return this};var titleFunction=null;this.titleFunction=function(value){if(!arguments.length){return titleFunction}titleFunction=value;return this};var zIndex=0;this.zIndex=function(value){if(!arguments.length){return zIndex}zIndex=value;if(mainContainer&&mainContainer.node()){mainContainer.node().setAttribute("z-index",zIndex)}return this};var maxScale=3;this.maxScale=function(value){if(!arguments.length){return maxScale}maxScale=value;return this};var minScale=0.3;this.minScale=function(value){if(!arguments.length){return minScale}minScale=value;return this};var scaleDelta=0.05;this.scaleDelta=function(value){if(!arguments.length){return scaleDelta}scaleDelta=value;return this};var scaleType=Const.NO_SCALE_TYPE;this.scaleType=function(value){if(!arguments.length){return scaleType}scaleType=value;return this};var mainContainer=null;this.mainContainer=function(value){if(!arguments.length){return mainContainer}mainContainer=value;return this};var bgContainer=null;this.bgContainer=function(value){if(!arguments.length){return bgContainer}bgContainer=value;return this};var borderContainer=null;this.borderContainer=function(value){if(!arguments.length){return borderContainer}borderContainer=value;return this};var titleContainer=null;this.titleContainer=function(value){if(!arguments.length){return titleContainer}titleContainer=value;return this};this.node=function(){var m=self.mainContainer();return m?m.node():null};this.bgNode=function(){var bg=self.bgContainer();return bg?bg.node():null};var isRenderer=false;this.isRenderer=function(value){if(!arguments.length){return isRenderer}isRenderer=value;return this};var normalChild=null;this.normalChild=function(value){if(!arguments.length){return normalChild}normalChild=value;return this};var clipContent=true;this.clipContent=function(value){if(!arguments.length){return clipContent}clipContent=value;return this};this.ownerSVG=function(){var parent=self;while(parent&&parent instanceof BaseComponent){if(parent.className()==="svgContainer"){return parent}parent=parent.parent()}return null};var animation=true;this.animation=function(value){if(!arguments.length){return animation}animation=value;return this};var isLight=false;this.isLight=function(value){if(!arguments.length){return isLight}isLight=value;return this};var attributes=["className","x","y","z","percentX","percentY","percentZ","width","height","maxWidth","maxHeight","minWidth","minHeight","percentWidth","percentHeight","title","zIndex","scaleX","scaleY","rotate","minScale","maxScale","scaleDelta","scaleType","clipContent","animation"];this.attributes=function(value){if(!arguments.length){return attributes}attributes=value;return this};this.getChildIndex=function(child){if(!(child instanceof BaseComponent)){return -1}return self.children().indexOf(child)};this.getChildAt=function(zIndex){if(isNaN(zIndex)||!self.isSafeZIndex(zIndex)){return -1}return self.children()[zIndex]};this.addChild=function(child){if(!(child instanceof BaseComponent)){return}var children=self.children();var index=children.indexOf(child);if(index===-1){children.push(child);child.parent(this);child.render()}else{children.push(children.splice(index,1)[0])}self.refreshChildrenZIndex()};this.addChildAt=function(child,zIndex){if(!(child instanceof BaseComponent)){return}var children=self.children();zIndex=self.getSafeZIndex(zIndex);var index=children.indexOf(child);if(index===-1){children.splice(zIndex,0,child);child.parent(this);child.render();self.refreshChildrenZIndex()}else{self.setChildAt(child,zIndex)}};this.setChildAt=function(child,zIndex){if(!(child instanceof BaseComponent)){return}var children=self.children();var index=children.indexOf(child);if(index===-1||index===zIndex){return}var delChild=children.splice(index,1)[0];if(index>zIndex){zIndex--}children.splice(zIndex,0,delChild);self.refreshChildrenZIndex()};this.swapChildrenAt=function(zIndex1,zIndex2){if(zIndex1===zIndex2||!self.isSafeZIndex(zIndex1)||!self.isSafeZIndex(zIndex2)){return false}var children=self.children();var tempChild=children[zIndex1];children[zIndex1]=children[zIndex2];children[zIndex2]=tempChild;self.refreshChildrenZIndex();return true};this.swapChildren=function(child1,child2){var zIndex1=self.getChildIndex(child1);var zIndex2=self.getChildIndex(child2);return self.swapChildrenAt(zIndex1,zIndex2)};this.removeChild=function(child){if(!(child instanceof BaseComponent)){return}var children=self.children();var index=children.indexOf(child);if(index!==-1){var delChild=children.splice(index,1)[0];delChild.zIndex(-1)}child.parent(null);child.destroy();self.refreshChildrenZIndex()};this.removeAllChildren=function(){var children=self.children();for(var child,i=0,len=children.length;i<len;i++){child=children[i];if(child instanceof BaseComponent){child.zIndex(-1);child.parent(null);child.destroy()}}children.length=0};this.refreshChildrenZIndex=function(){for(var i=0,len=children.length;i<len;i++){children[i].zIndex(i)}self.sortAllChildrenByZIndex()};this.isSafeZIndex=function(zIndex){if(isNaN(zIndex)){return false}if(zIndex<0||zIndex>self.numChildren()-1){return false}return true};this.getSafeZIndex=function(zIndex){var maxZindex=self.numChildren()-1;if(isNaN(zIndex)){return maxZindex}if(zIndex>maxZindex){zIndex=maxZindex}if(zIndex<0){zIndex=0}return zIndex};this.contains=function(child){if(!(child instanceof BaseComponent)){return false}return self.getChildIndex(child)!==-1};this.renderDefsElements=function(){};this.renderMainContainer=function(){if(!self.mainContainer()){var parentCon=self.parent().mainContainer();self.mainContainer(parentCon.append("g").attr("class",self.className()))}};this.renderBackground=function(){if(!self.bgContainer()){var bgCon=self.mainContainer().append("g").attr("class","bgContainer");self.bgContainer(bgCon)}if(!self.bgRect){self.bgRect=self.bgContainer().append("rect").attr("class","bg")}self.bgRect.attr("width",self.width()).attr("height",self.height()).attr("fill","white");if(_data&&_data.background){var background=_data.background;for(var key in background){self.bgRect.attr(key,background[key])}self.bgRect.attr("stroke-opacity",0)}else{self.bgRect.attr("opacity",0)}};this.renderBorder=function(){if(_data&&_data.border){if(!self.borderContainer()){var borderCon=self.mainContainer().append("g").attr("class","borderContainer").attr("z-index",BaseComponent.MAX_Z_INDEX).attr("pointer-events","none");self.borderContainer(borderCon)}if(!self.borderRect){self.borderRect=self.borderContainer().append("rect").attr("class","border")}var w=self.width(),h=self.height();self.borderRect.attr("width",w).attr("height",h);var border=_data.border;for(var key in border){self.borderRect.attr(key,border[key])}self.borderRect.attr("fill-opacity",0)}else{if(self.borderContainer()){self.borderContainer().remove()}}};this.renderTitle=function(){if(!self.title()&&!self.titleFunction()){if(self.titleContainer()){self.titleContainer().remove()}return}if(!self.titleContainer()){var titleClassName=this.className()+"-title";self.titleContainer(self.mainContainer().append("title").attr("class",titleClassName))}if(self.titleFunction()){self.titleContainer().text(self.titleFunction())}else{if(self.title()){self.titleContainer().text(formatTitleFn)}}};this.renderChildren=function(){self.renderMainContainer();if(!self.isLight()){self.renderBackground();self.renderBorder()}self.renderTitle()};this.sortAllChildrenByZIndex=function(){SvgUtil.sortByZIndex(self.node().childNodes,false)};this.renderTransform=function(transition){var con=transition?self.mainContainer().transition(transition):self.mainContainer();con.attr("transform",function(d){return"translate("+self.x()+","+self.y()+")scale("+self.scaleX()+","+self.scaleY()+")rotate("+self.rotate()+")"});self.mainContainer().node().dispatchEvent(EventUtil.createEvent(BaseEvent.POSITION_CHANGE,true,true))};this.renderSize=function(){if(self.isLight()){return}var con=self.bgContainer();var rect=con.select("rect.bg");if(rect){rect.attr("width",self.width());rect.attr("height",self.height())}con=self.borderContainer();if(con){rect=con.select("rect.border");if(rect){rect.attr("width",self.width());rect.attr("height",self.height())}}};this.renderDisplayList=function(){self.renderChildren();self.sortAllChildrenByZIndex()};this.renderSizeAndPosition=function(){self.renderSize();self.renderTransform()};this.render=function(){if(!self.parent()){return}self.renderDisplayList();self.renderSizeAndPosition();self.renderDefsElements();self.addListeners()};this.on=function(){if(self.mainContainer){self.mainContainer.on.apply(self.mainContainer,arguments)}};this.addListener=function(){var value=self.dispatch.on.apply(self.dispatch,arguments);return value===self.dispatch?self:value};this.addEventListener=function(){if(self.node()){var fn=self.node().addEventListener;if(fn){if(arguments.length===2){arguments[2]=true;arguments.length=3}return fn.apply(self.node(),arguments)}}return null};this.removeEventListener=function(){if(self.node()){var fn=self.node().removeEventListener;if(fn){if(arguments.length===2){arguments[2]=true}return fn.apply(self.node(),arguments)}}return null};this.dispatchEvent=function(){if(self.node()){var fn=self.node().dispatchEvent;if(fn){if(arguments&&arguments.length>0&&arguments[0] instanceof CustomEvent){var evt=arguments[0];var p={};for(var key in evt){p[key]=evt[key]}p.detail={data:evt.detail,target:self};var customEvent=EventUtil.createCustomEvent(evt.type,p);arguments[0]=customEvent}return fn.apply(self.node(),arguments)}}return null};this.init=function(){self.id(comId++);self.setAttributes(self.data());self.initLayout()};this.addAttributes=function(){var arg,attributes=self.attributes();for(var i=0,len=arguments.length;i<len;i++){arg=arguments[i];if(ObjectUtil.isString(arg)&&attributes.indexOf(arg)===-1){attributes.push(arg)}}};this.addListeners=function(){};this.initLayout=function(){if(!self.layout()&&self.data()){var layoutData=self.data().layout;if(layoutData){switch(layoutData.type.toLowerCase()){case"horizontallayout":self.layout(new HorizontalLayout(self,layoutData));break;case"verticallayout":self.layout(new VerticalLayout(self,layoutData));break;default:break}}}};this.updateOthers=function(){if(!self.isLight()){self.renderBackground();self.renderBorder()}self.renderTitle()};this.update=function(){var layout=self.layout();if(layout){layout.update()}self.renderSizeAndPosition();self.renderDefsElements();self.updateOthers();var children=self.children();if(children!==null&&children.length>0){for(var i=0,len=children.length;i<len;i++){children[i].update()}}};this.resize=function(){var layout=self.layout();if(layout&&!layout.isChartLayout()){layout.measure()}self.renderSizeAndPosition();self.renderDefsElements();var children=self.children();if(children!==null&&children.length>0){for(var i=0,len=children.length;i<len;i++){children[i].resize()}}self.mainContainer().node().dispatchEvent(EventUtil.createCustomEvent(BaseEvent.SIZE_CHANGE,true,true,{width:self.width(),height:self.height()}))};this.zoom=function(isEnlarge){var ds,scaleX=self.scaleX(),scaleY=self.scaleY(),scaleDelta=self.scaleDelta();if(isEnlarge){ds=scaleDelta;if(scaleX>=self.maxScale()||scaleY>=self.maxScale()){return}if(scaleX+ds>self.maxScale()){scaleX=self.maxScale()-ds}if(scaleY+ds>self.maxScale()){scaleY=self.maxScale()-ds}}else{ds=-scaleDelta;if(scaleX<=self.minScale()||scaleY<=self.minScale()){return}if(scaleX+ds<self.minScale()){scaleX=self.minScale()-ds}if(scaleY+ds<self.minScale()){scaleY=self.minScale()-ds}}var ratioX=ds/scaleX,ratioY=ds/scaleY,x=self.x(),y=self.y(),bg=self.parent().bgNode();x-=(MouseUtil.relativeX(d3.event,bg)-x)*ratioX;y-=(MouseUtil.relativeY(d3.event,bg)-y)*ratioY;self.x(x);self.y(y);self.scaleX(scaleX+ds);self.scaleY(scaleY+ds);self.renderTransform()};this.setAttributes=function(data){if(!data){return}for(var name,names=self.attributes(),i=0,len=names.length;i<len;i++){name=names[i];if(data.hasOwnProperty(name)&&self.hasOwnProperty(name)){self[name](data[name])}}};this.filterArrayByElementProperty=function(arr,name,value){var result=[];if(!arr||arr.length===0){return result}for(var i=0,len=arr.length;i<len;i++){if(arr[i][name]===value){result.push(arr[i])}}return result};this.setConfigProperty=function(key,value){if(!ObjectUtil.isString(key)||RegexUtil.whiteSpaceRegex.test(key)||!self.data()){return false}if(ObjectUtil.isString(value)){try{value=JSON.parse(value)}catch(e){try{value='"'+value+'"';value=JSON.parse(value)}catch(e){return false}}}var propertyNames=key.split(".");var arrayReg=RegexUtil.arrayFormatRegex;var configData=self.data();var name,arrayMatch,index;for(var i=0,len=propertyNames.length,lastIndex=len-1;i<len;i++){name=propertyNames[i];arrayMatch=name.match(arrayReg);if(arrayMatch){name=arrayMatch[1];index=parseInt(arrayMatch[2]);if(!ObjectUtil.isArray(configData[name])){configData[name]=[]}if(i===lastIndex){configData[name][index]=value}else{configData=configData[name][index]}}else{if(i===lastIndex){configData[name]=value}else{if(!ObjectUtil.isObject(configData[name])){configData[name]={}}configData=configData[name]}}}return true};this.setData=function(value){if(!self.data()){return false}if(ObjectUtil.isString(value)){try{if(value.indexOf("{")!==0&&value.indexOf("[")!==0){value='"'+value+'"'}value=JSON.parse(value)}catch(e){return false}}var configData=self.data();for(var key in value){var d=value[key];if(!ObjectUtil.isArray(d)){continue}if(!ObjectUtil.isArray(configData[key])){configData[key]=[]}var ary=configData[key];ary.length=0;for(var i=0,len=d.length;i<len;i++){ary.push(d[i])}}return true};this.setConfigPropertyAndUpdate=function(key,value){if(self.setConfigProperty(key,value)){self.update();return true}return false};this.setDataAndUpdate=function(value){if(self.setData(value)){self.update();return true}return false};this.destroy=function(){if(self.mainContainer()){self.mainContainer().remove()}};this.toJSON=function(){return JSON.stringify(self.data())};this.toString=function(){return("BaseComponent info: \n   x:"+self.x()+"\n   y:"+self.y()+"\n   z:"+self.z()+"\n   percentX:"+self.percentX()+"\n   percentY:"+self.percentY()+"\n   percentZ:"+self.percentZ()+"\n   parentWidth:"+self.parentWidth()+"\n   parentHeight:"+self.parentHeight()+"\n   width:"+self.width()+"\n   height:"+self.height()+"\n   percentWidth:"+self.percentWidth()+"\n   percentHeight:"+self.percentHeight()+"\n   minWidth:"+self.minWidth()+"\n   minHeight:"+self.minHeight()+"\n   maxWidth:"+self.maxWidth()+"\n   maxHeight:"+self.maxHeight()+"\n   scaleX:"+self.scaleX()+"\n   scaleY:"+self.scaleY()+"\n   rotate:"+self.rotate()+"\n   title:"+self.title()+"\n   data:"+JSON.stringify(self.data(),null,4))};var formatTitleFn=function(d){var titleStr=self.title();return titleStr.replace(RegexUtil.jsRegex,function(){return arguments.length>1?eval(arguments[1]):""})};BaseComponent.clazzName="BaseComponent";self.init()};BaseComponent.struct=function(ghca_charts){BaseComponent.prototype.constructor=BaseComponent};module.exports=BaseComponent}.call(exports,__webpack_require__(2)))},function(e,c){var f=function(){this.getMap=function(){var g={};g.sunburst=ghca_charts.view.component.charts.sunburst;g.chart=ghca_charts.view.component.charts.chart;g.pie=ghca_charts.view.component.charts.pie;g.radialtree=ghca_charts.view.component.charts.radialTree;g.sankey=ghca_charts.view.component.charts.sankey;g.topology=ghca_charts.view.component.charts.topology;g.tree=ghca_charts.view.component.charts.tree;g.scatter=ghca_charts.view.component.charts.scatter;g.area=ghca_charts.view.component.charts.area;g.line=ghca_charts.view.component.charts.line;g.bar=ghca_charts.view.component.charts.bar;g.treemap=ghca_charts.view.component.charts.treemap;return g}};f.struct=function(g){f.prototype.constructor=f};e.exports=f},function(e,c,f){(function(i){var g=function(n,A){const o=ghca_charts.view.component.baseComponent;const l=ghca_charts.view.component.charts.baseChart;const k=ghca_charts.view.util.classFactory;const s=ghca_charts.view.util.colorUtil;const B=ghca_charts.view.util.svgUtil;l.apply(this,arguments);var z=this,t=z.init,v=z.initAllContainers,r=z.addListeners,m=z.renderPosition,q=z.refreshData;z.className("seriesArea");z.addAttributes("tension","nodeShow","isDash");var u=0;this.tension=function(C){if(!arguments.length){return u}u=C;return this};var p=false;this.nodeShow=function(C){if(!arguments.length){return p}p=C;return this};var j=false;this.isDash=function(C){if(!arguments.length){return j}j=C;return this};this.init=function(){t();var C=z.data().data;z.visibleItems(C);z.itemsIns=[]};this.addListeners=function(){r()};this.refreshData=function(){q();var D=z.data().data;for(var F,E=0,C=D.length;E<C;E++){F=D[E];if(!F.hasOwnProperty("visible")){F.visible=true}}};this.renderPosition=function(){m();if(z.areaContainer){z.areaContainer.renderTransform()}};this.initAllContainers=function(){v();if(!z.areaContainer){var C=new o();C.className("area-Container");z.addChild(C);z.areaContainer=C}};this.update=function(){z.refreshData();var R=z.data().data;z.visibleItems(z.filterArrayByElementProperty(R,"visible",true));z.layout().update();var P=z.areaContainer;var G,ab,ad,I,Q=0,E=0,U=0;if(z.horAxis()){G=z.horAxis();Q=G.padding();ad=G.scaleIns()}if(z.verAxis()){ab=z.verAxis();E=ab.padding();I=ab.scaleIns();U=ab.height()}var Y=i.area().x(function(af){return af.x}).curve(i.curveCardinal.tension(z.tension()));var V=s.getColor(z.seriesIndex());P=z.areaContainer.mainContainer();z.areaContainer.x(Q.left);z.areaContainer.y(E.top);var T=z.visibleItems();for(var Z,W=0,X=T.length;W<X;W++){Z=T[W];if(Z.legendColor===null||Z.legendColor===undefined||Z.legendColor===""){Z.legendColor=V}z.getRendererConfig(Z,"fill")}var ae=P.selectAll("path.area-path").data(T.length>0?[T]:[]);var O=ae.exit();O.remove();ae.transition().duration(z.animation()?500:0).attr("fill",function(ag){var af=V;if(ag.hasOwnProperty("legendColor")){af=ag.legendColor}else{if(ag.length>0&&ag[0].hasOwnProperty("legendColor")){af=ag[0].legendColor}}return s.setAlpha(af,0.15)}).attr("stroke",function(ag){var af=V;if(ag.hasOwnProperty("legendColor")){af=ag.legendColor}else{if(ag.length>0&&ag[0].hasOwnProperty("legendColor")){af=ag[0].legendColor}}return af}).attr("d",Y.y(U)).attr("d",Y.y0(I(0)).y1(function(af){return af.y}));var L={"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":1.5,"stroke-dasharray":"0,0"};var aa=z.data().linkStyle;if(aa){for(var ac in aa){L[ac]=aa[ac]}}var S=ae.enter().append("path");for(var ac in aa){S.attr(ac,aa[ac])}S.attr("class","area-path").attr("fill",function(ag){var af=V;if(ag.hasOwnProperty("legendColor")){af=ag.legendColor}else{if(ag.length>0&&ag[0].hasOwnProperty("legendColor")){af=ag[0].legendColor}}return s.setAlpha(af,0.15)}).attr("stroke",function(ag){var af=V;if(ag.hasOwnProperty("legendColor")){af=ag.legendColor}else{if(ag.length>0&&ag[0].hasOwnProperty("legendColor")){af=ag[0].legendColor}}return af}).each(function(af){if(af.length>0){af[0].legendIns=z.areaContainer}}).attr("d",Y.y(U)).transition().duration(z.animation()?1000:0).attr("d",Y.y0(I(0)).y1(function(af){return af.y}));if(z.isDash()){var M=i.line().x(function(af){return af.x}).curve(i.curveCardinal.tension(z.tension()));var K=/[a-zA-Z]+[^a-zA-Z]*/g;var D=P.selectAll("path.line-path1").data(T.length>0?[T.filter(function(af){return !af.isDash})]:[]);var J=D.exit();J.remove();D.attr("visibility","hidden").transition().duration(z.animation()?0:0).attr("stroke",function(ag){var af=V;if(ag.hasOwnProperty("legendColor")){af=ag.legendColor}else{if(ag.length>0&&ag[0].hasOwnProperty("legendColor")){af=ag[0].legendColor}}return af}).attr("d",M.y(U)).attr("d",M.y(function(af){return af.y})).on("end",function(){var ah=ae.attr("d").match(K);var ai=D.attr("d").match(K);for(var ag=0,af=ai.length;ag<af;ag++){ai[ag]=ah[ag]}D.attr("visibility","visible").attr("d",ai.join(""))});var F=D.enter().append("path");for(var ac in aa){F.attr(ac,aa[ac])}F.attr("class","line-path1").attr("visibility","hidden").attr("fill","none").attr("stroke-dasharray","").attr("stroke",function(ag){var af=V;if(ag.hasOwnProperty("legendColor")){af=ag.legendColor}else{if(ag.length>0&&ag[0].hasOwnProperty("legendColor")){af=ag[0].legendColor}}return af}).attr("d",M.y(U)).transition().duration(z.animation()?1000:0).attr("d",M.y(function(af){return af.y})).on("end",function(){var ah=S.attr("d").match(K);var ai=F.attr("d").match(K);for(var ag=0,af=ai.length;ag<af;ag++){ai[ag]=ah[ag]}F.attr("visibility","visible").attr("d",ai.join(""))})}if(z.nodeShow()){var H=P.selectAll("g.point-item").data(T,function(ag,af){return ag.ins?af:ag.ins});var N=H.exit();N.remove();H.each(function(ag){var af=ag.ins;if(af){af.update()}});var C=H.enter().append("g").attr("class","point-item");C.each(function(ai){if(!ai.hasOwnProperty("legendColor")){ai.legendColor=V}var ah=z.getRendererConfig(ai,"stroke");var ag=ai.hasOwnProperty("renderer")?ah.clazz:"lineNode";var af=k.newNodeInstance(ag,[i.select(this),ai]);af.render();ai.ins=af;ai.legendIns=z.areaContainer})}else{P.selectAll("g.point-item").remove()}z.renderPosition()};this.toString=function(){return("Area info: \n   width:"+z.width()+"\n   height:"+z.height()+"\n   layout:"+z.layout()+"\n   data:"+JSON.stringify(z.data(),null,4))};g.clazzName="Area";z.init()};g.struct=function(k){var j=k.view.component.charts.baseChart;j.struct(k);g.prototype=Object.create(j.prototype);g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(module,exports,__webpack_require__){(function(d3){var Axis=function(_parent,_config){const HorAxis=ghca_charts.view.component.charts.horAxis;const VerAxis=ghca_charts.view.component.charts.verAxis;const BaseEvent=ghca_charts.events.BaseEvent;const ObjectUtil=ghca_charts.view.util.objectUtil;if(arguments.length<1){throw new Error("Axis传入参数个数错误,当前个数"+arguments.length+",应至少传入1个参数")}if(!_parent){throw new Error("Axis构造方法中传入的容器_parent:"+_parent+"无法找到。")}if(!_config||!_config.axis||(!_config.axis.xAxis&&!_config.axis.yAxis)){return}var self=this;var parseTime=d3.timeParse("%Y-%m-%d");parseTimeRegEx=new RegExp(/^\d{4}-\d{2}-\d{2}$/),parseDateTime=d3.timeParse("%Y-%m-%d %H:%M:%S"),parseDateTimeRegEx=new RegExp(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/);var horAxises=[];this.horAxises=function(value){if(!arguments.length){return horAxises}horAxises=value;return this};var verAxises=[];this.verAxises=function(value){if(!arguments.length){return verAxises}verAxises=value;return this};var config=_config;this.config=function(value){if(!arguments.length){return config}config=value;return this};this.render=function(){renderAxis(self.axisContainer,_config);renderGridLine()};this.getAxisContentArea=function(){var horAxis,verAxis;var horAxises=self.horAxises();if(horAxises&&horAxises.length>0){horAxis=horAxises[0]}var verAxises=self.verAxises();if(verAxises&&verAxises.length>0){verAxis=verAxises[0]}var hx=horAxis?horAxis.x():0;var vx=verAxis?verAxis.x():0;var hy=horAxis?horAxis.y():0;var vy=verAxis?verAxis.y():0;var x=hx<vx?hx:vx;var y=hy<vy?hy:vy;var w=horAxis?horAxis.width():0;var h=verAxis?verAxis.height():0;return{x:x,y:y,w:w,h:h}};this.update=function(){self.axisContainer.selectAll(".xAxis").remove();self.axisContainer.selectAll(".yAxis").remove();horAxises=self.horAxises();verAxises=self.verAxises();if(horAxises&&horAxises.length>0){horAxises.length=0}if(verAxises&&verAxises.length>0){verAxises.length=0}renderAxis(self.axisContainer,_config);if(_parent&&_parent.children().length>0){_parent.children().forEach(function(seriesChart){_parent.setAxisForSeriesCharts(seriesChart,seriesChart.data())})}if(horAxises&&horAxises.length>0){horAxises.forEach(function(axis){axis.update()})}if(verAxises&&verAxises.length>0){verAxises.forEach(function(axis){axis.update()})}renderGridLine()};this.toString=function(){};var init=function(){self.parent=_parent.mainContainer();parseConfig();initAllContainers();addListeners()};var parseConfig=function(){};var initAllContainers=function(){self.axisContainer=self.parent.append("g").attr("class","axis")};var addListeners=function(){};var renderHorAxises=function(parent,xAxis){console.log("Axis.renderHorAxises()");for(var i=0,len=xAxis.length;i<len;i++){renderHorAxis(parent,xAxis[i],i)}};var renderVerAxises=function(parent,yAxis){console.log("Axis.renderVerAxises()");for(var i=0,len=yAxis.length;i<len;i++){renderVerAxis(parent,yAxis[i],i)}};var renderHorAxis=function(parent,axisData,index){console.log("Axis.renderHorAxis(), type is "+axisData.type);setDomain(axisData,axisData.useDomain&&axisData.hasOwnProperty("domain")&&axisData.domain.length>0,index,true);var axis=new HorAxis(parent,axisData);if(!axis){throw new Error("当前传入的坐标轴类型"+axisData.type+"尚未支持。")}axis.parentChart(_parent);axis.render();self.horAxises().push(axis)};var renderVerAxis=function(parent,axisData,index){console.log("Axis.renderVerAxis(), type is "+axisData.type);setDomain(axisData,axisData.useDomain&&axisData.hasOwnProperty("domain")&&axisData.domain.length>0,index,false);var axis=new VerAxis(parent,axisData);if(!axis){throw new Error("当前传入的坐标轴类型"+axisData.type+"尚未支持。")}axis.parentChart(_parent);axis.render();self.verAxises().push(axis)};var renderAxis=function(parent,config){if(!config.axis.xAxis){self.horAxises().length=0}else{renderHorAxises(parent,config.axis.xAxis)}if(!config.axis.yAxis){self.verAxises().length=0}else{renderVerAxises(parent,config.axis.yAxis)}console.log("Axis.renderAxis()")};var renderGridLine=function(){var rect=self.getAxisContentArea();var horAxises=self.horAxises(),verAxises=self.verAxises();horAxises.forEach(function(axis){axis.renderGridLine(rect)});verAxises.forEach(function(axis){axis.renderGridLine(rect)});console.log("Axis.renderGridLine()")};var setContinuousDomain=function(axisData,hasDomain,index,isHor){if(!axisData||axisData.type==="enum"||hasDomain){return}var series=config.series;if(!series){return}var chartData,data,value,axisIndex,axisIndexKey,layout,minValue=null,maxValue=null,key=axisData.hasOwnProperty("key")?axisData.key:"name",keyPath=axisData.hasOwnProperty("keyPath")?axisData.keyPath:"",index=index===undefined?0:index;for(var i=0,len=series.length;i<len;i++){chartData=series[i];axisIndexKey=isHor?"xAxisIndex":"yAxisIndex";axisIndex=chartData.hasOwnProperty(axisIndexKey)?chartData[axisIndexKey]:0;if(axisIndex!==index){continue}layout=chartData.layout;if(layout.type==="barLayout"&&layout.barType!=="normal"&&layout.barType!==undefined){key="total"}data=keyPath===""?chartData:eval("chartData."+keyPath);for(var d,j=0,len1=data.length;j<len1;j++){d=data[j];if(d.hasOwnProperty("visible")&&!d.visible){continue}value=d[key];if(value!==undefined&&value!==null){if(axisData.type==="time"&&ObjectUtil.isString(value)){if(parseDateTimeRegEx.test(value)){value=parseDateTime(value)}else{if(parseTimeRegEx.test(value)){value=parseTime(value)}}d[key]=value}if(minValue===null){minValue=value}else{if(value<minValue){minValue=value}}if(maxValue===null){maxValue=value}else{if(value>maxValue){maxValue=value}}}}}axisData.domain=axisData.type==="time"?[minValue,maxValue]:[0<minValue?0:minValue,maxValue*1.2]};var setEnumDomain=function(axisData,hasDomain,index,isHor){if(!axisData||axisData.type!=="enum"||hasDomain){return}var series=config.series;if(!series){return}var chartData,data,value,axisIndex,axisIndexKey,domain=[],key=axisData.hasOwnProperty("key")?axisData.key:"name",keyPath=axisData.hasOwnProperty("keyPath")?axisData.keyPath:"",index=index===undefined?0:index;for(var i=0,len=series.length;i<len;i++){chartData=series[i];axisIndexKey=isHor?"xAxisIndex":"yAxisIndex";axisIndex=chartData.hasOwnProperty(axisIndexKey)?chartData[axisIndexKey]:0;if(axisIndex!==index){continue}data=keyPath===""?chartData:eval("chartData."+keyPath);if(ObjectUtil.isArray(data)){for(var d,j=0,len1=data.length;j<len1;j++){d=data[j];if(d.hasOwnProperty("visible")&&!d.visible){continue}value=d[key];if(value!==undefined&&value!==null){domain.push(value)}}}else{value=data[key];if(value!==undefined&&value!==null){domain.push(value)}}}axisData.domain=domain};var setDomain=function(axisData,hasDomain,index,isHor){setEnumDomain(axisData,false,index,isHor);setContinuousDomain(axisData,hasDomain,index,isHor)};init()};Axis.struct=function(ghca_charts){Axis.prototype.constructor=Axis};module.exports=Axis}.call(exports,__webpack_require__(2)))},function(e,c,f){(function(i){var g=function(m,u){const n=ghca_charts.view.component.baseComponent;const k=ghca_charts.view.component.charts.baseChart;const j=ghca_charts.view.util.classFactory;const q=ghca_charts.view.util.colorUtil;k.apply(this,arguments);var t=this,r=t.init,s=t.initAllContainers,p=t.addListeners,l=t.renderPosition,o=t.refreshData;t.className("seriesBar");this.init=function(){r();var v=t.data().data;t.visibleItems(v);t.itemsIns=[]};this.addListeners=function(){p()};this.refreshData=function(){o();var z=t.data().data;for(var B,A=0,v=z.length;A<v;A++){B=z[A];if(!B.hasOwnProperty("visible")){B.visible=true}}};this.renderPosition=function(){l();if(t.barContainer){t.barContainer.renderTransform()}};this.initAllContainers=function(){s();if(!t.barContainer){var v=new n();v.className("bar-Container");t.addChild(v);t.barContainer=v}};this.update=function(H){t.refreshData();var L=t.data().data;t.visibleItems(t.filterArrayByElementProperty(L,"visible",true));t.layout().update(H);var G=t.barContainer;var A,R,T,B,J,z,F,K=0,v=0,D=false;if(t.horAxis()){A=t.horAxis();K=A.padding();T=A.scaleIns();J=A.type();F=t.layout().barType();if(J!=="enum"&&F!=="normal"&&F!=="percentStack"){D=true}}if(t.verAxis()){R=t.verAxis();v=R.padding();B=R.scaleIns();z=R.type();F=t.layout().barType();if(!D&&z!=="enum"&&F!=="normal"&&F!=="percentStack"){D=true}}if(D&&t.parent()){t.parent().isUpdateAxisAgain=true}var N=q.getColor(t.seriesIndex()),I=J==="enum"&&z!=="enum";G=t.barContainer.mainContainer();t.barContainer.x(K.left);t.barContainer.y(v.top);var M=t.visibleItems();for(var Q,O=0,P=M.length;O<P;O++){Q=M[O];if(Q.legendColor===null||Q.legendColor===undefined||Q.legendColor===""){Q.legendColor=N}t.getRendererConfig(Q,"fill")}var C=G.selectAll("g.bar-item").data(M,function(V,U){return V.ins?U:V.ins});var S=C.exit();S.remove();C.each(function(V){var U=V.ins;if(U){U.update()}});var E=C.enter().append("g").attr("class","bar-item");E.each(function(W){if(!W.hasOwnProperty("legendColor")){W.legendColor=N}W.startY=R.height();var V=W.hasOwnProperty("data")&&W.data?W.data.clazz:(I?"vBarNode":"hBarNode");var U=j.newNodeInstance(V,[i.select(this),W]);U.render();W.ins=U;W.legendIns=U});t.renderPosition()};this.toString=function(){return("Bar info: \n   width:"+t.width()+"\n   height:"+t.height()+"\n   layout:"+t.layout()+"\n   data:"+JSON.stringify(t.data(),null,4))};g.clazzName="Bar";t.init()};g.struct=function(k){var j=k.view.component.charts.baseChart;j.struct(k);g.prototype=Object.create(j.prototype);g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(module,exports,__webpack_require__){(function(d3){var BaseAxis=function(_parent,_data){const ObjectUtil=ghca_charts.view.util.objectUtil;const HorAxis=ghca_charts.view.component.charts.horAxis;const VerAxis=ghca_charts.view.component.charts.verAxis;const SvgUtil=ghca_charts.view.util.svgUtil;const StringUtil=ghca_charts.view.util.stringUtil;if(arguments.length<2){throw new Error("传入参数个数错误,当前个数"+arguments.length+",应至少传入2个参数")}var self=this,defaultPadding=30,defaultPaddingObj={left:defaultPadding,top:defaultPadding,right:defaultPadding,bottom:defaultPadding},defaultTickArguments=[],defaultTickValues=null,defaultTickFormat=null,defaultTickSize=6,defaultTickSizeInner=6,defaultTickSizeOuter=6,defaultTickPadding=3,defaultTick={tickArguments:defaultTickArguments,tickValues:defaultTickValues,tickFormat:defaultTickFormat,tickSize:defaultTickSize,tickSizeInner:defaultTickSizeInner,tickSizeOuter:defaultTickSizeOuter,tickPadding:defaultTickPadding,show:true,style:{stroke:"#000"}},defaultTickLabel={style:{fontSize:12,fill:"#000"}},defaultGridLine={tickLine:{show:false,style:{stroke:"#ccc",strokeWidth:1}},innerLine:{show:false,gapNum:2,style:{stroke:"#eee",strokeWidth:1}}},defaultAxisLabel={text:"",padding:5,style:{fontSize:12,fill:"#000",textAnchor:"middle"}};var data=_data;this.data=function(value){if(!arguments.length){return data}data=value;return this};var type="value";this.type=function(value){if(!arguments.length){return type}type=value;return this};var x=0;this.x=function(value){if(!arguments.length){return x}x=value;return this};var y=0;this.y=function(value){if(!arguments.length){return y}y=value;return this};var width=0;this.width=function(value){if(!arguments.length){return width}width=value;return this};var height=0;this.height=function(value){if(!arguments.length){return height}height=value;return this};var position="";this.position=function(value){if(!arguments.length){return position}position=value;return this};var padding=defaultPaddingObj;this.padding=function(value){if(!arguments.length){return padding}padding=value;return this};var tick=defaultTick;this.tick=function(value){if(!arguments.length){return tick}tick=value;return this};var tickLabel=defaultTickLabel;this.tickLabel=function(value){if(!arguments.length){return tickLabel}tickLabel=value;return this};var visible=true;this.visible=function(value){if(!arguments.length){return visible}visible=value;return this};var keyPath="";this.keyPath=function(value){if(!arguments.length){return keyPath}keyPath=value;return this};var key="name";this.key=function(value){if(!arguments.length){return key}key=value;return this};var domain=[0,1];this.domain=function(value){if(!arguments.length){return domain}domain=StringUtil.parseArray(value);return this};var interval=NaN;this.interval=function(value){if(!arguments.length){return isNaN(interval)?0:interval}interval=value;return this};var scaleIns=null;this.scaleIns=function(value){if(!arguments.length){return scaleIns}scaleIns=value;return this};var axisIns=null;this.axisIns=function(value){if(!arguments.length){return axisIns}axisIns=value;return this};var gridLine=null;this.gridLine=function(value){if(!arguments.length){return gridLine}gridLine=value;return this};var axisLabel=null;this.axisLabel=function(value){if(!arguments.length){return axisLabel}axisLabel=value;return this};var parentChart=null;this.parentChart=function(value){if(!arguments.length){return parentChart}parentChart=value;return this};this.refreshData=function(){var axis=self.data();self.type(axis.hasOwnProperty("type")?axis.type:"value");self.position(axis.hasOwnProperty("position")?axis.position:"");self.visible(axis.hasOwnProperty("visible")?axis.visible:true);self.keyPath(axis.hasOwnProperty("keyPath")?axis.keyPath:"");self.interval(axis.hasOwnProperty("interval")?axis.interval:NaN);if(axis.hasOwnProperty("key")&&ObjectUtil.isString(axis.key)){self.key(axis.key)}else{self.key("name")}var newPadding={left:defaultPadding,top:defaultPadding,right:defaultPadding,bottom:defaultPadding};if(axis.hasOwnProperty("padding")&&ObjectUtil.isObject(axis.padding)){var padding=axis.padding;for(var k in newPadding){if(padding.hasOwnProperty(k)){newPadding[k]=padding[k]}}}self.padding(newPadding);var newTick={tickArguments:defaultTickArguments,tickValues:defaultTickValues,tickFormat:defaultTickFormat,tickSize:defaultTickSize,tickSizeInner:defaultTickSizeInner,tickSizeOuter:defaultTickSizeOuter,tickPadding:defaultTickPadding,show:true,style:{stroke:"#000"}};if(axis.hasOwnProperty("tick")&&ObjectUtil.isObject(axis.tick)){newTick=createConfig(defaultTick,axis.tick);var tickArguments=newTick.tickArguments;if(ObjectUtil.isString(tickArguments)){if(newTick.tickArguments===""){newTick.tickArguments=[]}else{newTick.tickArguments=StringUtil.parseArray(tickArguments)}}var tickValues=newTick.tickValues;if(ObjectUtil.isString(tickValues)){if(newTick.tickValues===""){newTick.tickValues=null}else{newTick.tickValues=StringUtil.parseArray(tickValues)}}var tickFormat=newTick.tickFormat;if(ObjectUtil.isString(tickFormat)){if(tickFormat===""){newTick.tickFormat=null}else{newTick.tickFormat=function(d){try{return eval(tickFormat)}catch(e){return tickFormat}}}}}self.tick(newTick);var newTickLabel=defaultTickLabel;if(axis.hasOwnProperty("tickLabel")&&ObjectUtil.isObject(axis.tickLabel)){newTickLabel=createConfig(defaultTickLabel,axis.tickLabel)}self.tickLabel(newTickLabel);if(axis.hasOwnProperty("domain")&&ObjectUtil.isArray(axis.domain)){var domain=axis.domain;if(self.type()==="time"){if(self.interval()!==0){var lastIndex=domain.length-1;if(domain[lastIndex]){var time=domain[lastIndex].getTime();domain[lastIndex]=new Date(time+self.interval()*1000)}}}self.domain(axis.domain)}else{self.domain([0,1])}var newGridLine=defaultGridLine;if(axis.hasOwnProperty("gridLine")&&ObjectUtil.isObject(axis.gridLine)){var gridLine=axis.gridLine,tickLine=gridLine.tickLine,innerLine=gridLine.innerLine;if(tickLine){newGridLine.tickLine=createConfig(defaultGridLine.tickLine,gridLine.tickLine)}if(innerLine){newGridLine.innerLine=createConfig(defaultGridLine.innerLine,gridLine.innerLine)}}self.gridLine(newGridLine);var newAxisLabel=defaultAxisLabel;if(axis.hasOwnProperty("label")&&ObjectUtil.isObject(axis.label)){if(self instanceof HorAxis){newAxisLabel.pos="right"}else{newAxisLabel.pos="top"}if(axis.label){newAxisLabel=createConfig(defaultAxisLabel,axis.label)}}self.axisLabel(newAxisLabel)};this.update=function(){self.refreshData();self.renderChildren()};this.render=function(){self.refreshData();self.renderChildren()};this.renderChildren=function(){self.renderAxis();self.setTickPathStyle();self.setTickLabelStyle();self.renderAxisLabel()};this.renderAxis=function(){};this.renderAxisLabel=function(){};this.renderGridLine=function(rect){if(!self.gridLine().tickLine.show&&!self.gridLine().innerLine.show){return}if(!self.gridLineContainer){self.gridLineContainer=self.axisContainer.insert("g",":first-child").attr("class","gridLine-container")}SvgUtil.removeAllChildren(self.gridLineContainer.node());if(self.gridLine().tickLine.show){self.renderTickLine(rect);self.setTickLineStyle()}if(self.gridLine().innerLine.show){self.renderInnerLine(rect);self.setInnerLineStyle(rect)}};this.renderTickLine=function(rect){};this.renderInnerLine=function(rect){};this.setTickLabelStyle=function(){var group=self.axisContainer.selectAll("g.tick text");var style=self.tickLabel().style;if(style){var fontSize=style.fontSize;if(!fontSize){fontSize=defaultTickLabel.style.fontSize}var maxWidth=style.maxWidth;var textLine=style.hasOwnProperty("textLine")?style.textLine:1;if(!isNaN(maxWidth)){if(maxWidth<0){maxWidth=0}group.each(function(d){var text=d3.select(this);var content=text.text();texts=StringUtil.splitByLine(content,maxWidth,fontSize,textLine);text.text("");text.selectAll("tspan").data(texts).enter().append("tspan").text(function(d){return d});text.append("title").text(content)})}setGroupStyle(group,style)}setGroupAttr(group,self.tickLabel().attr)};this.setTickPathStyle=function(){var tick=self.tick();var group1=self.axisContainer.selectAll("g.tick line");group1.style("visibility",self.visible()===false||tick.show===false?"hidden":"visible");setGroupStyle(group1,tick.style);setGroupAttr(group1,tick.attr);var group2=self.axisContainer.selectAll("path.domain");group2.style("visibility",self.visible()===false||tick.show===false?"hidden":"visible");setGroupStyle(group2,tick.style);setGroupAttr(group2,tick.attr)};this.setTickLineStyle=function(){var group=self.axisContainer.selectAll("g.gridLine-container line.tickLine");setGroupStyle(group,self.gridLine().tickLine.style);setGroupAttr(group,self.gridLine().tickLine.attr)};this.setInnerLineStyle=function(){var group=self.axisContainer.selectAll("g.gridLine-container line.innerLine");setGroupStyle(group,self.gridLine().innerLine.style);setGroupAttr(group,self.gridLine().innerLine.attr)};this.setAxisLabelStyle=function(){var group=self.axisContainer.selectAll("text.axisLabel");setGroupStyle(group,self.axisLabel().style);setGroupAttr(group,self.axisLabel().attr)};this.getTicksPos=function(){};this.getTicksText=function(){var result=[];var texts=self.axisContainer.selectAll("g.tick text title");if(texts.nodes().length===0){texts=self.axisContainer.selectAll("g.tick text")}texts.each(function(){var text=d3.select(this).text();result.push(text)});return result};this.toString=function(){};var init=function(){if(typeof(_parent)==="string"){_parent=document.getElementById(_parent)}if(!_parent){throw new Error("BaseAxis构造方法中传入的容器_parent:"+_parent+"无法找到。")}self.parent=_parent};var createConfig=function(defaultConfig,config){if(!defaultConfig||!config){return null}for(var k in config){if(k==="style"){for(var m in config.style){if(!defaultConfig.style){defaultConfig.style={}}defaultConfig.style[m]=config.style[m]}}else{defaultConfig[k]=config[k]}}return defaultConfig};var setGroupStyle=function(group,styleConfig){if(!self.axisContainer||group.node()===null||!styleConfig){return}var obj;group.each(function(d){obj=d3.select(this).node();for(var k in styleConfig){obj.style[k]=styleConfig[k]}})};var setGroupAttr=function(group,attrConfig){if(!self.axisContainer||group.node()===null||!attrConfig){return}for(var k in attrConfig){group.attr(k,attrConfig[k])}};init()};BaseAxis.struct=function(ghca_charts){BaseAxis.prototype.constructor=BaseAxis};module.exports=BaseAxis}.call(exports,__webpack_require__(2)))},function(e,c,f){(function(i){var g=function(E,t){const K=ghca_charts.layout.layout;const B=ghca_charts.view.util.constant;const N=ghca_charts.view.component.baseComponent;const z=ghca_charts.layout.topoLayout;const A=ghca_charts.layout.treelayout;const C=ghca_charts.layout.sankeyLayout;const p=ghca_charts.layout.sunburstLayout;const r=ghca_charts.layout.pieLayout;const n=ghca_charts.layout.scatterLayout;const m=ghca_charts.layout.barLayout;const H=ghca_charts.layout.treemapLayout;const M=ghca_charts.view.util.objectUtil;const Q=ghca_charts.view.util.eventUtil;const k=ghca_charts.events.BaseEvent;N.apply(this,arguments);var D=this,I=false,q=D.init,G=D.resize,u=D.renderBackground,v=D.renderChildren;D.className("seriesChart");D.addAttributes("key","keyPath","dragable");var F=[];this.visibleItems=function(S){if(!arguments.length){return F}F=S;return this};var l=null;this.horAxis=function(S){if(!arguments.length){return l}l=S;return this};var O=null;this.verAxis=function(S){if(!arguments.length){return O}O=S;return this};var P="";this.keyPath=function(S){if(!arguments.length){return P}P=S;return this};var R="";this.key=function(S){if(!arguments.length){return R}R=S;return this};var o="";this.itemRenderer=function(S){if(!arguments.length){return o}o=S;return this};var s=true;this.dragable=function(S){if(!arguments.length){return s}s=S;return this};var J=-1;this.seriesIndex=function(S){if(!arguments.length){return J}J=S;return this};var L=null;this.seriesData=function(S){if(!arguments.length){return L}L=S;return this};this.chartDragStartHandler=function(){I=!j();if(!I){var S=Q.createEvent("click.legendItem",{bubbles:true,cancelable:true});event.target.parentNode.dispatchEvent(S)}};this.chartDragHandler=function(){if(!I||!D.dragable()){return}var S=D.x(),T=D.y();D.x(S+i.event.dx);D.y(T+i.event.dy);D.renderTransform()};this.zoomHandler=function(){var S=D.scaleType();if(S===B.NO_SCALE_TYPE){return}var T=D.scaleType()!==B.COMPONENT_SCALE_TYPE;if(T){if(D.layout()){D.layout().zoom(i.event.deltaY>0)}}else{D.zoom(i.event.deltaY>0)}};this.init=function(){q();D.model=D.layout().model();D.lastX=0,D.lastY=0};this.initLayout=function(){if(!D.layout()){var S=D.data().layout;if(S){switch(S.type.toLowerCase()){case"topolayout":D.layout(new z(D,S));break;case"treelayout":D.layout(new A(D,S));break;case"sankeylayout":D.layout(new C(D,S));break;case"pielayout":D.layout(new r(D,S));break;case"sunburstlayout":D.layout(new p(D,S));break;case"scatterlayout":D.layout(new n(D,S));break;case"barlayout":D.layout(new m(D,S));break;case"treemaplayout":D.layout(new H(D,S));break;default:break}}}};this.initAllContainers=function(){};this.addListeners=function(){if(!D.parent()||D.parent().isRenderer()){return}D.parent().mainContainer().node().addEventListener(k.EAGLE_EYE_DRAG,function(T){var S=T.detail;D.x(S.x);D.y(S.y)});D.parent().mainContainer().on("wheel",D.zoomHandler);D.addDragListeners()};this.addDragListeners=function(){D.parent().mainContainer().call(i.drag().on("start",D.chartDragStartHandler).on("drag",D.chartDragHandler))};this.removeDragListeners=function(){D.parent().mainContainer().on("mousedown.drag",null)};this.renderPosition=function(){D.renderTransform()};this.refreshData=function(){var W=D.data();if(!W){return}var T=D.attributes();if(T){for(var V,U=0,S=T.length;U<S;U++){V=T[U];if(D.hasOwnProperty(V)&&W.hasOwnProperty(V)){D[V](W[V])}}}};this.renderBackground=function(){u();if(D.bgRect){D.bgRect.attr("pointer-events","none")}};this.renderChildren=function(){v();D.initAllContainers();D.refreshData();D.update()};this.resize=function(){G();D.update(true)};this.getRendererConfig=function(V,T){if(!V){return null}if(V.data&&V.data.type&&V.data.type==="chart"&&V.data.series){return V.data}var U=null;if(V.renderer){U=D.data().renderers[V.renderer];if(!U){return null}U=M.cloneObj(U);if(V.legendColor){if(U.useProperties){U.useProperties[T]=V.legendColor}else{var S={};S[T]=V.legendColor;U.useProperties=S}}}V.data=U;return U};this.toString=function(){return("BaseChart info: \n   width:"+D.width()+"\n   height:"+D.height()+"\n   layout:"+D.layout()+"\n   data:"+JSON.stringify(this.data(),null,4))};var j=function(){var S=event.target;return S&&S.parentNode&&S.parentNode.getAttribute&&S.parentNode.getAttribute("class")==="legendItem"};g.clazzName="BaseChart"};g.struct=function(k){var j=k.view.component.baseComponent;j.struct(k);g.prototype=Object.create(j.prototype);g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(module,exports,__webpack_require__){(function(d3){var Chart=function(_data,_layout){const BaseComponent=ghca_charts.view.component.baseComponent;const SvgUtil=ghca_charts.view.util.svgUtil;const Legend=ghca_charts.view.component.charts.legend;const Heading=ghca_charts.view.component.charts.heading;const Axis=ghca_charts.view.component.charts.axis;const BaseChart=ghca_charts.view.component.charts.baseChart;const ClassFactory=ghca_charts.view.util.classFactory;const BaseEvent=ghca_charts.events.BaseEvent;const ObjectUtil=ghca_charts.view.util.objectUtil;const EventUtil=ghca_charts.view.util.eventUtil;const RegexUtil=ghca_charts.view.util.regexUtil;const ElementUtil=ghca_charts.view.util.elementUtil;BaseComponent.apply(this,arguments);var firstHorAxis,firstVerAxis,ticksPos,ticksText,chartNode,chartRect,axisHotBox,svgRect,self=this,superResize=self.resize,superUpdate=self.update,superRenderChildren=self.renderChildren,formatTime=d3.timeFormat("%Y-%m-%d"),formatDateTime=d3.timeFormat("%Y-%m-%d %H:%M:%S"),visibleItems=[],visibleItemsChanged=true,isHorAxisTime=false;self.className("chart");var headings=[];this.headings=function(value){if(!arguments.length){return headings}headings=value;return this};var legend=null;this.legend=function(value){if(!arguments.length){return legend}legend=value;return this};var axis=null;this.axis=function(value){if(!arguments.length){return axis}axis=value;return this};var toolTip=null;this.toolTip=function(value){if(!arguments.length){return toolTip}toolTip=value;return this};this.renderSeries=function(parent,series){console.log("Graph.renderSeries()");for(var i=0,len=series.length;i<len;i++){self.renderSeriesChart(parent,series,i)}};this.renderSeriesChart=function(parent,series,index){var chartData=series[index];console.log("Graph.renderSeriesChart(), type is "+chartData.type);var chart=ClassFactory.newChartInstance(chartData.type,[chartData,null]);if(!chart){throw new Error("当前传入的图表类型"+chart.type+"尚未支持。")}chart.seriesIndex(index);chart.seriesData(series);self.setAxisForSeriesCharts(chart,chartData);parent.addChild(chart);return chart};this.renderHeadings=function(parent,config){if(!config.headings){self.headings().length=0;return}console.log("Graph.renderHeadings()");var headings=config.headings;for(var i=0,len=headings.length;i<len;i++){self.renderHeading(parent,config,headings[i])}};this.renderHeading=function(parent,config,headingConfig){if(!config||!headingConfig){return}console.log("Graph.renderHeading()");var heading=new Heading(parent,config,headingConfig);heading.render();self.headings().push(heading)};this.renderLegend=function(parent,config){if(!config.legend){self.legend(null);return}console.log("Graph.renderLegend()");var legend=new Legend(parent,config);legend.render();self.legend(legend)};this.renderAxis=function(parent,config){if(!config.axis||(!config.axis.xAxis&&!config.axis.yAxis)){self.axis(null);return}console.log("Graph.renderAxis()");var axis=new Axis(parent,config);axis.render();self.axis(axis);firstHorAxis=axis.horAxises().length>0?axis.horAxises()[0]:null;firstVerAxis=axis.verAxises().length>0?axis.verAxises()[0]:null};this.renderToolTip=function(parent,config){if(!config.toolTip){self.toolTip(null);return}console.log("Graph.renderToolTip()");var toolTipDiv=self.ownerSVG().toolTipDiv();updateStyle(toolTipDiv,config.toolTip.style);updateAttr(toolTipDiv,config.toolTip.attr);self.toolTip(toolTipDiv)};this.renderChildren=function(){superRenderChildren();parseConfig();var data=self.data();if(data&&data.hasOwnProperty("series")){self.renderHeadings(self,data);self.renderLegend(self,data);self.renderAxis(self,data);self.renderSeries(self,data.series);renderAxisHotAreaContainer();renderSplitLineContainer();renderFocusLineContainer();renderHSliderContainer();self.renderToolTip(self,data);updateAgainInBarChart()}};this.setAxisForSeriesCharts=function(chart,chartData){var xAxisIndex,yAxisIndex,axis=self.axis(),horAxises=axis?axis.horAxises():null,verAxises=axis?axis.verAxises():null;if(horAxises&&horAxises.length>0){if(chartData.hasOwnProperty("xAxisIndex")){xAxisIndex=chartData.xAxisIndex;if(xAxisIndex>=horAxises.length){xAxisIndex=horAxises.length-1}if(xAxisIndex<0){xAxisIndex=0}}else{xAxisIndex=0}chart.horAxis(horAxises[xAxisIndex])}if(verAxises&&verAxises.length>0){if(chartData.hasOwnProperty("yAxisIndex")){yAxisIndex=chartData.yAxisIndex;if(yAxisIndex>=verAxises.length){yAxisIndex=verAxises.length-1}if(yAxisIndex<0){yAxisIndex=0}}else{yAxisIndex=0}chart.verAxis(verAxises[yAxisIndex])}};this.sortAllChildrenByZIndex=function(){var zIndex,className,childNodes=self.node().childNodes,chartIndex=0;for(var element,i=0,len=childNodes.length;i<len;i++){element=childNodes[i];className=element.getAttribute("class");if(className==="legend"){element.setAttribute("z-index",Chart.LEGEND_Z_INDEX)}else{if(className==="heading"){element.setAttribute("z-index",Chart.HEADING_Z_INDEX)}else{if(className==="axis"){element.setAttribute("z-index",Chart.AXIS_Z_INDEX)}else{if(className==="axis-hotArea-container"){element.setAttribute("z-index",Chart.AXIS_HOTAREA_CONTAINER_Z_INDEX)}else{if(className==="focus-container"){element.setAttribute("z-index",Chart.FOCUS_CONTAINER_Z_INDEX)}else{if(className==="borderContainer"){element.setAttribute("z-index",Chart.BORDER_CONTAINER_Z_INDEX)}else{if(className==="bgContainer"){element.setAttribute("z-index",Chart.BG_Z_INDEX)}else{if(className==="split-container"){element.setAttribute("z-index",Chart.SPLIT_CONTAINER_Z_INDEX)}else{if(className==="hSlider-container"){element.setAttribute("z-index",Chart.HSLIDER_CONTAINER_Z_INDEX)}else{zIndex=parseInt(element.getAttribute("z-index"));if(!isNaN(zIndex)&&(zIndex<Chart.CHART_MIN_Z_INDEX+chartIndex||zIndex>Chart.CHART_MAX_Z_INDEX)){element.setAttribute("z-index",Chart.CHART_MIN_Z_INDEX+chartIndex);chartIndex++}}}}}}}}}}}SvgUtil.sortByZIndex(childNodes,false)};this.update=function(){visibleItemsChanged=true;var data=self.data();if(data&&data.hasOwnProperty("series")){if(self.axis()){barLayoutUpdate();self.axis().update()}renderAxisHotAreaContainer();renderSplitLineContainer();renderFocusLineContainer();renderHSliderContainer()}if(self.legend()){self.legend().update()}var headings=self.headings();if(headings&&headings.length>0){for(var i=0,len=headings.length;i<len;i++){headings[i].update()}}superUpdate()};this.resize=function(){superResize();var data=self.data();if(data&&data.hasOwnProperty("series")){if(self.axis()){self.axis().update()}renderAxisHotAreaContainer();renderSplitLineContainer();renderFocusLineContainer();renderHSliderContainer()}superResize();var headings=self.headings();if(headings&&headings.length>0){for(var i=0,len=headings.length;i<len;i++){headings[i].resetLayout(true)}}if(self.legend()){self.legend().resetLayout()}};this.renderDefsElements=function(){var id=self.id(),svg=self.ownerSVG().mainContainer();var maskId="rectMask"+id;if(self.clipContent()&&self.width()>0&&self.height()>0&&!self.isRenderer()){var rx=_data&&_data.border?_data.border.rx:undefined;var ry=_data&&_data.border?_data.border.ry:undefined;var reckMask=SvgUtil.createRectMask(svg,maskId,0,0,self.width(),self.height(),rx,ry);self.mainContainer().attr("mask","url(#"+maskId+")")}else{SvgUtil.deleteDefsElement(svg,maskId);self.mainContainer().attr("mask",null)}var data=self.data();if(data.hasOwnProperty("defs")){var defs=data.defs;for(var i=0,len=defs.length;i<len;i++){SvgUtil.createDefElement(svg,defs[i])}}};this.addListeners=function(){if(self.axis()){self.mainContainer().on("mouseover",mouseOverHandler);self.mainContainer().on("mousemove",mouseMoveHandler);self.mainContainer().on("mouseout",mouseOutHandler)}self.addEventListener(BaseEvent.LEGEND_ITEM_CLICK,self.legendItemClickHandler);self.addEventListener(BaseEvent.SHOW_TOOL_TIP,self.showToolTipHandler);self.addEventListener(BaseEvent.UPDATE_TOOL_TIP,self.updateToolTipHandler);self.addEventListener(BaseEvent.HIDE_TOOL_TIP,self.hideToolTipHandler)};this.getVisibleItems=function(){if(visibleItemsChanged){visibleItemsChanged=false;var children=self.children();if(children!==null&&children.length>0){visibleItems=[];var instanceofChart=ClassFactory.instanceofChart;for(var child,i=0,len=children.length;i<len;i++){child=children[i];if(instanceofChart(child)){visibleItems=visibleItems.concat(child.visibleItems())}}}}return visibleItems};this.getItemDataByX=function(x){var items=self.getVisibleItems();var item=getItemByX(x,items);return item};this.getItemDataByY=function(y){var items=self.getVisibleItems();var item=getItemByY(y,items);return item};this.getToolTipStr=function(config,x,y,tickIndex,d){var itemsData=self.getVisibleItems();var item,items,lineStr,str="",br="<br>";var labelFormat=config.labelFormat;var trigger=config.trigger?config.trigger:"item";var isHorAxisEnum=firstHorAxis&&firstHorAxis.type()==="enum";var isVerAxisEnum=firstVerAxis&&firstVerAxis.type()==="enum";if(labelFormat===null||labelFormat===undefined||labelFormat===""){}else{if(ObjectUtil.isString(labelFormat)){if(trigger==="xAxis"){if(isHorAxisEnum&&tickIndex!==undefined&&ticksText){items=self.filterArrayByElementProperty(itemsData,firstHorAxis.key(),ticksText[tickIndex])}else{items=getItemsByX(x,itemsData)}}else{if(trigger==="yAxis"){if(isVerAxisEnum&&tickIndex!==undefined&&ticksText){items=self.filterArrayByElementProperty(itemsData,firstVerAxis.key(),ticksText[tickIndex])}else{items=getItemsByY(y,itemsData)}}else{if(d!==undefined){items=[d]}}}for(var i=0,len=items.length;i<len;i++){item=items[i];lineStr=self.formatToolTip(labelFormat,item);if(lineStr!==""){str+=lineStr+br}}}else{if(ObjectUtil.isObject(labelFormat)){var len,xAxisFormat=labelFormat.xAxisFormat,yAxisFormat=labelFormat.yAxisFormat;if(trigger==="xAxis"){if(isHorAxisEnum&&tickIndex!==undefined&&ticksText){items=self.filterArrayByElementProperty(itemsData,firstHorAxis.key(),ticksText[tickIndex])}if(!items||items.length===0){items=getItemsByX(x,itemsData)}}else{if(trigger==="yAxis"){if(isVerAxisEnum&&tickIndex!==undefined&&ticksText){items=self.filterArrayByElementProperty(itemsData,firstVerAxis.key(),ticksText[tickIndex]);items.reverse()}if(!items||items.length===0){items=getItemsByY(y,itemsData)}}else{if(d!==undefined){items=[d]}}}if(ObjectUtil.isString(xAxisFormat)){if(items.length>0){if(trigger==="xAxis"){len=1}else{if(trigger==="yAxis"){len=items.length}else{len=1}}for(var i=0;i<len;i++){item=items[i];lineStr=self.formatToolTip(xAxisFormat,item);if(lineStr!==""){str+=lineStr+br}}}}if(ObjectUtil.isString(yAxisFormat)){if(items.length>0){if(trigger==="xAxis"){len=items.length;if(isVerAxisEnum){items.reverse()}}else{if(trigger==="yAxis"){len=1}else{len=1}}for(var i=0;i<len;i++){item=items[i];lineStr=self.formatToolTip(yAxisFormat,item);if(lineStr!==""){str+=lineStr+br}}}}}}}return str};this.formatToolTip=function(format,d){format=format.replace("\n","<br>");return format.replace(RegexUtil.jsRegex,function(){return arguments.length>1?eval(arguments[1]):""})};var mouseOverHandler=function(){axisHotBox=self.axisHotArea.node().getBBox();if(!isInsideHotArea()){return}if(isThumbDrag){return}if(self.xFocusLine){self.xFocusLine.attr("visibility","visible")}if(self.yFocusLine){self.yFocusLine.attr("visibility","visible")}if(toolTipTrigger==="xAxis"||toolTipTrigger==="yAxis"){var evt=EventUtil.createCustomEvent(BaseEvent.SHOW_TOOL_TIP,true,true);self.dispatchEvent(evt)}if(toolTipTrigger==="xAxis"){var horAxis,horAxises=self.axis().horAxises();if(horAxises&&horAxises.length>0){horAxis=horAxises[0];ticksPos=horAxis.getTicksPos();ticksText=horAxis.getTicksText()}}else{if(toolTipTrigger==="yAxis"){var verAxis,verAxises=self.axis().verAxises();if(verAxises&&verAxises.length>0){verAxis=verAxises[0];ticksPos=verAxis.getTicksPos();ticksText=verAxis.getTicksText().reverse()}}}};var mouseMoveHandler=function(){var axisHotArea=self.axisHotArea.node(),box=axisHotBox,mousePos=d3.mouse(axisHotArea),x=mousePos[0],y=mousePos[1],toolTipConfig=self.data().toolTip,trigger=toolTipConfig?toolTipConfig.trigger:null;if(!isInsideHotArea(x,y,box)){mouseOutHandler();return}if(isThumbDrag){return}var transition=d3.transition().duration(self.animation()?100:0).ease(d3.easeLinear);if(self.xFocusLine){if(trigger==="item"){self.xFocusLine.attr("x1",x).attr("x2",x).attr("y1",0).attr("y2",box.height)}else{if(firstHorAxis&&firstHorAxis.type()==="enum"&&ticksPos){var hIndex=getNearValueIndex(x,ticksPos);if(hIndex!==-1){var hx=ticksPos[hIndex];mousePos.push(hIndex);self.xFocusLine.attr("y1",0).attr("y2",box.height).transition(transition).attr("x1",hx).attr("x2",hx)}}else{var item=self.getItemDataByX(x);if(item){self.xFocusLine.attr("y1",0).attr("y2",box.height).transition(transition).attr("x1",item.x).attr("x2",item.x)}}}}if(self.yFocusLine){if(trigger==="item"){self.yFocusLine.attr("x1",0).attr("x2",box.width).attr("y1",y).attr("y2",y)}else{if(firstVerAxis&&firstVerAxis.type()==="enum"&&ticksPos){var vIndex=getNearValueIndex(y,ticksPos);if(vIndex!==-1){var vy=ticksPos[vIndex];mousePos.push(vIndex);self.yFocusLine.attr("x1",0).attr("x2",box.width).transition(transition).attr("y1",vy).attr("y2",vy)}}else{var item=self.getItemDataByY(y);if(item){self.yFocusLine.attr("x1",0).attr("x2",box.width).transition(transition).attr("y1",item.y).attr("y2",item.y)}}}}if(toolTipTrigger==="xAxis"||toolTipTrigger==="yAxis"){var evt=EventUtil.createCustomEvent(BaseEvent.UPDATE_TOOL_TIP,true,true,mousePos);self.dispatchEvent(evt)}};var mouseOutHandler=function(){if(isThumbDrag){return}if(self.xFocusLine){self.xFocusLine.attr("visibility","hidden")}if(self.yFocusLine){self.yFocusLine.attr("visibility","hidden")}if(toolTipTrigger==="xAxis"||toolTipTrigger==="yAxis"){var evt=EventUtil.createCustomEvent(BaseEvent.HIDE_TOOL_TIP,true,true);self.dispatchEvent(evt)}};this.legendItemClickHandler=function(event){event.stopImmediatePropagation();visibleItemsChanged=true;var data=self.data();if(data&&data.hasOwnProperty("series")){if(self.axis()){barLayoutUpdate();self.axis().update()}}var children=self.children();for(var child,i=0,len=children.length;i<len;i++){child=children[i];if(ClassFactory.instanceofChart(child)){child.update()}}};this.showToolTipHandler=function(event){event.stopImmediatePropagation();if(self.toolTip()&&self.data().toolTip&&self.data().toolTip.labelFormat){self.toolTip().node().style.display="block";chartNode=self.mainContainer().node();chartRect=chartNode.getBoundingClientRect();svgRect=self.ownerSVG().mainContainer().node().getBoundingClientRect()}};this.updateToolTipHandler=function(event){event.stopImmediatePropagation();if(!self.toolTip()){return}var toolTipConfig=self.data().toolTip;if(!toolTipConfig){return}if(!toolTipConfig.labelFormat){return}var mousePos,str="",node=self.toolTip().node(),style=node.style;if(event.detail&&(!event.detail.data||!event.detail.target)){var axisHotArea=(self.axisHotArea&&self.axisHotArea.node())?self.axisHotArea.node():self.node(),box=axisHotArea.getBBox(),mousePos=d3.mouse(axisHotArea);str+=self.getToolTipStr(toolTipConfig,mousePos[0],mousePos[1],undefined,event.detail)+"\n"}else{mousePos=event.detail.data;str+=self.getToolTipStr(toolTipConfig,mousePos[0],mousePos[1],mousePos.length>2?mousePos[2]:undefined)+"\n"}if(str===""||str===null){style.display="none";SvgUtil.removeAllChildren(node)}else{node.innerHTML=str;style.display="block";var topW=self.ownerSVG().parentWidth(),topH=self.ownerSVG().parentHeight(),padding=firstHorAxis?firstHorAxis.padding():null;x=mousePos[0]+(padding?padding.left:0)+10;y=mousePos[1]+(padding?padding.top:0)+20;if(x+node.clientWidth>topW){x=topW-node.clientWidth}if(y+node.clientHeight>topH){y=topH-node.clientHeight}x+=chartRect.left+chartNode.scrollLeft-svgRect.left;y+=chartRect.top+chartNode.scrollTop-svgRect.top;style.left=x+"px";style.top=y+"px"}};this.hideToolTipHandler=function(event){event.stopImmediatePropagation();if(self.toolTip()){self.toolTip().node().style.display="none"}};var parseConfig=function(){isShowHSlider=_data.hSlider&&_data.hSlider.visible;isShowXFocusLine=_data.xFocusLine&&_data.xFocusLine.visible;isShowYFocusLine=_data.yFocusLine&&_data.yFocusLine.visible;isShowXSplitLine=_data.xSplitLine&&_data.xSplitLine.visible;isShowYSplitLine=_data.ySplitLine&&_data.ySplitLine.visible;xFocusLineConfig=isShowXFocusLine?createConfig({visible:true,style:{stroke:"red",pointerEvents:"none"}},_data.xFocusLine):null;yFocusLineConfig=isShowYFocusLine?createConfig({visible:true,style:{stroke:"red",pointerEvents:"none"}},_data.yFocusLine):null;xSplitLineConfig=isShowXSplitLine?createConfig({visible:true,style:{stroke:"#d13438",pointerEvents:"none"}},_data.xSplitLine):null;ySplitLineConfig=isShowYSplitLine?createConfig({visible:true,style:{stroke:"#d13438",pointerEvents:"none"}},_data.ySplitLine):null;if(_data.toolTip&&_data.toolTip.trigger){toolTipTrigger=_data.toolTip.trigger}else{toolTipTrigger=null}};var createConfig=function(defaultConfig,config){if(!defaultConfig||!config){return null}for(var k in config){if(k==="style"){for(var m in config.style){if(!defaultConfig.style){defaultConfig.style={}}defaultConfig.style[m]=config.style[m]}}else{defaultConfig[k]=config[k]}}return defaultConfig};var updateStyle=function(group,styleConfig){if(!group.node()||!styleConfig){return}var obj;group.each(function(){obj=this;for(var k in styleConfig){obj.style[k]=styleConfig[k]}})};var updateAttr=function(group,attrConfig){if(!group.node()||!attrConfig){return}for(var k in attrConfig){group.attr(k,attrConfig[k])}};var isInsideHotArea=function(x,y,box){if(arguments.length===0){var axisHotArea=self.axisHotArea.node(),box=axisHotArea.getBBox(),mousePos=d3.mouse(axisHotArea),x=mousePos[0],y=mousePos[1]}return !(x<0||x>box.width||y<0||y>box.height)};var getItemByX=function(x,data){var d,leftItem,rightItem,item;for(var i=0,len=data.length;i<len;i++){d=data[i];if(x>d.x){if(!leftItem){leftItem=d}else{if(leftItem.x<d.x){leftItem=d}}}else{if(x<d.x){if(!rightItem){rightItem=d}else{if(rightItem.x>d.x){rightItem=d}}}}}if(leftItem&&rightItem){item=x<leftItem.x+(rightItem.x-leftItem.x)/2?leftItem:rightItem}else{if(leftItem&&!rightItem){item=leftItem}else{if(!leftItem&&rightItem){item=rightItem}else{item=null}}}return item};var getItemByY=function(y,data){var d,topItem,bottomItem,item;for(var i=0,len=data.length;i<len;i++){d=data[i];if(y>d.y){if(!topItem){topItem=d}else{if(topItem.y<d.y){topItem=d}}}else{if(y<d.y){if(!bottomItem){bottomItem=d}else{if(bottomItem.y>d.y){bottomItem=d}}}}}if(topItem&&bottomItem){item=y<topItem.y+(bottomItem.y-topItem.y)/2?topItem:bottomItem}else{if(topItem&&!bottomItem){item=topItem}else{if(!topItem&&bottomItem){item=bottomItem}else{item=null}}}return item};var getItemsByX=function(x,data){var item=getItemByX(x,data),items=[];if(item){var resultX=item.x;for(var i=0,len=data.length;i<len;i++){d=data[i];if(resultX===d.x){items.push(d)}}}return items};var getItemsByY=function(y,data){var item=getItemByY(y,data),items=[];if(item){var resultY=item.y;for(var i=0,len=data.length;i<len;i++){d=data[i];if(resultY===d.y){items.push(d)}}}return items};var updateAgainInBarChart=function(){if(self.isUpdateAxisAgain&&self.axis()){var children=self.children();if(children!==null&&children.length>0){for(var i=0,len=children.length;i<len;i++){children[i].update()}}self.isUpdateAxisAgain=false}};var barLayoutUpdate=function(){const BarLayout=ghca_charts.layout.barLayout;var children=self.children();for(var seriesChart,layout,layoutData,i=0,len=children.length;i<len;i++){seriesChart=children[i];layout=seriesChart.layout();layoutData=seriesChart.data().layout;if(layout instanceof BarLayout&&layoutData){layout.update()}}};var renderAxisHotAreaContainer=function(){if(!self.axis()){return}if(!self.axisHotAreaContainer){self.axisHotAreaContainer=self.mainContainer().append("g").attr("class","axis-hotArea-container")}if(!self.axisHotArea){self.axisHotArea=self.axisHotAreaContainer.append("rect").attr("class","axis-hotArea").attr("fill","white").attr("opacity",0)}var rect=self.axis().getAxisContentArea();self.axisHotArea.attr("width",rect.w).attr("height",rect.h);self.axisHotAreaContainer.attr("transform","translate("+rect.x+","+rect.y+")")};var isShowXSplitLine=false,isShowYSplitLine=false,xSplitLineConfig=null,ySplitLineConfig=null;var renderSplitLineContainer=function(){if(!self.axis()||(!isShowXSplitLine&&!isShowYSplitLine)){return}if(!self.splitContainer){self.splitContainer=self.mainContainer().append("g").attr("class","split-container")}if(!self.splitHotArea){self.splitHotArea=self.splitContainer.append("rect").attr("class","split-container-hotArea").attr("pointer-events","none").attr("fill","blue").attr("visibility","hidden")}var rect=self.axis().getAxisContentArea();self.splitHotArea.attr("width",rect.w).attr("height",rect.h);if(isShowXSplitLine){var filter=_data.xSplitLine.filter;var axis=self.axis();var horAxises=axis?axis.horAxises():null;self.splitContainer.selectAll("line.x-split-line").remove();if(filter&&horAxises&&horAxises.length>0){var horAxis=horAxises[0];var xScale=horAxis.scaleIns();var domain=horAxis.domain();var splitData=filter(domain);self.splitContainer.selectAll("line.x-split-line").data(splitData).enter().append("line").attr("class","x-split-line").attr("x1",function(d){return xScale(d)+0.5}).attr("x2",function(d){return xScale(d)+0.5}).attr("y1",0).attr("y2",rect.h)}self.splitContainer.selectAll("line.x-split-line").each(function(d){updateStyle(d3.select(this),xSplitLineConfig.style);updateAttr(d3.select(this),xSplitLineConfig.attr)})}if(isShowYSplitLine){var filter=_data.ySplitLine.filter;var axis=self.axis();var verAxises=axis?axis.verAxises():null;self.splitContainer.selectAll("line.y-split-line").remove();if(filter&&verAxises&&verAxises.length>0){var verAxis=verAxises[0];var yScale=verAxis.scaleIns();var domain=verAxis.domain();var splitData=filter(domain);self.splitContainer.selectAll("line.y-split-line").data(splitData).enter().append("line").attr("class","y-split-line").attr("y1",function(d){return yScale(d)+0.5}).attr("y2",function(d){return yScale(d)+0.5}).attr("x1",0).attr("x2",rect.w)}self.splitContainer.selectAll("line.y-split-line").each(function(d){updateStyle(d3.select(this),ySplitLineConfig.style);updateAttr(d3.select(this),ySplitLineConfig.attr)})}self.splitContainer.attr("transform","translate("+rect.x+","+rect.y+")")};var toolTipTrigger=null,isShowHSlider=false,isShowXFocusLine=false,isShowYFocusLine=false,xFocusLineConfig=null,yFocusLineConfig=null;var renderFocusLineContainer=function(){if(!self.axis()||(!isShowXFocusLine&&!isShowYFocusLine&&!toolTipTrigger)){return}if(!self.focusContainer){self.focusContainer=self.mainContainer().append("g").attr("class","focus-container")}if(isShowXFocusLine&&!self.xFocusLine){self.xFocusLine=self.focusContainer.append("line").attr("class","x-focus-line").attr("visibility","hidden")}if(isShowXFocusLine&&self.xFocusLine){updateStyle(self.xFocusLine,xFocusLineConfig.style);updateAttr(self.xFocusLine,xFocusLineConfig.attr)}if(isShowYFocusLine&&!self.yFocusLine){self.yFocusLine=self.focusContainer.append("line").attr("class","y-focus-line").attr("visibility","hidden")}if(isShowYFocusLine&&self.yFocusLine){updateStyle(self.yFocusLine,yFocusLineConfig.style);updateAttr(self.yFocusLine,yFocusLineConfig.attr)}var rect=self.axis().getAxisContentArea();self.focusContainer.attr("transform","translate("+rect.x+","+rect.y+")");var box=self.axisHotArea.node().getBBox();if(self.xFocusLine){self.xFocusLine.attr("y1",0).attr("y2",box.height)}if(self.yFocusLine){self.yFocusLine.attr("x1",0).attr("x2",box.width)}};var minThumbsGap=8;var thumbsGap=minThumbsGap;var thumbWidth=6;var thumbHeight=34;var thumbBoundRect=null;var thumbX=-thumbWidth;var thumbY=0;var tempThumbX=0;var thumbStartX=0;var thumbRadius=4.5;var symbolPadding=1.5;var leftThumbX=0;var leftTempThumbX=0;var leftThumbStartX=0;var rightThumbX=0;var rightTempThumbX=0;var rightThumbStartX=0;var isThumbDrag=false;var isLeftThumbDrag=false;var isRightThumbDrag=false;var isLeftThumbOver=false;var isRightThumbOver=false;var xScale=null;var renderHSliderContainer=function(){isShowHSlider=_data.hSlider&&_data.hSlider.visible;if(!isShowHSlider){if(self.hSliderContainer){self.hSliderContainer.attr("visibility","hidden")}return}var horAxis,horAxises=self.axis().horAxises();if(horAxises&&horAxises.length>0){horAxis=horAxises[0];xScale=horAxis.scaleIns();isHorAxisTime=horAxis.type()==="time"}var rect=self.axis().getAxisContentArea();thumbY=(rect.h-thumbHeight)/2;if(!self.hSliderContainer){self.hSliderContainer=self.mainContainer().append("g").attr("class","hSlider-container")}self.hSliderContainer.attr("visibility","visible");if(!self.hSliderHotArea){self.hSliderHotArea=self.hSliderContainer.append("rect").attr("class","hSlider-container-hotArea").attr("fill","blue").attr("visibility","hidden").attr("pointer-events","none")}if(!self.hSliderThumb){self.hSliderThumb=self.hSliderContainer.append("g").attr("class","hSlider-thumb-container")}if(!self.hSliderThumbGapBg){self.hSliderThumbGapBg=self.hSliderThumb.append("rect").attr("class","hSlider-thumb-gap-bg").attr("pointer-events","none")}if(!self.hSliderThumbBg){self.hSliderThumbBg=self.hSliderThumb.append("rect").attr("class","hSlider-thumb-bg")}if(!self.hSliderLeftThumb){self.hSliderLeftThumb=self.hSliderThumb.append("g").attr("class","hSlider-left-thumb-container")}if(!self.hSliderLeftThumbBg){self.hSliderLeftThumbBg=self.hSliderLeftThumb.append("path").attr("class","hSlider-left-thumb-bg")}if(!self.hSliderLeftThumbTopBg){self.hSliderLeftThumbTopBg=self.hSliderLeftThumb.append("path").attr("class","hSlider-left-thumb-top-bg")}if(!self.hSliderLeftThumbBottomBg){self.hSliderLeftThumbBottomBg=self.hSliderLeftThumb.append("path").attr("class","hSlider-left-thumb-bottom-bg")}if(!self.hSliderRightThumb){self.hSliderRightThumb=self.hSliderThumb.append("g").attr("class","hSlider-right-thumb-container")}if(!self.hSliderRightThumbBg){self.hSliderRightThumbBg=self.hSliderRightThumb.append("path").attr("class","hSlider-right-thumb-bg")}if(!self.hSliderRightThumbTopBg){self.hSliderRightThumbTopBg=self.hSliderRightThumb.append("path").attr("class","hSlider-right-thumb-top-bg")}if(!self.hSliderRightThumbBottomBg){self.hSliderRightThumbBottomBg=self.hSliderRightThumb.append("path").attr("class","hSlider-right-thumb-bottom-bg")}if(!self.hSliderThumbToolTip){self.hSliderThumbToolTip=self.hSliderContainer.append("g").attr("class","hSlider-thumb-toolTip-container")}var thumbToolTipStyle=_data.hSlider.thumbToolTip?_data.hSlider.thumbToolTip.style:{"font-size":"12"};if(!self.hSliderLeftThumbToolTip){self.hSliderLeftThumbToolTip=self.hSliderThumbToolTip.append("text").attr("class","hSlider-left-thumb-toolTip")}ElementUtil.setElementStyles(self.hSliderLeftThumbToolTip,thumbToolTipStyle);if(!self.hSliderRightThumbToolTip){self.hSliderRightThumbToolTip=self.hSliderThumbToolTip.append("text").attr("class","hSlider-right-thumb-toolTip")}ElementUtil.setElementStyles(self.hSliderRightThumbToolTip,thumbToolTipStyle);self.hSliderHotArea.attr("width",rect.w).attr("height",rect.h);self.hSliderContainer.attr("transform","translate("+rect.x+","+rect.y+")");self.hSliderLeftThumbBg.attr("d","M"+thumbWidth+" "+0+" L"+thumbWidth+" "+thumbHeight+" C"+(thumbWidth/2)+" "+thumbHeight+", "+0+" "+(thumbHeight-thumbRadius)+", "+0+" "+(thumbHeight-thumbRadius*2)+" L"+0+" "+thumbRadius*2+" C"+0+" "+thumbRadius+", "+(thumbWidth/2)+" "+0+", "+thumbWidth+" "+0).attr("fill","#666");self.hSliderLeftThumbTopBg.attr("d","M"+(thumbWidth-symbolPadding)+" "+symbolPadding+" L"+(thumbWidth-symbolPadding)+" "+thumbRadius*2+" L"+symbolPadding+" "+thumbRadius*2+" C"+symbolPadding+" "+thumbRadius+", "+(symbolPadding+thumbRadius)+" "+symbolPadding+", "+(thumbWidth-symbolPadding)+" "+symbolPadding).attr("fill","#eee");self.hSliderLeftThumbBottomBg.attr("d","M"+symbolPadding+" "+(thumbHeight-thumbRadius*2)+" L"+(thumbWidth-symbolPadding)+" "+(thumbHeight-thumbRadius*2)+" L"+(thumbWidth-symbolPadding)+" "+(thumbHeight-symbolPadding)+" C"+thumbRadius+" "+(thumbHeight-symbolPadding)+", "+symbolPadding+" "+(thumbHeight-symbolPadding-thumbRadius)+", "+symbolPadding+" "+(thumbHeight-thumbRadius*2)).attr("fill","#eee");self.hSliderLeftThumb.attr("transform","translate("+0+","+thumbY+")");self.hSliderRightThumbBg.attr("d","M"+0+" "+0+" L"+0+" "+thumbHeight+" C"+(thumbWidth/2)+" "+thumbHeight+", "+thumbWidth+" "+(thumbHeight-thumbRadius)+", "+thumbWidth+" "+(thumbHeight-thumbRadius*2)+" L"+thumbWidth+" "+thumbRadius*2+" C"+thumbWidth+" "+thumbRadius+", "+(thumbWidth/2)+" "+0+", "+0+" "+0).attr("fill","#666");self.hSliderRightThumbTopBg.attr("d","M"+symbolPadding+" "+symbolPadding+" L"+symbolPadding+" "+thumbRadius*2+" L"+(thumbWidth-symbolPadding)+" "+thumbRadius*2+" C"+(thumbWidth-symbolPadding)+" "+thumbRadius+", "+symbolPadding+" "+symbolPadding+", "+symbolPadding+" "+symbolPadding).attr("fill","#eee");self.hSliderRightThumbBottomBg.attr("d","M"+(thumbWidth-symbolPadding)+" "+(thumbHeight-thumbRadius*2)+" L"+symbolPadding+" "+(thumbHeight-thumbRadius*2)+" L"+symbolPadding+" "+(thumbHeight-symbolPadding)+" C"+symbolPadding+" "+(thumbHeight-symbolPadding)+", "+thumbRadius+" "+(thumbHeight-symbolPadding-thumbRadius)+", "+(thumbWidth-symbolPadding)+" "+(thumbHeight-thumbRadius*2)).attr("fill","#eee");self.hSliderRightThumb.attr("transform","translate("+(thumbWidth+thumbsGap)+","+thumbY+")");self.hSliderThumbGapBg.attr("width",thumbsGap).attr("height",rect.h).attr("fill","rgba(0, 0, 0, 0.1)").attr("transform","translate("+thumbWidth+","+0+")");self.hSliderThumbBg.attr("width",thumbWidth*2+thumbsGap).attr("height",rect.h).attr("fill","#ff0000").attr("opacity",0);self.hSliderThumb.attr("transform","translate("+(-thumbWidth)+","+0+")");refreshThumbsTooltip(thumbX);addHSliderListeners()};var thumb_dragStartHandler=function(){mouseOutHandler();isThumbDrag=true;thumbBoundRect=self.axis().getAxisContentArea();var mousePos=d3.mouse(self.hSliderHotArea.node());thumbStartX=mousePos[0]};var thumb_dragHandler=function(){var mousePos=d3.mouse(self.hSliderHotArea.node());var minX=-thumbWidth;var maxX=thumbBoundRect.w-thumbsGap-thumbWidth;tempThumbX=(mousePos[0]-thumbStartX)+thumbX;if(tempThumbX<minX){tempThumbX=minX}if(tempThumbX>maxX){tempThumbX=maxX}self.hSliderThumb.attr("transform","translate("+tempThumbX+","+0+")");refreshThumbsTooltip(tempThumbX)};var thumb_dragEndHandler=function(){isThumbDrag=false;thumbX=tempThumbX;refreshThumbsTooltip(tempThumbX)};var leftThumb_dragStartHandler=function(){mouseOutHandler();leftThumb_mouseOverHandler();isThumbDrag=true;isLeftThumbDrag=true;var mousePos=d3.mouse(self.hSliderHotArea.node());leftThumbStartX=mousePos[0];leftThumbX=thumbX;leftTempThumbX=leftThumbX;self.hSliderLeftThumb.attr("transform","translate("+leftThumbX+","+thumbY+")");var lThumb=self.hSliderLeftThumb.node();var hSlider=self.hSliderContainer.node();hSlider.appendChild(lThumb)};var leftThumb_dragHandler=function(){var mousePos=d3.mouse(self.hSliderHotArea.node());var box=self.hSliderThumb.node().getBBox();var minX=-thumbWidth;var maxX=thumbX+box.width-minThumbsGap-thumbWidth*2;leftTempThumbX=(mousePos[0]-leftThumbStartX)+leftThumbX;if(leftTempThumbX<minX){leftTempThumbX=minX}if(leftTempThumbX>maxX){leftTempThumbX=maxX}self.hSliderLeftThumb.attr("transform","translate("+leftTempThumbX+","+thumbY+")");refreshLeftThumbTooltip(leftTempThumbX);var thumbBgWidth=thumbX-leftTempThumbX+box.width;self.hSliderThumbGapBg.attr("width",thumbBgWidth-thumbWidth*2);self.hSliderThumbBg.attr("width",thumbBgWidth);thumbX=leftTempThumbX;self.hSliderThumb.attr("transform","translate("+thumbX+","+0+")");rightThumbX=thumbBgWidth-thumbWidth;self.hSliderRightThumb.attr("transform","translate("+rightThumbX+","+thumbY+")")};var leftThumb_dragEndHandler=function(){isThumbDrag=false;isLeftThumbDrag=false;var box=self.hSliderThumb.node().getBBox();var thumbBgWidth=thumbX-leftTempThumbX+box.width;self.hSliderThumbGapBg.attr("width",thumbBgWidth-thumbWidth*2);self.hSliderThumbBg.attr("width",thumbBgWidth);thumbX=leftTempThumbX;self.hSliderThumb.attr("transform","translate("+thumbX+","+0+")");leftThumbX=0;self.hSliderLeftThumb.attr("transform","translate("+leftThumbX+","+thumbY+")");rightThumbX=thumbBgWidth-thumbWidth;self.hSliderRightThumb.attr("transform","translate("+rightThumbX+","+thumbY+")");thumbsGap=thumbBgWidth-thumbWidth*2;var lThumb=self.hSliderLeftThumb.node();var thumb=self.hSliderThumb.node();thumb.appendChild(lThumb);refreshLeftThumbTooltip(leftTempThumbX);leftThumb_mouseOutHandler()};var rightThumb_dragStartHandler=function(){mouseOutHandler();rightThumb_mouseOverHandler();isThumbDrag=true;isRightThumbDrag=true;var mousePos=d3.mouse(self.hSliderHotArea.node());rightThumbStartX=mousePos[0];rightThumbX=thumbX+thumbWidth+thumbsGap;rightTempThumbX=rightThumbX;self.hSliderRightThumb.attr("transform","translate("+rightThumbX+","+thumbY+")");var rThumb=self.hSliderRightThumb.node();var hSlider=self.hSliderContainer.node();hSlider.appendChild(rThumb)};var rightThumb_dragHandler=function(){var mousePos=d3.mouse(self.hSliderHotArea.node());var box=self.hSliderHotArea.node().getBBox();var minX=thumbX+thumbWidth+minThumbsGap;var maxX=box.width;rightTempThumbX=(mousePos[0]-rightThumbStartX)+rightThumbX;if(rightTempThumbX<minX){rightTempThumbX=minX}if(rightTempThumbX>maxX){rightTempThumbX=maxX}self.hSliderRightThumb.attr("transform","translate("+rightTempThumbX+","+thumbY+")");refreshRightThumbTooltip(rightTempThumbX);var thumbBgWidth=rightTempThumbX-thumbX+thumbWidth;self.hSliderThumbGapBg.attr("width",thumbBgWidth-thumbWidth*2);self.hSliderThumbBg.attr("width",thumbBgWidth)};var rightThumb_dragEndHandler=function(){isThumbDrag=false;isRightThumbDrag=false;var thumbBgWidth=rightTempThumbX-thumbX+thumbWidth;self.hSliderThumbGapBg.attr("width",thumbBgWidth-thumbWidth*2);self.hSliderThumbBg.attr("width",thumbBgWidth);rightThumbX=thumbBgWidth-thumbWidth;self.hSliderRightThumb.attr("transform","translate("+rightThumbX+","+thumbY+")");thumbsGap=thumbBgWidth-thumbWidth*2;var rThumb=self.hSliderRightThumb.node();var thumb=self.hSliderThumb.node();thumb.appendChild(rThumb);refreshRightThumbTooltip(rightTempThumbX);rightThumb_mouseOutHandler()};var leftThumb_mouseOverHandler=function(){isLeftThumbOver=true;if(!isLeftThumbDrag){self.hSliderLeftThumbBg.transition().attr("fill","#43b4e1").attr("stroke","#6cc8ee")}};var leftThumb_mouseOutHandler=function(){isLeftThumbOver=false;if(!isLeftThumbDrag&&!isLeftThumbOver){self.hSliderLeftThumbBg.transition().attr("fill","#666").attr("stroke","#666")}};var rightThumb_mouseOverHandler=function(){isRightThumbOver=true;if(!isRightThumbDrag){self.hSliderRightThumbBg.transition().attr("fill","#43b4e1").attr("stroke","#6cc8ee")}};var rightThumb_mouseOutHandler=function(){isRightThumbOver=false;if(!isRightThumbDrag&&!isRightThumbOver){self.hSliderRightThumbBg.transition().attr("fill","#666").attr("stroke","#666")}};var thumbBg_mouseOverHandler=function(){thumbBoundRect=self.axis().getAxisContentArea()};var thumbBg_mouseMoveHandler=function(){var mousePos=d3.mouse(self.hSliderHotArea.node());var x=mousePos[0];if(x<0||x-thumbBoundRect.w>0){mouseOutHandler()}else{mouseOverHandler();mouseMoveHandler()}};var thumbBg_mouseOutHandler=function(){mouseOutHandler()};var addHSliderListeners=function(){if(!isShowHSlider){return}self.hSliderThumbBg.on("mouseover.focus",thumbBg_mouseOverHandler);self.hSliderThumbBg.on("mousemove.focus",thumbBg_mouseMoveHandler);self.hSliderThumbBg.on("mouseout.focus",thumbBg_mouseOutHandler);self.hSliderThumb.call(d3.drag().on("start.thumb",thumb_dragStartHandler).on("drag.thumb",thumb_dragHandler).on("end.thumb",thumb_dragEndHandler));self.hSliderLeftThumb.call(d3.drag().on("start.leftThumb",leftThumb_dragStartHandler).on("drag.leftThumb",leftThumb_dragHandler).on("end.leftThumb",leftThumb_dragEndHandler));self.hSliderRightThumb.call(d3.drag().on("start.leftThumb",rightThumb_dragStartHandler).on("drag.leftThumb",rightThumb_dragHandler).on("end.leftThumb",rightThumb_dragEndHandler));self.hSliderLeftThumb.on("mouseover.leftThumb",leftThumb_mouseOverHandler);self.hSliderLeftThumb.on("mouseout.leftThumb",leftThumb_mouseOutHandler);self.hSliderRightThumb.on("mouseover.rightThumb",rightThumb_mouseOverHandler);self.hSliderRightThumb.on("mouseout.rightThumb",rightThumb_mouseOutHandler)};var refreshThumbsTooltip=function(x){if(!xScale){return}var horAxis,horAxises=self.axis().horAxises();if(horAxises&&horAxises.length>0){horAxis=horAxises[0];isHorAxisTime=horAxis.type()==="time"}var leftX=x+thumbWidth;var rightX=leftX+thumbsGap;var leftText=xScale.invert(leftX);var rightText=xScale.invert(rightX);var lt=self.hSliderLeftThumbToolTip.text(isHorAxisTime?formatDateTime(leftText):leftText);var rt=self.hSliderRightThumbToolTip.text(isHorAxisTime?formatDateTime(rightText):rightText);var ltBox=lt.node().getBBox();var ty=-5;lt.attr("transform","translate("+(leftX-ltBox.width)+","+ty+")");rt.attr("transform","translate("+(rightX)+","+ty+")")};var refreshLeftThumbTooltip=function(x){if(!xScale){return}var leftX=x+thumbWidth;var leftText=xScale.invert(leftX);var lt=self.hSliderLeftThumbToolTip.text(isHorAxisTime?formatDateTime(leftText):leftText);var ltBox=lt.node().getBBox();var ty=-5;lt.attr("transform","translate("+(leftX-ltBox.width)+","+ty+")")};var refreshRightThumbTooltip=function(x){if(!xScale){return}var rightX=x;var rightText=xScale.invert(rightX);var rt=self.hSliderRightThumbToolTip.text(isHorAxisTime?formatDateTime(rightText):rightText);var ty=-5;rt.attr("transform","translate("+rightX+","+ty+")")};var getNearValueIndex=function(v,ary){var len=ary.length;if(len===0){return -1}if(len===1){return 0}var min=ary[0],max=ary[len-1];if(v<=min){return 0}if(v>=max){return len-1}len--;for(var n,next,i=0;i<len;i++){n=ary[i];next=ary[i+1];if(v===n){return i}else{if(v>n&&v<next){return(v-n)<(next-v)?i:i+1}}}return -1};Chart.clazzName="Chart"};Chart.struct=function(ghca_charts){var BaseComponent=ghca_charts.view.component.baseComponent;BaseComponent.struct(ghca_charts);Chart.prototype=Object.create(BaseComponent.prototype);Chart.prototype.constructor=Chart};Chart.BG_Z_INDEX=0;Chart.AXIS_Z_INDEX=1;Chart.AXIS_HOTAREA_CONTAINER_Z_INDEX=2;Chart.CHART_MIN_Z_INDEX=10;Chart.CHART_MAX_Z_INDEX=1000;Chart.FOCUS_CONTAINER_Z_INDEX=1100;Chart.SPLIT_CONTAINER_Z_INDEX=1110;Chart.HSLIDER_CONTAINER_Z_INDEX=1120;Chart.LEGEND_Z_INDEX=1200;Chart.HEADING_Z_INDEX=1900;Chart.BORDER_CONTAINER_Z_INDEX=2000;module.exports=Chart}.call(exports,__webpack_require__(2)))},function(module,exports,__webpack_require__){(function(d3){var Heading=function(_parent,_config,_headingConfig){const ColorUtil=ghca_charts.view.util.colorUtil;const ObjectUtil=ghca_charts.view.util.objectUtil;const StringUtil=ghca_charts.view.util.stringUtil;const RegexUtil=ghca_charts.view.util.regexUtil;if(arguments.length<1){throw new Error("传入参数个数错误,当前个数"+arguments.length+",应至少传入1个参数")}if(!_config||!_headingConfig){return}var self=this,mainTextIns,subTextIns;var xPos="left";this.xPos=function(value){if(!arguments.length){return xPos}xPos=value;return this};var yPos="top";this.yPos=function(value){if(!arguments.length){return yPos}yPos=value;return this};var mainText={text:"","font-size":16,"font-family":"Microsoft YaHei",fill:"black","pointer-events":"none"};this.mainText=function(value){if(!arguments.length){return mainText}mainText=value;return this};var subText={text:"","font-size":12,"font-family":"Microsoft YaHei",fill:"black","pointer-events":"none"};this.subText=function(value){if(!arguments.length){return subText}subText=value;return this};var padding={left:10,right:10,top:10,bottom:10};this.padding=function(value){if(!arguments.length){return padding}padding=value;return this};var itemGap=10;this.itemGap=function(value){if(!arguments.length){return itemGap}itemGap=value;return this};var visible=true;this.visible=function(value){if(!arguments.length){return visible}visible=value;return this};var config=_config;this.config=function(value){if(!arguments.length){return config}config=value;return this};var init=function(){if(!_parent){throw new Error("Heading构造方法中传入的容器_ele:"+_ele+"无法找到。")}self.parent=_parent;self.itemsList=[]};var initAllContainers=function(){if(self.visible()&&!self.headingContainer){self.headingContainer=self.parent.mainContainer().append("g").attr("class","heading")}else{if(!self.visible()&&self.headingContainer){self.headingContainer.remove();self.headingContainer=null;mainTextIns=null;subTextIns=null;self.itemsList.length=0}}};this.refreshData=function(){var heading=_headingConfig;self.xPos(heading.hasOwnProperty("xPos")?heading.xPos:xPos);self.yPos(heading.hasOwnProperty("yPos")?heading.yPos:yPos);self.visible(heading.hasOwnProperty("visible")?heading.visible:visible);if(heading.hasOwnProperty("padding")){var configPadding=heading.padding;var defaultPadding=self.padding();if(!isNaN(configPadding)){defaultPadding.left=configPadding;defaultPadding.right=configPadding;defaultPadding.top=configPadding;defaultPadding.bottom=configPadding}else{for(var key in configPadding){defaultPadding[key]=configPadding[key]}}}else{self.padding(padding)}self.itemGap(heading.hasOwnProperty("itemGap")?heading.itemGap:itemGap);if(heading.hasOwnProperty("mainText")){var defaultMainText=self.mainText();var configText=heading.mainText;for(var key in configText){defaultMainText[key]=configText[key]}}if(heading.hasOwnProperty("subText")){var defaultSubText=self.subText();var configSubText=heading.subText;for(var key in configSubText){defaultSubText[key]=configSubText[key]}}};this.mainTextRender=function(){var p=self.mainText();if(!self.visible()||p.visible===false){return}if(!mainTextIns){var itemCon=self.headingContainer.append("g").attr("class","mainText-container");mainTextIns=itemCon.append("text").attr("class","mainText");self.itemsList.push(itemCon)}var content=self.getResultLabel(p.text,self.config().series[0].data);mainTextIns.text(content);StringUtil.fixTextSpace(mainTextIns.node());for(var key in p){if(key!=="visible"){mainTextIns.attr(key,p[key])}}};this.subTextRender=function(){var p=self.subText();if(!self.visible()||p.visible===false){return}if(!subTextIns){var itemCon=self.headingContainer.append("g").attr("class","subText-container");subTextIns=itemCon.append("text").attr("class","subText");self.itemsList.push(itemCon)}var content=self.getResultLabel(p.text,self.config().series[0].data);subTextIns.text(content);StringUtil.fixTextSpace(subTextIns.node());for(var key in p){if(key!=="visible"){subTextIns.attr(key,p[key])}}};this.resetLayout=function(isUpdate){if(!self.headingContainer||(!mainTextIns&&!subTextIns)){return}var padding=self.padding(),itemX=0,itemY=0,itemGap=self.itemGap(),maxItemW=0,maxItemH=0,xPos=self.xPos(),yPos=self.yPos(),parentBox=self.parent.bgNode().getBBox();parentW=parentBox.width,parentH=parentBox.height,layoutW=parentW-padding.left-padding.right;layoutH=parentH-padding.top-padding.bottom;itemIns=null,itemBox=null;var itemsY=[];for(var i=0,len=self.itemsList.length;i<len;i++){itemIns=self.itemsList[i];itemBox=itemIns.node().getBBox();itemY+=itemBox.height;maxItemW=itemBox.width>maxItemW?itemBox.width:maxItemW;if(itemY+itemGap<=layoutH){itemIns.attr("transform","translate("+itemX+","+itemY+")")}else{itemX+=(maxItemW+itemGap);itemY=0;maxItemW=0;itemIns.attr("transform","translate("+itemX+","+itemY+")")}itemsY.push(itemY);itemY+=itemGap}var x=0,y=0,headingBox=self.headingContainer.node().getBBox(),headingW=headingBox.width,headingH=headingBox.height;if(!isNaN(xPos)){x=xPos}else{if(xPos==="left"){x=padding.left}else{if(xPos==="right"){x=parentW-headingW-padding.right}else{x=(parentW-headingW)/2;for(var i=0,len=self.itemsList.length;i<len;i++){itemIns=self.itemsList[i];itemBox=itemIns.node().getBBox();itemX=(headingW-itemBox.width)/2;itemIns.attr("transform","translate("+itemX+","+itemsY[i]+")")}}}}if(!isNaN(yPos)){y=yPos}else{if(yPos==="middle"){y=(parentH-headingH)/2}else{if(yPos==="bottom"){y=parentH-headingH-padding.bottom}else{y=padding.top}}}if(isUpdate){self.headingContainer.attr("transform","translate("+x+","+y+")scale(1)")}else{self.headingContainer.attr("transform-origin","center center").attr("transform","translate("+x+","+y+")scale(0.1)").attr("opacity",0).transition().duration(700).ease(d3.easeExpIn).attr("opacity",1).attr("transform","translate("+x+","+y+")scale(1)")}};this.render=function(){self.refreshData();initAllContainers();self.mainTextRender();self.subTextRender();self.resetLayout()};this.update=function(){self.refreshData();initAllContainers();self.mainTextRender();self.subTextRender();self.resetLayout(true)};this.getResultLabel=function(label,data){if(label===null||label===undefined){return""}if(ObjectUtil.isNumber(label)){label=label.toString()}return label.replace(RegexUtil.jsRegex,function(){return arguments.length>1?eval(arguments[1]):""})};this.toString=function(){return("Heading info: \n   xPos:"+self.xPos()+"\n   yPos:"+self.yPos())};init()};Heading.struct=function(ghca_charts){Heading.prototype.constructor=Heading};module.exports=Heading}.call(exports,__webpack_require__(2)))},function(e,c,f){(function(i){var g=function(n,l){const m=ghca_charts.view.component.charts.baseAxis;m.apply(this,arguments);var j=this,k=j.renderAxis;j.position("bottom");this.toString=function(){};this.renderAxis=function(){k();var B,o,u,r,C,q,p,s=j.domain(),v=j.type(),z=j.padding();if(v==="time"){B=i.scaleTime().clamp(true)}else{if(v==="enum"){B=i.scaleBand()}else{B=i.scaleLinear().clamp(true)}}u=j.parentChart().bgNode().getBBox();r=u.width;C=u.height;axisW=r-z.left-z.right;q=z.left;B.domain(s).range([0,axisW]);if(j.position()==="top"){o=i.axisTop(B);p=z.top}else{o=i.axisBottom(B);p=C-z.bottom}j.x(q);j.y(p);j.width(axisW);var t=j.tick();for(var A in t){if(o.hasOwnProperty(A)){o[A](t[A])}}if(!j.axisContainer){j.axisContainer=j.parent.append("g").attr("class","xAxis")}j.axisContainer.style("visibility",j.visible()===false?"hidden":"visible").call(o).attr("transform","translate("+q+","+p+")");j.scaleIns(B);j.axisIns(o)};this.renderAxisLabel=function(){var p,v,s,r=j.axisLabel(),u=r.text;pos=r.pos,padding=r.padding;if(u===""||u===null||u===undefined){return}s=j.axisContainer.selectAll("text.axisLabel");if(s.node()===null){s=j.axisContainer.append("text").attr("class","axisLabel")}s.text(u);j.setAxisLabelStyle();var t=s.node().getBBox();var q=0;var o=0;j.axisContainer.selectAll("g.tick").each(function(A){var z=i.select(this).node().getBBox();if(z.width>q){q=z.width}if(z.height>o){o=z.height}});if(pos==="left"){p=t.width/2}else{if(pos==="center"){p=j.width()/2}else{p=j.width()-t.width/2}}if(j.position()==="bottom"){v=t.height+o+padding}else{v=-t.height-o-padding}s.attr("transform","translate("+p+","+v+")")};this.renderTickLine=function(s){var o,q,p;if(j.position()==="bottom"){q=0;p=-s.h}else{q=0;p=s.h}var r=j.axisContainer.selectAll("g.tick");var t=j.axisContainer.select("path.domain").node();var u=t?t.getBBox().width:NaN;r.each(function(){var A=i.select(this).attr("transform");var z=parseFloat(A.replace(/[^0-9.\-, ]/g,"").split(/[, ]/g)[0])+0.5;if(!isNaN(u)&&(Math.abs(z-u)<1||z<1)){return}o=z;var v=j.gridLineContainer.append("line").attr("class","tickLine").attr("x1",o).attr("y1",q).attr("x2",o).attr("y2",p)})};this.renderInnerLine=function(u){var A,z,v,t=j.gridLine().innerLine.gapNum;if(t<1){return}if(j.position()==="bottom"){z=0;v=-u.h}else{z=0;v=u.h}var B=j.axisContainer.selectAll("g.tick");var C,r=NaN,o=NaN,p=t+1;B.each(function(){var E=i.select(this).attr("transform");var D=parseFloat(E.replace(/[^0-9.\-, ]/g,"").split(/[, ]/g)[0])+0.5;if(isNaN(D)){D=0}if(isNaN(r)){r=D}if(isNaN(o)){o=D}if(D<r){r=D}if(D>o){o=D}});C=(o-r)/(B.nodes().length-1)/p;for(A=r-C;A>0;A-=C){j.gridLineContainer.append("line").attr("class","innerLine").attr("x1",A).attr("y1",z).attr("x2",A).attr("y2",v)}var s=0,q=j.width();for(A=r;A<q;A+=C,s++){if(s%p!==0){j.gridLineContainer.append("line").attr("class","innerLine").attr("x1",A).attr("y1",z).attr("x2",A).attr("y2",v)}}};this.getTicksPos=function(){var o=[];var p=j.axisContainer.selectAll("g.tick");p.each(function(){var r=i.select(this).attr("transform");var q=parseFloat(r.replace(/[^0-9.\-, ]/g,"").split(/[, ]/g)[0])+0.5;o.push(q)});o.sort(function(r,q){return r-q});return o}};g.struct=function(j){var k=j.view.component.charts.baseAxis;k.struct(j);g.prototype=Object.create(k.prototype);g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(module,exports,__webpack_require__){(function(d3){var Legend=function(_parent,_config){const LegendItem=ghca_charts.view.component.charts.legendItem;const ColorUtil=ghca_charts.view.util.colorUtil;const ObjectUtil=ghca_charts.view.util.objectUtil;const RegexUtil=ghca_charts.view.util.regexUtil;const StringUtil=ghca_charts.view.util.stringUtil;if(arguments.length<1){throw new Error("传入参数个数错误,当前个数"+arguments.length+",应至少传入1个参数")}if(!_config||!_config.legend){return}var self=this;var xPos="center";this.xPos=function(value){if(!arguments.length){return xPos}xPos=value;return this};var yPos="top";this.yPos=function(value){if(!arguments.length){return yPos}yPos=value;return this};var onlyOneColumn=false;this.onlyOneColumn=function(value){if(!arguments.length){return onlyOneColumn}onlyOneColumn=value;return this};var onlyOneRow=false;this.onlyOneRow=function(value){if(!arguments.length){return onlyOneRow}onlyOneRow=value;return this};var visible=true;this.visible=function(value){if(!arguments.length){return visible}visible=value;return this};var keyPath="";this.keyPath=function(value){if(!arguments.length){return keyPath}keyPath=value;return this};var key="name";this.key=function(value){if(!arguments.length){return key}key=value;return this};var items=[];this.items=function(value){if(!arguments.length){return items}items=StringUtil.parseArray(value);return this};var labelFormat=null;this.labelFormat=function(value){if(!arguments.length){return labelFormat}labelFormat=value;return this};var colors=null;this.colors=function(value){if(!arguments.length){return colors}colors=StringUtil.parseArray(value);return this};var icon=null;this.icon=function(value){if(!arguments.length){return icon}icon=value;return this};var icons=null;this.icons=function(value){if(!arguments.length){return icons}icons=StringUtil.parseArray(value);return this};var label=null;this.label=function(value){if(!arguments.length){return label}label=value;return this};var labels=null;this.labels=function(value){if(!arguments.length){return labels}labels=StringUtil.parseArray(value);return this};var domain=null;this.domain=function(value){if(!arguments.length){return domain}domain=StringUtil.parseArray(value);return this};var showTotal=false;this.showTotal=function(value){if(!arguments.length){return showTotal}showTotal=value;return this};var mouseOverEffect=false;this.mouseOverEffect=function(value){if(!arguments.length){return mouseOverEffect}mouseOverEffect=value;return this};var itemGap=10;this.itemGap=function(value){if(!arguments.length){return itemGap}itemGap=value;return this};var config=_config;this.config=function(value){if(!arguments.length){return config}config=value;return this};var init=function(){if(!_parent){throw new Error("Legend构造方法中传入的容器_ele:"+_ele+"无法找到。")}self.parent=_parent;self.itemsList=[];self.itemsData=[]};var initAllContainers=function(){if(self.visible()&&!self.legendContainer){self.legendContainer=self.parent.mainContainer().append("g").attr("class","legend")}else{if(!self.visible()&&self.legendContainer){self.legendContainer.remove()}}};this.refreshData=function(){var isSetItems=false,parseDomain=false,legend=self.config().legend;self.xPos(legend.hasOwnProperty("xPos")?legend.xPos:"center");self.yPos(legend.hasOwnProperty("yPos")?legend.yPos:"top");self.visible(legend.hasOwnProperty("visible")?legend.visible:true);self.onlyOneColumn(legend.hasOwnProperty("onlyOneColumn")?legend.onlyOneColumn:false);self.onlyOneRow(legend.hasOwnProperty("onlyOneRow")?legend.onlyOneRow:false);self.showTotal(legend.hasOwnProperty("showTotal")?legend.showTotal:false);self.mouseOverEffect(legend.hasOwnProperty("mouseOverEffect")?legend.mouseOverEffect:false);self.itemGap(legend.hasOwnProperty("itemGap")?legend.itemGap:10);self.keyPath(legend.hasOwnProperty("keyPath")?legend.keyPath:"");self.labelFormat(legend.hasOwnProperty("labelFormat")?legend.labelFormat:null);if(legend.hasOwnProperty("colors")&&legend.colors){self.colors(legend.colors);parseDomain=true}if(legend.hasOwnProperty("icon")&&legend.icon){self.icon(legend.icon);parseDomain=true}if(legend.hasOwnProperty("label")&&legend.label){self.label(legend.label);parseDomain=true}if(legend.hasOwnProperty("icons")&&legend.icons){self.icons(legend.icons);parseDomain=true}if(legend.hasOwnProperty("labels")&&legend.labels){self.labels(legend.labels);parseDomain=true}if(parseDomain&&legend.hasOwnProperty("domain")&&legend.domain){self.domain(legend.domain)}if(legend.hasOwnProperty("key")&&ObjectUtil.isString(legend.key)){self.key(legend.key)}else{self.key("name")}if(legend.hasOwnProperty("items")&&ObjectUtil.isArray(legend.items)&&legend.items.length>0){isSetItems=true;self.items(legend.items)}else{isSetItems=false;self.items([])}var index=0,series=self.config().series;if(series){var itemsData;series.forEach(function(chartData){switch(chartData.type.toLowerCase()){case"topology":case"sankey":case"tree":case"sunburst":case"radialtree":itemsData=self.keyPath()===""?chartData.nodes:eval("chartData."+self.keyPath());break;case"pie":case"scatter":case"area":case"line":case"bar":case"treemap":itemsData=self.keyPath()===""?chartData.data:eval("chartData."+self.keyPath());break;default:itemsData=null;break}if(itemsData){self.concat(self.itemsData,self.getItemsData(itemsData,chartData,isSetItems,index))}index++})}};this.getItemsData=function(data,chartData,isSetItems,index){var result=[];if(!data||data.length==0){return result}var itemColor,itemData,itemValue,chartType=chartData.type;keyMap={},key=self.key(),colors=self.colors(),colorIndex=0;labelFormat=self.labelFormat();if(isSetItems){var otherData=[],items=self.items();for(var i=0,len=data.length;i<len;i++){itemData=data[i];itemValue=itemData[key];if(!keyMap[itemValue]&&items.indexOf(itemValue)!==-1){itemColor=ColorUtil.getColor(colorIndex===0?index:colorIndex,colors);result.push({iconShape:Legend.ITEM_ICON_MAP[chartType],color:itemColor,showTotal:showTotal,mouseOverEffect:mouseOverEffect,label:self.getResultLabel(labelFormat,itemValue,itemValue,data,itemData),chartData:chartData,data:data.filter(function(item){if(item[key]===itemValue){item.legendColor=itemColor;return true}return false})});keyMap[itemValue]=1;colorIndex++}else{if(items.indexOf(itemValue)===-1){otherData.push(itemData)}}}if(otherData.length>0){var otherColorIndex=colorIndex===1?(index+1):colorIndex;var otherTypeColor=ColorUtil.getColor(otherColorIndex,colors);for(var i=0,len=otherData.length;i<len;i++){itemData=otherData[i];itemData.legendColor=otherTypeColor}result.push({iconShape:Legend.ITEM_ICON_MAP[chartType],color:otherTypeColor,showTotal:showTotal,mouseOverEffect:mouseOverEffect,label:"其他",chartData:chartData,data:otherData})}}else{var useDomainColor=self.colors()!=null&&self.domain()!=undefined;var colorFn=useDomainColor?d3.scaleThreshold().domain(self.domain()).range(self.colors()):ColorUtil.getColor;var iconConfig=self.icons()===null?self.icon()===null?null:[self.icon]:self.icons();var iconFn=iconConfig!==null?d3.scaleThreshold().domain(self.domain()&&self.icons()?self.domain():[]).range(iconConfig):null;var labelConfig=self.labels()===null?self.label()===null?null:[self.label()]:self.labels();var labelFn=labelConfig!==null?d3.scaleThreshold().domain(self.domain()&&self.labels()?self.domain():[]).range(labelConfig):null;var getValueLabel=function(itemValue){if(useDomainColor){var scoreAry=colorFn.invertExtent(itemValue);var valueLabel;if(scoreAry[0]===undefined){valueLabel=scoreAry[1]+"(不含)以下"}else{if(scoreAry[1]===undefined){valueLabel=scoreAry[0]+"(含)以上"}else{valueLabel=scoreAry.join("(含)-")+"(不含)"}}return valueLabel}return itemValue};for(var i=0,len=data.length;i<len;i++){itemData=data[i];itemValue=useDomainColor?colorFn(itemData[key]):itemData[key];if(itemValue!==undefined&&itemValue!==null&&!keyMap[itemValue]){itemColor=useDomainColor?itemValue:colorFn(colorIndex===0?index:colorIndex,colors);result.push({iconShape:Legend.ITEM_ICON_MAP[chartType],customIcon:iconFn?iconFn(itemData[key]):null,customLabel:labelFn?labelFn(itemData[key]):null,color:itemColor,showTotal:showTotal,mouseOverEffect:mouseOverEffect,label:self.getResultLabel(labelFormat,getValueLabel(itemValue),itemValue,data,itemData),chartData:chartData,data:data.filter(function(item){if((useDomainColor?colorFn(item[key]):item[key])===itemValue){item.legendColor=itemColor;return true}return false})});keyMap[itemValue]=1;colorIndex++}}if(useDomainColor){var colors=self.colors();result.forEach(function(obj){return obj.index=colors.indexOf(obj.color)});result.sort(function(a,b){return a.index>b.index})}}return result};this.concat=function(ary1,ary2){if(!ary2||!ObjectUtil.isArray(ary2)){return ary1}for(var i=0,len=ary2.length;i<len;i++){ary1.push(ary2[i])}return ary1};this.ItemsRender=function(){var itemsData=self.itemsData;if(!itemsData||!self.visible()){return}for(var i=0,len=itemsData.length;i<len;i++){self.ItemRender(itemsData[i])}};this.ItemRender=function(itemData){var itemCon=self.legendContainer.append("g").attr("class","legendItem");var item=new LegendItem(itemCon,itemData);item.render();self.itemsList.push(item)};this.update=function(){self.xPos("center");self.yPos("top");self.visible(true);self.onlyOneColumn(false);self.onlyOneRow(false);self.showTotal(false);self.mouseOverEffect(false);self.keyPath("");self.labelFormat(null);self.colors(null);self.icons(null);self.labels(null);self.icon(null);self.label(null);self.domain(null);self.key("name");self.items([]);self.itemsList=[];self.itemsData=[];if(self.legendContainer){self.legendContainer.remove();self.legendContainer=null}self.render()};this.resetLayout=function(){if(!self.legendContainer||self.itemsList.length===0){return}var padding=10,itemX=0,itemY=0,itemGap=self.itemGap(),maxItemW=0,maxItemH=0,xPos=self.xPos(),yPos=self.yPos(),parentBox=self.parent.bgNode().getBBox();parentW=parentBox.width,parentH=parentBox.height,layoutW=parentW-2*padding;layoutH=parentH-2*padding;itemIns=null,itemBox=null;if(onlyOneRow||(xPos==="center"&&!onlyOneColumn)){for(var i=0,len=self.itemsList.length;i<len;i++){itemIns=self.itemsList[i].ele;itemBox=itemIns.node().getBBox();maxItemH=itemBox.height>maxItemH?itemBox.height:maxItemH;if(itemX+itemBox.width+itemGap<=layoutW){itemIns.attr("transform","translate("+itemX+","+itemY+")")}else{itemX=0;itemY+=(maxItemH+itemGap);maxItemH=0;itemIns.attr("transform","translate("+itemX+","+itemY+")")}itemX+=(itemBox.width+itemGap)}}else{for(var i=0,len=self.itemsList.length;i<len;i++){itemIns=self.itemsList[i].ele;itemBox=itemIns.node().getBBox();maxItemW=itemBox.width>maxItemW?itemBox.width:maxItemW;if(itemY+itemBox.height+itemGap<=layoutH){itemIns.attr("transform","translate("+itemX+","+itemY+")")}else{itemX+=(maxItemW+itemGap);itemY=0;maxItemW=0;itemIns.attr("transform","translate("+itemX+","+itemY+")")}itemY+=(itemBox.height+itemGap)}}var x=0,y=0,legendBox=self.legendContainer.node().getBBox(),legendW=legendBox.width,legendH=legendBox.height;if(!isNaN(xPos)){x=xPos}else{if(xPos==="left"){x=padding}else{if(xPos==="right"){x=parentW-legendW-padding}else{x=(parentW-legendW)/2}}}if(!isNaN(yPos)){y=yPos}else{if(yPos==="middle"){y=(parentH-legendH)/2}else{if(yPos==="bottom"){y=parentH-legendH-padding}else{y=padding}}}self.legendContainer.attr("transform","translate("+x+","+y+")")};this.render=function(){self.refreshData();initAllContainers();self.ItemsRender();self.resetLayout();console.log("Legend.render()")};this.getResultLabel=function(label,value,defaultResult,data,d){if(!label){return defaultResult}var result=label.replace(/{v}/ig,value);return result.replace(RegexUtil.jsRegex,function(){return arguments.length>1?eval(arguments[1]):""})};this.toString=function(){return("Legend info: \n   xPos:"+self.xPos()+"\n   yPos:"+self.yPos()+"\n   key:"+self.key()+"\n   items:"+self.items()+"\n   labelFormat:"+self.labelFormat())};init()};Legend.struct=function(ghca_charts){Legend.prototype.constructor=Legend};Legend.ITEM_ICON_MAP={line:"line",area:"line",pie:"pie"};module.exports=Legend}.call(exports,__webpack_require__(2)))},function(e,c,f){(function(g){var i=function(t,r){const j=ghca_charts.events.BaseEvent;const v=ghca_charts.view.util.stringUtil;const C=ghca_charts.view.util.eventUtil;const k=ghca_charts.view.util.elementUtil;if(arguments.length<2){throw new Error("传入参数个数错误,当前个数"+arguments.length+",应至少传入2个参数")}var q=this,B=NaN;var D=r;this.data=function(E){if(!arguments.length){return D}D=E;return this};var A=function(){if(typeof(t)=="string"){t=document.getElementById(t)}if(!t){throw new Error("LegendItem构造方法中传入的容器_ele:"+t+"无法找到。")}q.ele=t;q.isShow=true;s()};var s=function(){q.ele.on("click.legendItem",p);q.ele.on("mouseover.legendItem",m);q.ele.on("mouseout.legendItem",u)};var l=function(E){return(E.showTotal&&E&&E.data)?"("+E.data.length+")":""};var n=function(H,J){var I=q.data().data;for(var G=0,E=I.length;G<E;G++){var F=I[G].legendIns;F=F&&F.mainContainer?F.mainContainer():F;F&&F.attr(H,J)}};var z=function(){if(!q.data().mouseOverEffect){return}var E=0,F=0.25;n("opacity",F);B=setInterval(function(){if(E===2&&!isNaN(B)){clearInterval(B);B=NaN}n("opacity",E%2===0?1:F);E++},400)};var o=function(){if(!q.data().mouseOverEffect){return}if(!isNaN(B)){clearInterval(B);B=NaN}n("opacity",1)};var p=function(){event.stopImmediatePropagation();o();var F=q.data();if(!F){return}q.isShow=!q.isShow;if(F.customIcon||F.customLabel){if(q.isShow){q.shape.style("opacity",1)}else{q.shape.style("opacity",0.65)}}else{var I="#ccc",E="#000",F=q.data(),H=F.iconShape?F.iconShape:"rect";if(q.isShow){q.shape.selectAll(".icon").attr(H==="line"?"stroke":"fill",F.color);q.label.attr("fill",E)}else{q.shape.selectAll(".icon").attr(H==="line"?"stroke":"fill",I);q.label.attr("fill",I)}}var J=q.data().data;J.forEach(function(K){K.visible=q.isShow});var G=C.createEvent(j.LEGEND_ITEM_CLICK,{bubbles:true,cancelable:true});q.ele.node().dispatchEvent(G)};var m=function(){if(q.isShow){q.ele.style("cursor","pointer");q.shape.selectAll("*").style("opacity",0.65);z()}};var u=function(){if(q.isShow){q.shape.selectAll("*").style("opacity",1);o()}};this.createContent=function(){var H=q.data();if(!H){return}var G=H.customIcon;var J=H.customLabel;var S=(G&&G.hasOwnProperty("gap"))?G.gap:2;var N=(G&&G.hasOwnProperty("iconWidth"))?G.iconWidth:24;var R=(G&&G.hasOwnProperty("iconHeight"))?G.iconHeight:12;var P=H.label+l(H);var F=J&&J.hasOwnProperty("maxLength")?J.maxLength:0;if(F>0&&P.length>F){q.ele.append("title").text(P);P=P.substring(0,F)+"..."}q.label=q.ele.append("text").attr("class","legendItemText").attr("font-size","12px").attr("pointer-events","none").attr("x",N+S).text(P);if(J){k.setElementProperties(q.label,J)}v.fixTextSpace(q.label.node());var T=q.label.node().getBBox();var Q=T.width;var I=T.height;var M=N+S+Q;var K=R<I?I:R;q.label.attr("y",G?(I+R)/2:R);q.shape=q.ele.append("g").attr("pointer-events","none");if(G){q.shape=q.shape.append(G.shape).attr("class","icon");if(G.shape==="circle"){q.shape.attr("cx",N/2).attr("cy",K/2)}else{q.shape.attr("x",0).attr("y",(K-R)/2).attr("width",N).attr("height",R)}var L=G.style;if(L){k.setElementProperties(q.shape,L)}}else{var O=H.iconShape?H.iconShape:"rect";if(O==="rect"){q.shape.append("rect").attr("class","icon").attr("x",0).attr("y",(K-R)/2).attr("width",N).attr("height",R).attr("rx",3).attr("ry",3).attr("fill",H.color)}else{if(O==="line"){q.shape.append("line").attr("class","icon").attr("x1",0).attr("x2",N).attr("y1",K/2).attr("y2",K/2).attr("stroke-width",1.5).attr("stroke",H.color);if(H.chartData.nodeShow){q.shape.append("circle").attr("class","icon").attr("cx",N/2).attr("cy",K/2).attr("r",3).attr("stroke-width",1.5).attr("fill","#fff").attr("stroke",H.color)}}else{if(O==="pie"){var E=g.arc().outerRadius(R).innerRadius(R/2);q.shape.append("path").attr("class","icon").attr("d",E({startAngle:-Math.PI/3.5,endAngle:Math.PI/3.5})).attr("fill",H.color).attr("transform","translate("+[R,R+(K-q.shape.node().getBBox().height)/2]+")")}}}}if(q.shape){q.shape.attr("pointer-events","none")}q.bgRect=q.ele.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",M).attr("height",K).attr("fill","red").attr("opacity",0)};this.render=function(){q.createContent();console.log("LegendItem.render()")};this.toString=function(){};A()};i.struct=function(j){i.prototype.constructor=i};e.exports=i}.call(c,f(2)))},function(e,c,f){(function(g){var i=function(m,z){const n=ghca_charts.view.component.baseComponent;const k=ghca_charts.view.component.charts.baseChart;const j=ghca_charts.view.util.classFactory;const r=ghca_charts.view.util.colorUtil;const A=ghca_charts.view.util.svgUtil;k.apply(this,arguments);var v=this,s=v.init,u=v.initAllContainers,q=v.addListeners,l=v.renderPosition,p=v.refreshData;v.className("seriesLine");v.addAttributes("tension","nodeShow");var t=0;this.tension=function(B){if(!arguments.length){return t}t=B;return this};var o=false;this.nodeShow=function(B){if(!arguments.length){return o}o=B;return this};this.init=function(){s();var B=v.data().data;v.visibleItems(B);v.itemsIns=[]};this.addListeners=function(){q()};this.refreshData=function(){p();var C=v.data().data;for(var E,D=0,B=C.length;D<B;D++){E=C[D];if(!E.hasOwnProperty("visible")){E.visible=true}}};this.renderPosition=function(){l();if(v.lineContainer){v.lineContainer.renderTransform()}};this.initAllContainers=function(){u();if(!v.lineContainer){var B=new n();B.className("line-Container");v.addChild(B);v.lineContainer=B}};this.update=function(){v.refreshData();var L=v.data().data;v.visibleItems(v.filterArrayByElementProperty(L,"visible",true));v.layout().update();var G=v.lineContainer;var D,S,T,F,K=0,C=0,N=0;if(v.horAxis()){D=v.horAxis();K=D.padding();T=D.scaleIns()}if(v.verAxis()){S=v.verAxis();C=S.padding();F=S.scaleIns();N=S.height()}var H=g.line().x(function(V){return V.x}).curve(g.curveCardinal.tension(v.tension()));var O=r.getColor(v.seriesIndex());G=v.lineContainer.mainContainer();v.lineContainer.x(K.left);v.lineContainer.y(C.top);var M=v.visibleItems();for(var R,P=0,Q=M.length;P<Q;P++){R=M[P];if(R.legendColor===null||R.legendColor===undefined||R.legendColor===""){R.legendColor=O}v.getRendererConfig(R,"fill")}var U=G.selectAll("path.line-path").data(M.length>0?[M]:[]);var J=U.exit();J.remove();U.transition().duration(v.animation()?500:0).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke-width",1.5).attr("stroke",function(W){var V=O;if(W.hasOwnProperty("legendColor")){V=W.legendColor}else{if(W.length>0&&W[0].hasOwnProperty("legendColor")){V=W[0].legendColor}}return V}).attr("d",H.y(N)).attr("d",H.y(function(V){return V.y}));U.enter().append("path").attr("class","line-path").attr("fill","none").attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke-width",1.5).attr("stroke",function(W){var V=O;if(W.hasOwnProperty("legendColor")){V=W.legendColor}else{if(W.length>0&&W[0].hasOwnProperty("legendColor")){V=W[0].legendColor}}return V}).each(function(V){if(V.length>0){V[0].legendIns=v.lineContainer}}).attr("d",H.y(N)).transition().duration(v.animation()?1000:0).attr("d",H.y(function(V){return V.y}));if(v.nodeShow()){var E=G.selectAll("g.point-item").data(M,function(W,V){return W.ins?V:W.ins});var I=E.exit();I.remove();E.each(function(W){var V=W.ins;if(V){V.update()}});var B=E.enter().append("g").attr("class","point-item");B.each(function(Y){if(!Y.hasOwnProperty("legendColor")){Y.legendColor=O}var X=v.getRendererConfig(Y,"stroke");var W=Y.hasOwnProperty("renderer")?X.clazz:"lineNode";var V=j.newNodeInstance(W,[g.select(this),Y]);V.render();Y.ins=V;Y.legendIns=v.lineContainer})}else{G.selectAll("g.point-item").remove()}v.renderPosition()};this.toString=function(){return("Line info: \n   width:"+v.width()+"\n   height:"+v.height()+"\n   layout:"+v.layout()+"\n   data:"+JSON.stringify(v.data(),null,4))};i.clazzName="Line";v.init()};i.struct=function(k){var j=k.view.component.charts.baseChart;j.struct(k);i.prototype=Object.create(j.prototype);i.prototype.constructor=i};e.exports=i}.call(c,f(2)))},function(e,c,f){(function(g){var i=function(m,B){const n=ghca_charts.view.component.baseComponent;const k=ghca_charts.view.component.charts.baseChart;const j=ghca_charts.view.util.classFactory;const s=ghca_charts.view.util.colorUtil;const o=ghca_charts.view.util.stringUtil;const t=ghca_charts.view.util.objectUtil;k.apply(this,arguments);var A=this,r=true,u=A.init,z=A.initAllContainers,q=A.addListeners,l=A.renderPosition,p=A.refreshData;A.className("seriesPie");this.init=function(){u();var C=A.data().data;A.visibleItems(C);A.itemsIns=[]};this.initAllContainers=function(){z();var C=new n();C.className("pie-ItemsContainer");A.addChild(C);A.itemsContainer=C};this.addListeners=function(){q()};this.refreshData=function(){p();var D=A.data().data;for(var F,E=0,C=D.length;E<C;E++){F=D[E];if(!F.hasOwnProperty("id")){F.id=E}if(!F.hasOwnProperty("visible")){F.visible=true}}};this.renderPosition=function(){l();A.itemsContainer.x(A.width()/2);A.itemsContainer.y(A.height()/2);A.itemsContainer.renderTransform()};this.update=function(){A.refreshData();var J=A.data().data;A.visibleItems(A.filterArrayByElementProperty(J,"visible",true));A.layout().update();var L=A.visibleItems();var F=A.itemsContainer;for(var I,E=0,G=L.length;E<G;E++){I=L[E];if(I.legendColor===null||I.legendColor===undefined||I.legendColor===""){I.legendColor=s.getColor(E)}var C=A.getRendererConfig(I,"fill");v(C)}var D=F.mainContainer().selectAll("g.pie-item").data(L,function(N,M){return N.id+"_"+N.value});D.each(function(M){M.ins&&M.ins.update()});var K=D.enter().append("g").attr("class","pie-item");K.each(function(O){var N=O.hasOwnProperty("data")&&O.data?O.data.clazz:"arcClass";var M=j.newNodeInstance(N,[g.select(this),O]);M.isChartFirstInit(r);M.render();O.ins=M;O.legendIns=g.select(this)});var H=D.exit();H.remove();A.renderPosition();r=false};this.toString=function(){return("Pie info: \n   width:"+A.width()+"\n   height:"+A.height()+"\n   layout:"+A.layout()+"\n   data:"+JSON.stringify(A.data(),null,4))};var v=function(D){if(!D){return}var H=Math.min(A.width(),A.height());if(!D.hasOwnProperty("clazzProperties")){D.clazzProperties={outerRadius:"auto"}}if(!D.clazzProperties.hasOwnProperty("outerRadius")){D.clazzProperties.outerRadius="auto"}var E=D.clazzProperties.outerRadius;if(t.isString(E)){if(E==="auto"){E=H/2}else{var C=o.parsePercent(E);if(!isNaN(C)){E=parseInt(C/100*H)}}D.clazzProperties.outerRadius=E}if(!D.clazzProperties.hasOwnProperty("innerRadius")){D.clazzProperties.innerRadius="auto"}var F=D.clazzProperties.innerRadius;if(t.isString(F)){if(F==="auto"){F=0}else{var G=o.parsePercent(F);if(!isNaN(G)){F=parseInt(G/100*H)}}D.clazzProperties.innerRadius=F}};i.clazzName="Pie";A.init()};i.struct=function(k){var j=k.view.component.charts.baseChart;j.struct(k);i.prototype=Object.create(j.prototype);i.prototype.constructor=i};e.exports=i}.call(c,f(2)))},function(e,c,f){(function(g){var i=function(z,q){const I=ghca_charts.view.component.baseComponent;const H=ghca_charts.view.component.charts.chart;const J=ghca_charts.view.component.charts.baseChart;const u=ghca_charts.layout.sankeyLayout;const A=ghca_charts.view.util.classFactory;const D=ghca_charts.view.util.dataParser;const s=ghca_charts.view.util.constant;const G=ghca_charts.view.util.objectUtil;const m=ghca_charts.events.BaseEvent;const K=ghca_charts.view.util.eventUtil;J.apply(this,arguments);var v=this,p=v.init,n=v.initAllContainers,l=v.addListeners,k=v.renderPosition,t=v.refreshData,C=v.setData;v.className("seriesSankey");v.addAttributes("nodeDragDir","focusEffect");var r=s.FREE_DRAG_TYPE;this.nodeDragDir=function(L){if(!arguments.length){return r}r=L;return this};var B=true;this.focusEffect=function(L){if(!arguments.length){return B}B=L;return this};this.init=function(){p();v.nodes=v.layout().nodes();v.links=v.layout().links();v.nodesIns=[];v.linksIns=[];v.addNodes(v.data().nodes);v.addLinks(v.data().links)};this.initAllContainers=function(){n();var M=new I();M.className("sankey-linksContainer");v.addChild(M);v.linksContainer=M;var L=new I();L.className("sankey-nodesContainer");v.addChild(L);v.nodesContainer=L};this.addListeners=function(){l();v.addEventListener(m.NODE_MOUSE_OVER,v.node_nodeMouseMoveHandler);v.addEventListener(m.NODE_MOUSE_OUT,v.node_nodeMouseOutHandler)};this.refreshData=function(){t();var M=v.data(),L=M.nodes;L.forEach(function(N){if(!N.hasOwnProperty("visible")){N.visible=true}})};this.renderPosition=function(){k();var O=v.nodesIns;for(var M,N=0,L=O.length;N<L;N++){M=O[N];M.mainContainer().each(function(P){M.x(P.x);M.y(P.y);M.renderTransform()})}v.linksContainer.mainContainer().selectAll("g.linkContainer path").attr("d",v.layout().model().linkPath())};this.update=function(){v.refreshData();v.layout().update();o();var W=v.linksContainer;W.removeAllChildren();v.linksIns.length=0;var R=v.nodesContainer;R.removeAllChildren();v.nodesIns.length=0;var N=v.getVisibleLinks(v.links);var aa=function(ah){ah.pathFunction(v.layout().model().linkPath);ah.sortFunction(function(aj,ai){return ai.dy-aj.dy})};var ac=A.newRenderersInstanceByData(W,v,"linkContainer",N,false,"stroke",aa);if(ac){for(var Z,ae=0,af=ac.length;ae<af;ae++){Z=ac[ae];v.linksIns.push(Z);Z.mainContainer().each(function(ah){ah.ins=Z})}}var U=v.filterArrayByElementProperty(v.nodes,"visible",true);for(var ae=0,af=U.length;ae<af;ae++){var M=U[ae];var V=v.getRendererConfig(M,"fill");if(V&&V.type==="chart"&&V.series){var O,X=V.series;for(var ad=0,T=X.length;ad<T;ad++){O=X[ad];O.width=M.dy;O.height=M.dy;if(O.type==="pie"){O.x=-O.width/2}D.createChartData(O,M)}}}var aa=function(ah){ah.isDragable(v.nodeDragDir()!==s.FIX_DRAG_TYPE)};var S=A.newRenderersInstanceByData(R,v,"nodeContainer",U,true,"fill",aa);if(S){for(var Q,ae=0,af=S.length;ae<af;ae++){Q=S[ae];Q.mainContainer().call(g.drag().on("start",v.node_dragStartHandler).on("drag",v.node_dragHandler).on("end",v.node_dragEndHandler));(function(ah){ah.addEventListener("mouseover",function(aj){var ai=K.createCustomEvent(m.NODE_MOUSE_OVER,true,true);ah.dispatchEvent(ai)});ah.addEventListener("mouseout",function(aj){var ai=K.createCustomEvent(m.NODE_MOUSE_OUT,true,true);ah.dispatchEvent(ai)})})(Q);v.nodesIns.push(Q);var ag=4;var ab=Q.normalChild()===null?false:true;var P=v.layout().model().nodeWidth();var Y=Q.mainContainer().append("text").attr("class","sankey-node-text").attr("style","font-size:13px;pointer-events:none;").attr("x",function(ah){return ab?-6:-(ah.dy/2+ag)}).attr("y",function(ah){return ah.dy/2}).attr("dy",".35em").attr("text-anchor","end");Y.text(function(ah){return ah.name}).filter(function(ah){return ah.x<v.width()/2}).attr("x",function(ah){return ab?6+P:ah.dy/2+ag+P}).attr("text-anchor","start");var L=v.animation()?300:0;Y.attr("opacity",0).transition().duration(L).ease(g.easeLinear).delay(function(ah){return ah.level*(L-10)}).attr("opacity",1);Q.mainContainer().each(function(ah){ah.ins=Q;ah.textIns=Y})}}v.renderPosition()};this.setData=function(M){var L=C(M);v.layout().nodes().length=0;v.layout().links().length=0;v.nodes.length=0;v.links.length=0;v.nodesIns.length=0;v.linksIns.length=0;v.addNodes(v.data().nodes);v.addLinks(v.data().links);return L};this.toString=function(){return("Sankey info: \n   width:"+v.width()+"\n   height:"+v.height()+"\n   layout:"+v.layout()+"\n   data:"+JSON.stringify(v.data(),null,4))};this.node_dragStartHandler=function(L){this.parentNode.appendChild(this)};this.node_dragHandler=function(L){F(this,L)};this.node_dragEndHandler=function(L){F(this,L)};this.node_nodeMouseMoveHandler=function(L){L.stopPropagation();if(v.focusEffect()){E(L.detail.target)}};this.node_nodeMouseOutHandler=function(L){L.stopPropagation();if(v.focusEffect()){j()}};this.addNode=function(L){L.sourceLinks=[];L.targetLinks=[];v.nodes.push(L)};this.addNodes=function(L){if(G.isArray(L)){L.forEach(function(M){v.addNode(M)})}};this.addLink=function(L){L.source=v.findNode(L.source);L.target=v.findNode(L.target);L.source.sourceLinks.push(L);L.target.targetLinks.push(L);v.links.push(L)};this.addLinks=function(L){if(G.isArray(L)){L.forEach(function(M){v.addLink(M)})}};this.removeNode=function(O){var M=0,N=v.findNode(O),L=v.links;while(M<L.length){L[M]["source"]==N||L[M]["target"]==N?L.splice(M,1):++M}v.nodes.splice(v.findNodeIndex(O),1)};this.removeChildNodes=function(M){var O=v.findNode(M),L=v.nodes,U=null,W=v.links,P=[],V=[];W.forEach(function(Y,X){if(Y.source==O){P.push(X);V.push(Y.target)}});P.reverse().forEach(function(X){W.splice(X,1)});var S=function(Z){var Y=W.length;for(var X=Y-1;X>=0;X--){if(W[X]["source"]==Z){var aa=W[X]["target"];W.splice(X,1);L.splice(v.findNodeIndex(Z.id),1);S(aa)}}};V.forEach(function(X){S(X)});for(var R=L.length-1;R>=0;R--){var N=false;O=L[R];for(var Q=0,T=W.length;Q<T;Q++){U=W[Q];if(U.source==O||U.target==O){N=true}}if(!N){L.splice(R,1)}}};this.findNode=function(O){var M=v.nodes;for(var N=0,L=M.length;N<L;N++){if(M[N]["id"]==O){return M[N]}}return null};this.findNodeIndex=function(O){var M=v.nodes;for(var N=0,L=M.length;N<L;N++){if(M[N]["id"]==O){return N}}return -1};this.setAllChildLevelNodesVisible=function(O,N){var L=v.findNode(O);if(!L){return}if(arguments.length<2){N=true}var M=function(P){v.nodes.forEach(function(Q){if(Q.parentId===P){Q.visible=N;M(Q.id)}})};M(O)};this.setNextLevelNodesVisible=function(N,M){var L=v.findNode(N);if(!L){return}if(arguments.length<2){M=true}v.nodes.forEach(function(O){if(O.parentId===N){O.visible=M}})};this.expandNode=function(M,L){if(L){v.setAllChildLevelNodesVisible(M,true)}else{v.setNextLevelNodesVisible(M,true)}v.update()};this.collapseNode=function(L){v.setAllChildLevelNodesVisible(L,false);v.update()};this.getVisibleLinks=function(N){var M=[];if(!N||N.length===0){return M}var P;for(var O=0,L=N.length;O<L;O++){P=N[O];if(P.source.visible&&P.target.visible){if(P.hasOwnProperty("visible")){if(P.visible){M.push(P)}}else{M.push(P)}}}return M};var F=function(P,R){var Q=v.nodeDragDir();if(Q===s.FIX_DRAG_TYPE){return}else{if(Q===s.HOR_DRAG_TYPE){R.x=Math.max(0,Math.min(v.width()-R.dx,g.event.x))}else{if(Q===s.VER_DRAG_TYPE){R.y=Math.max(0,Math.min(v.height()-R.dy,g.event.y))}else{R.x=g.event.x;R.y=g.event.y}}}var O=v.nodesIns;for(var M,N=0,L=O.length;N<L;N++){M=O[N];M.mainContainer().each(function(S){M.x(S.x);M.y(S.y);M.renderTransform()})}v.layout().model().relayoutLinkDepths();v.linksContainer.mainContainer().selectAll("g.linkContainer path").attr("d",v.layout().model().linkPath())};var E=function(V){if(!V){return}var P,T,S,N,L,M,W,Y,Q,R=0.2,Z=v.nodesIns,U=v.linksIns,X=[];var O=v.animation()?300:0;for(P=0,T=Z.length;P<T;P++){N=Z[P];N.mainContainer().attr("opacity",R);if(N===V){S=Z[P]}}for(P=0,T=U.length;P<T;P++){L=U[P];L.mainContainer().attr("opacity",R)}M=S.mainContainer().data()[0];X.push(M.ins);X.push(M.textIns);Y=M.sourceLinks;for(P=0,T=Y.length;P<T;P++){W=Y[P];X.push(W.ins);if(W.target){X.push(W.target.ins);X.push(W.target.textIns)}}Q=M.targetLinks;for(P=0,T=Q.length;P<T;P++){W=Q[P];X.push(W.ins);if(W.source){X.push(W.source.ins);X.push(W.source.textIns)}}for(P=0,T=X.length;P<T;P++){S=X[P];if(S instanceof I){S=S.mainContainer()}S.attr("opacity",1)}};var j=function(){var P,L,N,M=1,Q=v.nodesIns,O=v.linksIns;for(P=0,L=Q.length;P<L;P++){N=Q[P];N.mainContainer().attr("opacity",M)}for(P=0,L=O.length;P<L;P++){N=O[P];N.mainContainer().attr("opacity",M)}v.mainContainer().selectAll("text.sankey-node-text").attr("opacity",M)};var o=function(){var O=v.data(),N=O.nodes,L=[];N.forEach(function(P){if(P.targetLinks.length===0){L.push(P)}});function M(P,Q){if(P.visible){P.level=Q;Q++}else{if(P.hasOwnProperty("level")){delete P.level}}P.sourceLinks.forEach(function(R){M(R.target,Q)})}L.forEach(function(P){M(P,0)})};i.clazzName="Sankey";this.init()};i.struct=function(k){var j=k.view.component.charts.baseChart;j.struct(k);i.prototype=Object.create(j.prototype);i.prototype.constructor=i};e.exports=i}.call(c,f(2)))},function(e,c,f){(function(i){var g=function(m,v){const n=ghca_charts.view.component.baseComponent;const k=ghca_charts.view.component.charts.baseChart;const j=ghca_charts.view.util.classFactory;const q=ghca_charts.view.util.colorUtil;const z=ghca_charts.view.util.svgUtil;const u=ghca_charts.view.util.dataParser;k.apply(this,arguments);var t=this,r=t.init,s=t.initAllContainers,p=t.addListeners,l=t.renderPosition,o=t.refreshData;t.className("seriesScatter");this.init=function(){r();var A=t.data().data;t.visibleItems(A);t.nodesIns=[]};this.addListeners=function(){p()};this.refreshData=function(){o();var B=t.data().data;for(var D,C=0,A=B.length;C<A;C++){D=B[C];if(!D.hasOwnProperty("id")){D.id=C}if(!D.hasOwnProperty("visible")){D.visible=true}}};this.renderPosition=function(){l();if(t.itemsContainer){t.itemsContainer.renderTransform()}if(!t.layout().isTimeLine()){var D=t.nodesIns;for(var B,C=0,A=D.length;C<A;C++){B=D[C];if(B instanceof n){B.mainContainer().each(function(E){B.x(E.x);B.y(E.y);B.renderTransform()})}}}};this.initAllContainers=function(){s();if(!t.itemsContainer){var A=new n();A.className("scatter-ItemsContainer");t.addChild(A);t.itemsContainer=A}};this.update=function(){t.refreshData();var Q=t.data().data;t.visibleItems(t.filterArrayByElementProperty(Q,"visible",true));t.layout().update();var H=t.itemsContainer;if(t.layout().isTimeLine()){z.removeAllChildren(H.node())}t.nodesIns.length=0;var E,V,P=0,C=0;if(t.horAxis()){E=t.horAxis();P=E.padding()}if(t.verAxis()){V=t.verAxis();C=V.padding()}var H=t.itemsContainer.mainContainer(),S=q.getColor(t.seriesIndex());t.itemsContainer.x(P.left);t.itemsContainer.y(C.top);var K=t.visibleItems();if(t.layout().isTimeLine()){H.selectAll("rect.scatter-point").data(K).enter().append("rect").attr("class","scatter-point").attr("y",function(W){return W.y}).attr("x",function(W){return W.x}).attr("width",function(W){return W.dx}).attr("height",function(W){return W.dy}).attr("fill",function(W){return W.hasOwnProperty("legendColor")?W.legendColor:S}).attr("stroke",function(W){return W.hasOwnProperty("legendColor")?W.legendColor:S}).each(function(W){W.legendIns=i.select(this)})}else{var N=false;for(var T=0,U=K.length;T<U;T++){var A=K[T];var L=t.getRendererConfig(A,"fill");if(L&&L.type==="chart"&&L.series){N=true;var D,M=L.series;for(var R=0,J=M.length;R<J;R++){D=M[R];D.width=L.width?L.width:0;D.height=L.height?L.height:0;if(D.type==="pie"){D.x=-D.width/2;D.y=-D.height/2}u.createChartData(D,A)}}}if(N){z.removeAllChildren(H.node());var I=j.newRenderersInstanceByData(t.itemsContainer,t,"scatter-point",K);if(I){for(var G,T=0,U=I.length;T<U;T++){G=I[T];t.nodesIns.push(G)}}}else{var F=H.selectAll(".scatter-point").data(K,function(X,W){return X.hasOwnProperty("id")?X.id:X.ins});var O=F.exit();O.remove();F.each(function(X){var W=X.ins;if(W){W.update(true);t.nodesIns.push(W)}});var B=F.enter();B.each(function(Z){if(!Z.hasOwnProperty("legendColor")){Z.legendColor=S}var Y=t.getRendererConfig(Z,"fill");var X=Z.hasOwnProperty("renderer")?Y.clazz:"circleShape";var W=j.newNodeInstance(X,[i.select(this),Z]);W.className("scatter-point");W.render();Z.ins=W;t.nodesIns.push(W)})}}t.renderPosition()};this.toString=function(){return("Scatter info: \n   width:"+t.width()+"\n   height:"+t.height()+"\n   layout:"+t.layout()+"\n   data:"+JSON.stringify(t.data(),null,4))};g.clazzName="Scatter";t.init()};g.struct=function(k){var j=k.view.component.charts.baseChart;j.struct(k);g.prototype=Object.create(j.prototype);g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(e,c,f){(function(g){var i=function(E,r){const J=ghca_charts.view.component.charts.baseChart;const D=ghca_charts.view.elements.plugins.tool.percentageInfo;const k=ghca_charts.view.elements.plugins.tool.toolTip;const H=ghca_charts.view.util.objectUtil;J.apply(this,arguments);var C=this,q=C.init,m=C.initAllContainers,l=C.addListeners,j=C.renderPosition;C.className("sunburst");var I={w:75,h:30,s:3,t:10};var F=300;var u=30;var G,A;var B=0;this.init=function(){q()};this.initAllContainers=function(){m();C.layout().radius(Math.min(C.width(),C.height())/2-35);C.sunburstContainer=C.mainContainer().append("g").attr("class","sunburst-Container");C.arcsContainer=C.sunburstContainer.append("g").attr("class","sunburst-arcsContainer");C.percentageContainer=C.sunburstContainer.append("g").attr("class","percentage-labelsContainer");C.navigationContainer=C.mainContainer().append("g").attr("class","navigation-Container");C.tipsContainer=C.mainContainer().append("g").attr("class","sunburst-tipsContainer");G=new D(C.percentageContainer,{value:""});G.config(C.data().percentageInfo);A=new k(C.tipsContainer,{});A.config(C.data().toolTip);C.renderPosition();C.sunburstContainer.on("mouseleave",p)};this.addListeners=function(){l()};this.refreshData=function(){};this.renderPosition=function(){j();C.sunburstContainer.attr("transform",function(){return"translate("+C.width()/2+","+C.height()/2+")"})};var v=g.arc().startAngle(function(L){return L.x0}).endAngle(function(L){return L.x1}).innerRadius(function(L){return Math.sqrt(L.y0)}).outerRadius(function(L){return Math.sqrt(L.y1)});this.update=function(){C.arcsContainer.selectAll("*").remove();C.navigationContainer.selectAll("*").remove();if(!C.data()||!H.isArray(C.data().nodes)||C.data().nodes.length===0){return}C.layout().visibleData(C.filterArrayByElementProperty(C.data().nodes,"visible",true));C.layout().update();C.arcsContainer.append("svg:circle").attr("r",C.layout().radius()).style("opacity",0);var L=C.arcsContainer.selectAll("path").data(C.layout().nodes()).enter().append("svg:path").attr("d",v).attr("display",function(M){return M.depth?null:"none"}).attr("fill-rule","evenodd").style("fill",function(M){return M.data.data.legendColor}).style("opacity",1).on("mouseover",K).on("mouseout",function(){A.hideTooltip()}).each(function(M){M.data.data.legendIns=g.select(this)});L.transition().duration(1000).attrTween("d",n);B=L.datum().value};function n(L,N){var N=g.interpolate({x0:0,x1:0,y0:0,y1:0},L);function M(P){var O=N(P);L.x0=O.x0,L.x1=O.x1,L.y0=O.y0,L.y1=O.y1;return v(L)}return M}function K(N){g.event.stopPropagation();var M=N.ancestors().reverse();var L=M.shift();s(N,L);z(N);t(M,L);C.arcsContainer.selectAll("path").style("opacity",0.3);C.arcsContainer.selectAll("path").filter(function(O){return(M.indexOf(O)>=0)}).style("opacity",1)}function z(L){A.data(L.data.data);A.render();A.showTooltip(C.tipsContainer)}function s(Q,M){var O=Math.sqrt(M.y1);var L=(100*Q.data.data.value/B).toPrecision(3);var R=L+"%";if(L<0.1){R="< 0.1%"}var N=R.length;var P=O*2/(N-1);G.config().label.config.fontSize=P;G.data({value:R});G.render();C.percentageContainer.style("visibility","")}function p(){A.hideTooltip();C.navigationContainer.style("visibility","hidden");C.arcsContainer.selectAll("path").on("mouseover",null);C.arcsContainer.selectAll("path").transition().duration(500).style("opacity",1).on("end",function(){g.select(this).on("mouseover",K)});C.percentageContainer.style("visibility","hidden")}function t(O){var N=Math.floor(C.width()/(I.w+I.s));var L=[];if(O.length>N){var M=0,P=O.length-N;for(M=0;M<P;M++){L.push(O[N+M])}O.splice(N-1,P)}o(O,0);o(L,1)}function o(N,O){var M=C.navigationContainer.selectAll(O==0?"g.first":"g.second").data(N,function(Q){return Q.data.data.name+Q.depth});M.exit().remove();var P=M.enter().append("svg:g").attr("class",O==0?"first":"second");P.append("svg:polygon").attr("points",function L(S,Q){var R=[];R.push("0,"+O*(I.h+I.s));R.push(I.w+","+O*(I.h+I.s));R.push(I.w+I.t+","+(I.h/2+O*(I.h+I.s)));R.push(I.w+","+(I.h+O*(I.h+I.s)));R.push("0,"+(I.h+O*(I.h+I.s)));if(Q>0){R.push(I.t+","+(I.h/2+O*(I.h+I.s)))}return R.join(" ")}).style("fill",function(Q){return Q.data.data.legendColor});P.append("svg:text").attr("x",(I.w+I.t)/2).attr("y",I.h*O+I.h/2).attr("dy","0.35em").attr("text-anchor","middle").text(function(Q){return Q.data.data.name});P.merge(M).attr("transform",function(R,Q){return"translate("+Q*(I.w+I.s)+", 0)"});C.navigationContainer.style("visibility","")}this.filterArrayByElementProperty=function(M,O,Q){var L=[],S=[];function P(U){var T=S.length;while(T--){if(S[T]===U){return true}}return false}var N=C.data()["idField"],R=C.data()["parentField"];M.forEach(function(T){if((T[O]==undefined||T[O]==true)&&!P(T[R])){L.push(T)}else{S.push(T[N])}});return L};i.clazzName="sunburst";this.init()};i.struct=function(k){var j=k.view.component.charts.baseChart;j.struct(k);i.prototype=Object.create(j.prototype);i.prototype.constructor=i};e.exports=i}.call(c,f(2)))},function(e,c,f){(function(i){var g=function(am,ag){const ap=ghca_charts.view.component.baseComponent;const af=ghca_charts.view.component.charts.baseChart;const ah=ghca_charts.layout.topoLayout;const ad=ghca_charts.view.util.classFactory;const ac=ghca_charts.view.util.dataParser;const aa=ghca_charts.view.util.constant;const v=ghca_charts.view.util.objectUtil;const ai=ghca_charts.events.BaseEvent;const M=ghca_charts.view.elements.plugins.nodes.node;const R=ghca_charts.view.util.math;const ao=ghca_charts.view.util.eventUtil;af.apply(this,arguments);var D=this,u=D.init,s=D.initAllContainers,ab=D.addListeners,m=D.renderPosition;superRefreshData=D.refreshData,superSetData=D.setData,isValidateMode=false;D.className("seriesTopo");D.addAttributes("showLevel","mode","focusEffect");var Z=g.SHOW_ALL_LEVEL_NODES;this.showLevel=function(aq){if(!arguments.length){return Z}Z=aq;return this};var E="normal";this.mode=function(aq){if(!arguments.length){return E}if(E!==aq){isValidateMode=true}E=aq;return this};var Q=true;this.focusEffect=function(aq){if(!arguments.length){return Q}Q=aq;return this};this.isEditMode=function(){return E==="edit"};var J=[];this.selectedItems=function(aq){if(!arguments.length){return J}J=aq;return this};this.init=function(){u();D.nodes=D.layout().nodes();D.links=D.layout().links();D.groups=[];D.nodesIns=[];D.linksIns=[];D.groupsIns=[];D.addNodes(D.data().nodes);D.addLinks(D.data().links);D.addGroups(D.data().groups);D.visibleItems(D.nodes)};this.initAllContainers=function(){s();var aq=new ap();aq.className("topo-groupsContainer");D.addChild(aq);aq.mainContainer().attr("pointer-events","none");D.groupsContainer=aq;var at=new ap();at.className("topo-linksContainer");D.addChild(at);D.linksContainer=at;var ar=new ap();ar.className("topo-nodesContainer");D.addChild(ar);D.nodesContainer=ar};this.addListeners=function(){ab();if(!D.layout().fixed()){D.model.on("tick",D.tickHandler);D.model.on("end",D.tickEndHandler)}D.addEventListener(ai.MODE_CHANGE,ak);D.addEventListener(ai.SEARCH_TEXT,l);D.addEventListener(ai.TOPO_NODE_FOCUS_IN,C)};this.refreshData=function(){superRefreshData();var ax=D.data(),ar=ax.nodes,ay=D.showLevel();for(var aw,av,au,at=0,aq=ar.length;at<aq;at++){aw=ar[at];if(aw.hasOwnProperty("visible")){continue}av=aw.level===undefined?0:aw.level;au=aw.enabledExpand===undefined?false:aw.enabledExpand;if(av<ay){aw.visible=true;if(au){aw.isExpanded=true}}else{if(av==ay){aw.visible=true;if(au){aw.isExpanded=false}}else{aw.visible=false;if(au){aw.isExpanded=false}}}}};this.renderPosition=function(){m();var ay=D.nodesIns;for(var au,aw=0,aq=ay.length;aw<aq;aw++){au=ay[aw];au.mainContainer().each(function(az){au.x(az.x);au.y(az.y);au.renderTransform()})}var av=D.linksIns;for(var at,aw=0,aq=av.length;aw<aq;aw++){at=av[aw];if(at.normalChild()){at.normalChild().update("topo")}else{at.render()}}t();var ax=D.groupsIns;for(var ar,aw=0,aq=ax.length;aw<aq;aw++){ar=ax[aw];if(ar.normalChild()){ar.normalChild().update()}else{ar.render()}}q()};this.update=function(){D.refreshData();D.visibleItems(D.filterArrayByElementProperty(D.nodes,"visible",true));D.layout().update();var aA=D.linksContainer;aA.removeAllChildren();D.linksIns.length=0;var av=D.nodesContainer;av.removeAllChildren();D.nodesIns.length=0;var aE=D.groupsContainer;aE.removeAllChildren();D.groupsIns.length=0;var ay=D.visibleItems();for(var aI=0,aK=ay.length;aI<aK;aI++){var aq=ay[aI];var az=D.getRendererConfig(aq,"fill");if(az&&az.type==="chart"&&az.series){var at,aB=az.series;for(var aG=0,ax=aB.length;aG<ax;aG++){at=aB[aG];at.width=az.width?az.width:0;at.height=az.height?az.height:0;if(at.type==="pie"){az.x=-at.width/2;az.y=-at.height/2}ac.createChartData(at,aq)}}}var aw=ad.newRenderersInstanceByData(av,D,"nodeContainer",ay);if(aw){for(var au,aI=0,aK=aw.length;aI<aK;aI++){au=aw[aI];au.addEventListener("expandTool_collapsed",P);au.addEventListener("click",N);au.mainContainer().call(i.drag().on("start",D.node_dragStartHandler).on("drag",D.node_dragHandler).on("end",D.node_dragEndHandler));D.nodesIns.push(au)}}var ar=D.getVisibleLinks(D.links);var aF=ad.newRenderersInstanceByData(aA,D,"linkContainer",ar,false,"stroke");if(aF){for(var aD,aI=0,aK=aF.length;aI<aK;aI++){aD=aF[aI];D.linksIns.push(aD)}}var aH=D.groups;t();var aJ=ad.newRenderersInstanceByData(aE,D,"groupContainer",aH);if(aJ){for(var aL,aI=0,aK=aJ.length;aI<aK;aI++){aL=aJ[aI];D.groupsIns.push(aL)}}if(D.layout().fixed()){D.renderPosition()}var aC=setTimeout(function(){clearTimeout(aC);K()},0)};this.setData=function(ar){var aq=superSetData(ar);D.layout().nodes().length=0;D.layout().links().length=0;D.nodes.length=0;D.links.length=0;D.groups.length=0;D.nodesIns.length=0;D.linksIns.length=0;D.groupsIns.length=0;D.addNodes(D.data().nodes);D.addLinks(D.data().links);D.addGroups(D.data().groups);return aq};var t=function(){var au=D.groups;for(var ar,at=0,aq=au.length;at<aq;at++){ar=au[at];k(ar)}};var k=function(ar){if(ar.visible===false){ar.path="";ar.pathPoints=[];return}var aA=ar.nodes,aC=[],ay=(ar.data&&ar.data.hasOwnProperty("radius"))?ar.data.radius:20,az=(ar.data&&ar.data.hasOwnProperty("extendedSize"))?ar.data.extendedSize:10;for(var ax,aq,au,aB,av,at=0,aw=aA.length;at<aw;at++){aq=aA[at];if(!aq.visible||!aq.ins){continue}ax=aq.ins;au=ax instanceof ap?ax.node().getBBox():ax.mainPlugin.el.node().getBBox();aB=au.width/2+az;av=au.height/2+az;aC.push([aq.x-aB,aq.y-av]);aC.push([aq.x+aB,aq.y-av]);aC.push([aq.x+aB,aq.y+av]);aC.push([aq.x-aB,aq.y+av])}var aD=R.pointsToPolygonHullRoundPath(aC,ay,false);ar.path=aD;ar.pathPoints=aC};var X=function(){for(var ar,au=D.nodesIns,at=0,aq=au.length;at<aq;at++){ar=au[at];ar.mainContainer().call(i.drag().on("start",D.node_dragStartHandler).on("drag",D.node_dragHandler).on("end",D.node_dragEndHandler))}};var I=function(){for(var ar,au=D.nodesIns,at=0,aq=au.length;at<aq;at++){ar=au[at];ar.mainContainer().on("mousedown.drag",null)}};var A=function(){D.addDragListeners();X()};var W=function(){D.removeDragListeners();I()};this.toString=function(){return("Topology info: \n   width:"+D.width()+"\n   height:"+D.height()+"\n   layout:"+D.layout()+"\n   showLevel:"+D.showLevel()+"\n   data:"+JSON.stringify(D.data(),null,4))};var l=function(ar){var at=ar.detail;var aq=D.searchNodesByName(at);D.centerNodesAndSelected(aq,true)};var C=function(aq){var ar=aq.detail;D.centerAndFocusInNode(ar)};var N=function(ar){if(D.isEditMode()||!D.focusEffect()){return}var at=i.select(ar.currentTarget).data();if(at.length===0){return}var aq=at[0];D.centerAndFocusInNode(aq)};var P=function(ar){ar.stopImmediatePropagation();var aq=ar.detail;if(!aq){return}D.expandOrCollapseNodeInUI(aq)};this.tickHandler=function(){D.renderPosition();D.mainContainer().node().dispatchEvent(ao.createCustomEvent(ai.EAGLE_EYE_DRAG_CHANGE,true,true,{enable:false}))};this.tickEndHandler=function(){D.mainContainer().node().dispatchEvent(ao.createCustomEvent(ai.EAGLE_EYE_DRAG_CHANGE,true,true,{enable:true}))};this.node_dragStartHandler=function(aq){if(al){return}if(D.layout().fixed()){aq.x=i.event.x;aq.y=i.event.y;aq.fx=aq.x;aq.fy=aq.y;D.renderPosition()}else{if(!i.event.active){D.model.alphaTarget(0.3).restart()}aq.fx=aq.x;aq.fy=aq.y}};this.node_dragHandler=function(aq){if(al){return}if(D.layout().fixed()){aq.x=i.event.x;aq.y=i.event.y;aq.fx=aq.x;aq.fy=aq.y;D.renderPosition()}else{aq.fx=i.event.x;aq.fy=i.event.y}};this.node_dragEndHandler=function(aq){if(al){return}if(D.layout().fixed()){aq.x=i.event.x;aq.y=i.event.y;aq.fx=aq.x;aq.fy=aq.y;D.renderPosition()}else{if(!i.event.active){D.model.alphaTarget(0)}aq.fx=null;aq.fy=null}};this.setSelected=function(av,aw){if(aw){for(var au=0,aq=aw.length;au<aq;au++){aw[au].selected(av)}}else{var at=D.nodes;for(var au=0,aq=at.length;au<aq;au++){at[au].ins.selected(av)}var ar=D.links;for(var au=0,aq=ar.length;au<aq;au++){ar[au].ins.selected(av)}}};this.setSelectedItemsInSelectArea=function(){var aB=D.editCon.mainContainer().select("rect.select");var at=aB.node();if(at){J.length=0;var av,aC,ay,aA,aq,az,au,aE,ar=D.nodes,aG=D.links,aB={},aD=at.getBBox();for(var aw=0,ax=ar.length;aw<ax;aw++){av=ar[aw];ay=av.ins;aA=ay instanceof ap?ay.node().getBBox():ay.mainPlugin.el.node().getBBox();aB.x=av.x+aA.x;aB.y=av.y+aA.y;aB.width=aA.width;aB.height=aA.height;if(R.isCollisionInTwoRects(aD,aB)){ay.selected(true);J.push(av)}else{ay.selected(false)}}var aF="M"+aD.x+","+aD.y+" L"+(aD.x+aD.width)+","+aD.y+" L"+(aD.x+aD.width)+","+(aD.y+aD.height)+" L"+(aD.x)+","+(aD.y+aD.height)+"Z";for(var aw=0,ax=aG.length;aw<ax;aw++){aC=aG[aw];ay=aC.ins;aq=aC.source;az=aC.target;if(R.isPointInsideBBox(aq.x,aq.y,aD)&&R.isPointInsideBBox(az.x,az.y,aD)){aE=true}else{au=Raphael.pathIntersection(ay.el.select("path").attr("d"),aF);if(au.length>0){aE=true}else{aE=false}}if(aE){ay.selected(true);J.push(av)}else{ay.selected(false)}}}};this.centerAndFocusInNode=function(){if(arguments.length===0){return}var aq;if(v.isString(arguments[0])){aq=D.findNode(arguments[0])}else{if(v.isObject(arguments[0])){aq=arguments[0]}}if(!aq){return}D.centerNodesAndSelected(aq);D.focusInNode(aq)};this.focusInNode=function(av){if(!av||!av.id){return}var ax,aA,az,au,aq,at,aC,aE,ar=av.id,ay=0.2,aF=D.nodesIns,aB=D.linksIns,aD=[];var aw=D.animation()?300:0;for(ax=0,aA=aF.length;ax<aA;ax++){au=aF[ax];au.mainContainer().attr("opacity",ay);if(au.mainContainer().data()[0].id===ar){az=aF[ax]}}for(ax=0,aA=aB.length;ax<aA;ax++){aq=aB[ax];aq.mainContainer().attr("opacity",ay)}at=az.mainContainer().data()[0];aD.push(at.ins);aE=at.links;for(ax=0,aA=aE.length;ax<aA;ax++){aC=aE[ax];aD.push(aC.ins);if(aC.target&&aC.target.ins){aD.push(aC.target.ins)}if(aC.source&&aC.source.ins){aD.push(aC.source.ins)}}for(ax=0,aA=aD.length;ax<aA;ax++){az=aD[ax];if(az instanceof ap){az=az.mainContainer()}else{az=i.select(az.el.node().parentNode)}az&&az.attr("opacity",1)}};this.focusOutAllNodes=function(){if(!D.nodesIns||!D.linksIns){return}var av,aq,at,ar=1,aw=D.nodesIns,au=D.linksIns;for(av=0,aq=aw.length;av<aq;av++){at=aw[av];at.mainContainer().attr("opacity",ar)}for(av=0,aq=au.length;av<aq;av++){at=au[av];at.mainContainer().attr("opacity",ar)}};this.centerNodesAndSelected=function(){var aG=D.nodes;var at=arguments.length>1?arguments[1]===true:false;var ax=[];for(var aK=0,aL=aG.length;aK<aL;aK++){ax.push(aG[aK].ins)}D.setSelected(false,ax);var ay=1,aJ=NaN,aI=NaN;if(v.isArray(arguments[0])){aG=arguments[0];if(aG.length===0){return}var aR=NaN,aP=NaN,aQ=NaN,aN=NaN,aE=NaN,aF=NaN,az=NaN,aq=NaN;for(var aH,av,aK=0,aL=aG.length;aK<aL;aK++){aH=aG[aK];av=aH.ins;if(at){av.selected(true)}if(isNaN(aR)||aH.x<aR){aR=aH.x;aE=av.actualWidth()}if(isNaN(aP)||aH.y<aP){aP=aH.y;az=av.actualHeight()}if(isNaN(aQ)||aH.x>aQ){aQ=aH.x;aF=av.actualWidth()}if(isNaN(aN)||aH.y>aN){aN=aH.y;aq=av.actualHeight()}}aJ=(aQ+aR)/2,aI=(aN+aP)/2;var au=1,ar=1,aO=aQ-aR+(aE+aF)/2,aw=aN-aP+(az+aq)/2;if(aO>D.width()){au=D.width()/aO}if(aw>D.height()){ar=D.height()/aw}ay=au>ar?ar:au;D.scaleX(ay);D.scaleY(ay)}else{if(v.isObject(arguments[0])){var aH=arguments[0];var av=aH.ins;if(at){av.selected(true)}aJ=aH.x;aI=aH.y}}if(isNaN(aJ)||isNaN(aI)){return}var aB=D.x(),aA=D.y(),aD=D.width()/2,aC=D.height()/2;aB=(aD-aJ*ay);aA=(aC-aI*ay);D.x(aB);D.y(aA);D.layout().model().stop();var aM=i.transition().duration(D.animation()?500:0).ease(i.easeExpOut);D.renderTransform(aM)};this.addNode=function(aq){D.nodes.push(aq)};this.addNodes=function(ar){if(v.isArray(ar)){for(var at=0,aq=ar.length;at<aq;at++){D.addNode(ar[at])}}};this.addLink=function(aq){aq.source=D.findNode(aq.source);aq.target=D.findNode(aq.target);var ar=aq.source,at=aq.target;if(!ar.hasOwnProperty("links")){ar.links=[]}var au=D.refreshLineIndex(aq);aq.lineIndex=au>0?au:0;ar.links.push(aq);if(!at.hasOwnProperty("links")){at.links=[]}at.links.push(aq);D.links.push(aq)};this.addLinks=function(ar){if(v.isArray(ar)){for(var at=0,aq=ar.length;at<aq;at++){D.addLink(ar[at])}}};this.removeNode=function(au){var ar=0,at=D.findNode(au),aq=D.links;while(ar<aq.length){aq[ar]["source"]===at||aq[ar]["target"]===at?aq.splice(ar,1):++ar}D.nodes.splice(D.findNodeIndex(au),1);D.removeNodeFromAllGroup(at)};this.removeNodes=function(at){if(v.isArray(at)){for(var ar=0,aq=at.length;ar<aq;ar++){D.removeNode(at[ar])}}};this.removeLink=function(at){var aq=D.links;var ar=aq.indexOf(at);if(ar!==-1){aq.splice(ar,1)}var au=at.source,av=at.target;D.removeLinkFromNode(au,at);D.removeLinkFromNode(av,at);D.refreshLineIndex(at)};this.removeLinks=function(ar){if(v.isArray(ar)){for(var at=0,aq=ar.length;at<aq;at++){D.removeLink(ar[at])}}};this.removeLinkFromNode=function(av,au){if(av&&av.links){links=av.links;for(var ar,at=0,aq=links.length;at<aq;at++){ar=links[at];if(ar===au){links.splice(at,1);break}}}};this.removeChildNodes=function(ar){var au=D.findNode(ar),aq=D.nodes,aA=null,aC=D.links,av=[],aB=[];aC.forEach(function(aE,aD){if(aE.source===au){av.push(aD);aB.push(aE.target)}});av.reverse().forEach(function(aD){aC.splice(aD,1)});var ay=function(aF){var aE=aC.length;for(var aD=aE-1;aD>=0;aD--){if(aC[aD]["source"]===aF){var aG=aC[aD]["target"];aC.splice(aD,1);aq.splice(D.findNodeIndex(aF.id),1);ay(aG)}}};aB.forEach(function(aD){ay(aD)});for(var ax=aq.length-1,az=aC.length;ax>=0;ax--){var at=false;au=aq[ax];for(var aw=0;aw<az;aw++){aA=aC[aw];if(aA.source===au||aA.target===au){at=true}}if(!at){aq.splice(ax,1)}}};this.findNode=function(au){var ar=D.nodes;for(var at=0,aq=ar.length;at<aq;at++){if(ar[at]["id"]===au){return ar[at]}}return null};this.findNodeIndex=function(au){var ar=D.nodes;for(var at=0,aq=ar.length;at<aq;at++){if(ar[at]["id"]===au){return at}}return -1};this.refreshLineIndex=function(au){var at,ax=0,av=au.source,aw=au.target,ay=av.links;for(var ar=0,aq=ay.length;ar<aq;ar++){at=ay[ar];if((at.target===av||at.source===av)&&(at.target===aw||at.source===aw)){at.lineIndex=ax;ax++}}return ax};this.addGroup=function(av){var ar=av.nodes;for(var au,at=0,aq=ar.length;at<aq;at++){au=D.findNode(ar[at]);ar[at]=au}D.groups.push(av)};this.addGroups=function(ar){if(v.isArray(ar)){for(var at=0,aq=ar.length;at<aq;at++){D.addGroup(ar[at])}}};this.removeGroup=function(at){var aq=D.groups;var ar=aq.indexOf(at);if(ar!==-1){aq.splice(ar,1)}};this.addNodeToGroup=function(at,au){if(!au.nodes){au.nodes=[]}var ar=au.nodes;var aq=ar.indexOf(at);if(aq===-1){ar.push(at)}};this.removeNodeFromGroup=function(at,au){var ar=au.nodes;var aq=ar.indexOf(at);if(aq!==-1){ar.splice(aq,1)}};this.removeNodeFromAllGroup=function(au){var ar=D.groups;for(var av,at=0,aq=ar.length;at<aq;at++){av=ar[at];D.removeNodeFromGroup(au,av)}};this.findAllChildNodes=function(av,aq){var ar=[];var at=D.findNode(av);if(!at){return ar}if(aq===undefined){aq=true}var au;if(aq){au=function(aw){D.nodes.forEach(function(ax){if(ax.parentId===aw){ar.push(ax);au(ax.id)}})};au(av)}else{au=function(ax,aw){var ay=aw||ax.isExpanded===undefined||ax.isExpanded===true;D.nodes.forEach(function(az){if(ay&&az.parentId===ax.id){ar.push(az);au(az,false)}})};au(at,true)}return ar};this.setNodesVisible=function(ar,au){if(!ar||ar.length===0){return}if(au===undefined){au=true}for(var at=0,aq=ar.length;at<aq;at++){ar[at].visible=au}};this.expandNode=function(at,ar){var aq=D.findAllChildNodes(at,ar===undefined?false:ar);D.setNodesVisible(aq,true)};this.collapseNode=function(ar){var aq=D.findAllChildNodes(ar,true);D.setNodesVisible(aq,false)};this.expandOrCollapseNode=function(aq){if(!aq.enabledExpand){return}if(aq.isExpanded){D.collapseNode(aq.id);aq.isExpanded=false}else{D.expandNode(aq.id,false);aq.isExpanded=true}};this.getVisibleLinks=function(at){var ar=[];if(!at||at.length===0){return ar}var av;for(var au=0,aq=at.length;au<aq;au++){av=at[au];if(av.source.visible&&av.target.visible){if(av.hasOwnProperty("visible")){if(av.visible){ar.push(av)}}else{ar.push(av)}}}return ar};this.searchNodesByName=function(aw){var ar=[];if(aw===undefined||aw===null||aw.replace(/ /g,"")===""){return ar}var at=D.nodes;for(var av,au=0,aq=at.length;au<aq;au++){av=at[au];if(av.name.indexOf(aw)>-1){ar.push(av)}}return ar};var Y,p,H,al=false,B=false,o=0,j=0;var ak=function(aq){D.mode(aq.detail?"edit":"normal");K()};var K=function(){if(!isValidateMode){return}isValidateMode=false;if(D.isEditMode()){D.focusOutAllNodes();B=D.dragable();D.dragable(false);O();D.removeDragListeners();D.addEventListener(ai.ADD_ITEMS,F);D.addEventListener(ai.REMOVE_ITEMS,an);D.addEventListener(ai.REOMVE_ALL_SELECTED_ITEMS,n);D.parent().mainContainer().on("mousedown.edit",G)}else{al=false;D.dragable(B);V();D.removeEventListener(ai.ADD_ITEMS,F);D.removeEventListener(ai.REMOVE_ITEMS,an);D.removeEventListener(ai.REOMVE_ALL_SELECTED_ITEMS,n);D.parent().mainContainer().on("mousedown.edit",null);A()}};var F=function(aq){var ar=aq.detail;if(ar.type==="node"){D.addNodesInUI(ar.data)}else{if(ar.type==="link"){W();D.getRendererConfig(ar.data,"stroke");p=ar.data;al=true}}};var G=function(){var ar=false,au=i.event.target;if(al){H=null;var av=au.__data__;if(av&&av.ins){var aq=av.ins;if(aq instanceof M){ar=true;H=av;U(av.x,av.y,p)}}}else{if(D.parent().bgRect.node()===au){ar=true;var at=i.mouse(D.editCon.bgNode());aj(at[0],at[1])}}if(ar){D.parent().mainContainer().attr("cursor","default");i.select(window).on("mouseup.edit",L);i.select(window).on("mousemove.edit",z)}};var z=function(){if(al){var aq=i.mouse(D.bgNode());S(H.x,H.y,aq[0],aq[1])}else{ae();D.setSelectedItemsInSelectArea()}};var L=function(){i.select(window).on("mousemove.edit",null);i.select(window).on("mouseup.edit",null);var ar=i.event.target;if(al){T();var at=ar.__data__;if(at&&at.ins){var aq=at.ins;if(H&&aq instanceof M){p.source=H.id;p.target=at.id;D.addLinkInUI(p)}}X()}else{D.setSelectedItemsInSelectArea();r()}};var an=function(aq){};var n=function(aq){D.removeAllSelectedInUI()};var O=function(){var aq=new ap();aq.className("edit-container");aq.percentWidth(100);aq.percentHeight(100);D.addChild(aq);aq.mainContainer().attr("pointer-events","none");D.editCon=aq};var V=function(){if(D.editCon){D.removeChild(D.editCon);delete D.editCon}};var aj=function(aq,au){if(D.editCon){var ar=D.editCon.mainContainer();var at=ar.select("rect.select");if(at.node()===null){o=aq;j=au;ar.append("rect").attr("class","select").attr("x",o).attr("y",j).attr("stroke","#0078d7").attr("stroke-width",1).attr("fill","#0078d7").attr("fill-opacity",0.1)}}};var ae=function(){if(D.editCon){var aq=D.editCon.mainContainer();var at=aq.select("rect.select");if(at.node()){var av,au,ar=i.mouse(aq.node());if(ar[0]<o){w=o-ar[0];av=ar[0]}else{w=ar[0]-o;av=o}if(ar[1]<j){h=j-ar[1];au=ar[1]}else{h=ar[1]-j;au=j}at.attr("x",av).attr("y",au).attr("width",w).attr("height",h)}}};var r=function(){if(D.editCon){D.editCon.mainContainer().select("rect.select").remove()}};var U=function(aq,ar,au){if(!al){return}au.source={x:aq,y:ar};au.target={x:aq+1,y:ar+1};var at;if(au.renderer){at=D.data().renderers[au.renderer]}Y=ad.newLinkInstance(at.clazz,[D.linksContainer.mainContainer(),au]);Y.config(at.config);Y.render()};var S=function(ar,au,aq,at){if(al&&Y){var av=Y.itemData();av.source.x=ar;av.source.y=au;av.target.x=aq;av.target.y=at;Y.update()}};var T=function(){if(!al){return}if(Y){Y.el.remove();Y=null}al=false};this.addNodeInUI=function(aq){D.addNode(aq);D.update()};this.addNodesInUI=function(aq){D.addNodes(aq);D.update()};this.addLinkInUI=function(aq){D.addLink(aq);D.update()};this.addLinksInUI=function(aq){D.addLinks(aq);D.update()};this.removeNodeInUI=function(aq){D.removeNode(aq);D.update()};this.removeNodesInUI=function(aq){D.removeNodes(aq);D.update()};this.removeLinkInUI=function(aq){D.removeLink(aq);D.update()};this.removeLinksInUI=function(aq){D.removeLinks(aq);D.update()};this.removeAllSelectedInUI=function(){var at,aq=[],ar=[];D.nodesIns.forEach(function(au){at=au.normalChild();if(at&&at.selected()){ar.push(at.el.data()[0].id)}});D.linksIns.forEach(function(au){at=au.normalChild();if(at&&at.selected()){aq.push(at.el.data()[0])}});D.removeNodes(ar);D.removeLinks(aq);D.update()};this.removeChildNodesInUI=function(aq){D.removeChildNodes(aq);D.update()};this.expandNodeInUI=function(ar,aq){D.expandNode(ar,aq);D.update()};this.collapseNodeInUI=function(aq){D.collapseNode(aq);D.update()};this.expandOrCollapseNodeInUI=function(aq){if(!aq.enabledExpand){return}D.expandOrCollapseNode(aq);D.update()};function q(){D.mainContainer().node().dispatchEvent(ao.createEvent(ai.CONTENT_CHANGE,true,true))}g.clazzName="Topology";this.init()};g.struct=function(k){var j=k.view.component.charts.baseChart;j.struct(k);g.prototype=Object.create(j.prototype);g.prototype.constructor=g};g.SHOW_ALL_LEVEL_NODES=99999;g.SHOW_FIRST_LEVEL_NODES=0;e.exports=g}.call(c,f(2)))},function(e,c,f){(function(g){var i=function(u,t,q){const F=ghca_charts.view.component.charts.baseChart;const v=ghca_charts.view.util.classFactory;const n=ghca_charts.view.util.constant;const G=ghca_charts.view.util.eventUtil;const l=ghca_charts.events.BaseEvent;const C=ghca_charts.view.util.objectUtil;F.apply(this,arguments);var s=this,o=s.init,m=s.initAllContainers,k=s.addListeners;s.className("tree");var j=false;var r=null;var p=null;var s=this;var D=g.map();this.nodeInsMap=function(){return D};var A=g.map();this.linkInsMap=function(){return A};var E=function(J,I){return I.data.name.localeCompare(J.data.name)};this.sort=function(I){if(arguments.length){E=I}};this.setDragPosition=function(K,L){K.attr("transform","translate("+[L.x,L.y]+")");var J=L.children;var I=s.linkInsMap().get(L.data[s.idKey()]);if(I){I.render()}if(J){J.forEach(function(M){I=s.linkInsMap().get(M.data[s.idKey()]);if(I){I.render()}})}};this.node_dragStartHandler=function(I){I.x0=I.x;I.y0=I.y;j=true;g.event.sourceEvent.stopPropagation()};this.node_dragHandler=function(I){if(j){r=I;if(r){I.x=g.event.x,I.y=g.event.y;I.data.x=I.x,I.data.y=I.y;s.setDragPosition(g.select(this),I)}}};this.fireContentChange=function(){s.mainContainer().node().dispatchEvent(G.createEvent(l.CONTENT_CHANGE,true,true))};this.node_dragEndHandler=function(I){if(s.editable()){if(I.parent&&r&&p&&p!=r&&r.parent!=p){r.data[s.parentKey()]=p.data[s.idKey()];s.update()}else{if(r){I.x=I.x0,I.y=I.y0;s.setDragPosition(g.select(this),I)}}}r=null;j=false};var z=false;this.editable=function(I){if(!arguments.length){return z}z=I;return this};var H="id";this.idKey=function(I){if(!arguments.length){return H}H=I;return this};var B="parentId";this.parentKey=function(I){if(!arguments.length){return B}B=I;return this};this.init=function(J){o(J);var I=s.data();s.idKey(I.idField);s.parentKey(I.parentField);s.editable(I.editable)};this.initAllContainers=function(){m();s.treeContainer=s.mainContainer().append("g").attr("class","tree-Container");s.linksContainer=s.treeContainer.append("g").attr("class","tree-linksContainer");s.nodesContainer=s.treeContainer.append("g").attr("class","tree-nodesContainer")};this.addListeners=function(){k();s.mainContainer().node().addEventListener("expandTool_collapsed",function(J){event.stopImmediatePropagation();var I=J.detail;I.data.collapsed=I.collapsed;s.update()})};this.createLinkIns=function(K,L){var I=s.linkInsMap().get(L.data[s.idKey()]);if(!I){var J;if(L.data.edgeRenderer){J=s.data().renderers[L.data.edgeRenderer]}I=v.newLinkInstance(J.clazz,[K,L]);I.config(J.config);s.linkInsMap().set(L.data[s.idKey()],I)}else{I.data(L)}};this.createNodeIns=function(K,L){var I=s.nodeInsMap().get(L.data[s.idKey()]);if(!I){var J;if(L.data.nodeRenderer){J=s.data().renderers[L.data.nodeRenderer]}I=v.newNodeInstance(J.clazz,[K,L]);I.config(J.config);if(I.hasOwnProperty("ownerData")){I.ownerData(s.data())}s.nodeInsMap().set(L.data[s.idKey()],I)}else{I.data(L)}L.ins=I;L.data.legendIns=I};this.updatePosition=function(){var I=s.nodesContainer.selectAll("g.tree-nodeContainer");I.transition().duration(function(J){return J.depth*300}).attr("transform",function(J){return"translate("+[J.x,J.y]+")"}).on("start",function(K){var J=s.nodeInsMap().get(K.data[s.idKey()]);if(J){J.render()}}).on("end",function(K){var J=s.linkInsMap().get(K.data[s.idKey()]);if(J){J.render()}})};this.updateView=function(){var J=s.layout().treeRootNode();var M=s.nodesContainer.selectAll("g.tree-nodeContainer").data(J.descendants(),function(O){return O.data[s.idKey()]});M.exit().each(function(O){s.nodeInsMap().remove(O.data[s.idKey()])});M.exit().remove();M.enter().append("g").attr("class","tree-nodeContainer").on("mouseover",function(O){p=O}).on("mouseout",function(){p=null}).call(g.drag().on("start",s.node_dragStartHandler).on("drag",s.node_dragHandler).on("end",s.node_dragEndHandler));var L=s.nodesContainer.selectAll("g.tree-nodeContainer");L.each(function(O){s.createNodeIns(g.select(this),O)});var I=s.linksContainer.selectAll("g.tree-linkContainer").data(J.descendants().slice(1),function(O){return O.data[s.idKey()]});I.exit().each(function(O){s.linkInsMap().remove(O.data[s.idKey()])});I.exit().remove();I.enter().append("g").attr("class","tree-linkContainer");var K=s.linksContainer.selectAll("g.tree-linkContainer");K.each(function(O){s.createLinkIns(g.select(this),O)});var N=function(){var O=arguments[0];O.updatePosition();setTimeout(O.fireContentChange,1000)};if(Window.Concurrent){Concurrent.Thread.create(N,s)}else{N(s)}};this.update=function(){if(!s.data()||!C.isArray(s.data().nodes)||s.data().nodes.length===0){return}s.layout().size([s.width(),s.height()/2]);if(s.data().nodeSize){s.layout().nodeSize(s.data().nodeSize)}var I=g.stratify().id(function(K){return K[H]}).parentId(function(K){return K[B]})(s.data().nodes);I.descendants().forEach(function(M){var N=M.data;if(N.visible===false){var L=M.parent,K=L?L.children:undefined;if(K){K.splice(K.indexOf(M),1)}}if(N.collapsed===true){M.children?M.children=undefined:delete M.children}});I.sort(s.sort());s.layout().treeRootNode(I);var J=function(){var K=arguments[0];K.layout().update();K.updateView()};if(Window.Concurrent){Concurrent.Thread.create(J,s)}else{J(s)}};i.clazzName="Tree";this.init(u)};i.struct=function(k){var j=k.view.component.charts.baseChart;j.struct(k);i.prototype=Object.create(j.prototype);i.prototype.constructor=i};e.exports=i}.call(c,f(2)))},function(e,c,f){(function(g){var i=function(s,o){const B=ghca_charts.view.component.baseComponent;const C=ghca_charts.view.component.charts.baseChart;const u=ghca_charts.view.util.classFactory;const D=ghca_charts.view.util.colorUtil;const v=ghca_charts.view.util.objectUtil;C.apply(this,arguments);var t,r=this,z=true,n=r.init,l=r.initAllContainers,k=r.addListeners,j=r.renderPosition,q=r.refreshData,E=g.scaleLinear();yScale=g.scaleLinear();r.className("seriesTreemap");var A=g.map();this.nodeInsMap=function(){return A};this.init=function(){n();var F=r.data().data;r.visibleItems(F);r.itemsIns=[]};this.initAllContainers=function(){l();if(!r.itemsContainer){var G=new B();G.className("treemap-ItemsContainer");var F=r.layout().size();G.width(F[0]);G.height(F[1]);r.addChild(G);G.bgRect.attr("id","treemap-bg"+G.id());r.itemsContainer=G}};this.addListeners=function(){k()};this.refreshData=function(){q();var G=r.data().data;for(var I,H=0,F=G.length;H<F;H++){I=G[H];if(!I.hasOwnProperty("visible")){I.visible=true}}};this.renderPosition=function(){j();var G=r.itemsContainer;if(G){var F=r.layout().size();G.x((r.width()-F[0])/2);G.y((r.height()-F[1])/2);G.width(F[0]);G.height(F[1]);G.renderTransform()}};this.update=function(){if(!r.data()||!v.isArray(r.data().data)||r.data().data.length===0){return}r.refreshData();var G=r.data().data;r.visibleItems(r.filterArrayByElementProperty(G,"visible",true));r.layout().update();var M=r.layout().leaves();t=r.layout().root();var L=r.itemsContainer;var F=L.mainContainer();var K=L.bgRect.attr("id");F.append("clipPath").attr("id",function(N){return"treemap-clip-"+K}).append("use").attr("xlink:href",function(N){return"#"+K});F.attr("clip-path",function(N){return"url(#treemap-clip-"+K+")"});var H=F.selectAll("g.treemap-item").data(M,function(N){return N.data[r.layout().stratifyId()]});H.transition().duration(r.animation()?500:0).attr("transform",function(N){return"translate("+N.x0+","+N.y0+")"});H.each(function(O){var N=r.nodeInsMap().get(O.data.path);if(N){N.update(O)}});var J=H.enter().append("g").attr("class","treemap-item").attr("transform",function(N){return"translate("+N.x0+","+N.y0+")"}).on("click",m);J.each(function(Q){var P=r.getRendererConfig(Q.data,"fill");var O=(P&&P.clazz)?P.clazz:"treemapNode";var N=u.newNodeInstance(O,[g.select(this),Q]);N.isChartFirstInit(z);N.render();r.nodeInsMap().set(Q.data.path,N);Q.data.legendIns=N});var I=H.exit();I.remove();r.renderPosition();z=false};this.toString=function(){return("Treemap info: \n   width:"+r.width()+"\n   height:"+r.height()+"\n   layout:"+r.layout()+"\n   data:"+JSON.stringify(r.data(),null,4))};var m=function(F){return p(t==F.parent?r.layout().root():F.parent)};var p=function(H){var J=H.x0;var I=H.y0;var N=H.x1-H.x0;var L=H.y1-H.y0;var M=r.layout().size();var G=M[0]/N,F=M[1]/L;E.range([0,M[0]]);yScale.range([0,M[1]]);E.domain([J,J+N]);yScale.domain([I,I+L]);var K=r.itemsContainer.mainContainer().selectAll("g.treemap-item").transition().duration(r.animation()?500:0).attr("transform",function(O){return"translate("+E(O.x0)+","+yScale(O.y0)+")"});K.select("g.treemapNode rect").attr("width",function(O){return G*(O.x1-O.x0)}).attr("height",function(O){return F*(O.y1-O.y0)});K.select("g.treemapNode g").attr("transform",function(U){var P=U.data.data.labelPosition;if(!P){P="center"}var V=P.toLowerCase(),R=0,O=0;var S=this.getBBox();var T=G*(U.x1-U.x0);var Q=F*(U.y1-U.y0);if(V=="bottom"){R=S.width/2;O=Q-S.height/2}else{if(V=="left"){R=S.width/2;O=Q/2}else{if(V=="right"){R=T-S.width/2;O=Q/2}else{if(V=="top"){R=S.width/2;O=S.height/2}else{R=T/2;O=Q/2}}}}if(S.width>T){R=S.width/2}return"translate("+R+","+O+")"});t=H;g.event.stopPropagation()};i.clazzName="Treemap";r.init()};i.struct=function(k){var j=k.view.component.charts.baseChart;j.struct(k);i.prototype=Object.create(j.prototype);i.prototype.constructor=i};e.exports=i}.call(c,f(2)))},function(e,c,f){(function(i){var g=function(n,l){const m=ghca_charts.view.component.charts.baseAxis;m.apply(this,arguments);var j=this,k=j.renderAxis;j.position("left");this.renderAxis=function(){k();var p,o,v,s,C,r,q,t=j.domain(),z=j.type(),A=j.padding();if(z==="time"){p=i.scaleTime().clamp(true)}else{if(z==="enum"){p=i.scaleBand()}else{p=i.scaleLinear().clamp(true)}}v=j.parentChart().bgNode().getBBox();s=v.width;C=v.height;axisH=C-A.top-A.bottom;q=A.top;p.domain(t).range([axisH,0]);if(j.position()==="right"){o=i.axisRight(p);r=s-A.right}else{o=i.axisLeft(p);r=A.left}j.x(r);j.y(q);j.height(axisH);var u=j.tick();for(var B in u){if(o.hasOwnProperty(B)){o[B](u[B])}}if(!j.axisContainer){j.axisContainer=j.parent.append("g").attr("class","yAxis")}j.axisContainer.style("visibility",j.visible()===false?"hidden":"visible").call(o).attr("transform","translate("+r+","+q+")");j.scaleIns(p);j.axisIns(o)};this.renderAxisLabel=function(){var p,v,s,t,r=j.axisLabel(),u=r.text;pos=r.pos,padding=r.padding;if(u===""||u===null||u===undefined){return}s=j.axisContainer.selectAll("text.axisLabel");if(s.node()===null){s=j.axisContainer.append("text").attr("class","axisLabel")}s.text(u);j.setAxisLabelStyle();var t=s.node().getBBox();var q=0;var o=0;j.axisContainer.selectAll("g.tick").each(function(A){var z=i.select(this).node().getBBox();if(z.width>q){q=z.width}if(z.height>o){o=z.height}});if(pos==="bottom"){v=j.y()+j.height()-t.width/2}else{if(pos==="middle"){v=j.height()/2}else{v=t.width/2}}if(j.position()==="left"){p=-q-padding}else{p=t.height+q+padding}s.attr("transform","translate("+p+","+v+")rotate(-90)")};this.renderTickLine=function(r){var p,o,u;if(j.position()==="left"){p=0;o=r.w}else{p=0;o=-r.w}var q=j.axisContainer.selectAll("g.tick");var s=j.axisContainer.select("path.domain").node();var t=s?s.getBBox().height:NaN;q.each(function(){var A=i.select(this).attr("transform");var v=parseFloat(A.replace(/[^0-9.\-, ]/g,"").split(/[, ]/g)[1])+0.5;if(!isNaN(t)&&(Math.abs(v-t)<1||v<1)){return}u=v;var z=j.gridLineContainer.append("line").attr("class","tickLine").attr("x1",p).attr("y1",u).attr("x2",o).attr("y2",u)})};this.renderInnerLine=function(z){var q,p,v,u=j.gridLine().innerLine.gapNum;if(u<1){return}if(j.position()==="left"){q=0;p=z.w}else{q=0;p=-z.w}var A=j.axisContainer.selectAll("g.tick");var C,s=NaN,o=NaN,r=u+1;A.each(function(){var E=i.select(this).attr("transform");var D=parseFloat(E.replace(/[^0-9.\-, ]/g,"").split(/[, ]/g)[1])+0.5;if(isNaN(D)){D=0}if(isNaN(s)){s=D}if(isNaN(o)){o=D}if(D<s){s=D}if(D>o){o=D}});C=(o-s)/(A.nodes().length-1)/r;for(v=s-C;v>0;v-=C){j.gridLineContainer.append("line").attr("class","innerLine").attr("x1",q).attr("y1",v).attr("x2",p).attr("y2",v)}var t=0,B=j.height();for(v=s;v<B;v+=C,t++){if(t%r!==0){j.gridLineContainer.append("line").attr("class","innerLine").attr("x1",q).attr("y1",v).attr("x2",p).attr("y2",v)}}};this.getTicksPos=function(){var o=[];var p=j.axisContainer.selectAll("g.tick");p.each(function(){var r=i.select(this).attr("transform");var q=parseFloat(r.replace(/[^0-9.\-, ]/g,"").split(/[, ]/g)[1])+0.5;o.push(q)});o.sort(function(r,q){return r-q});return o};this.toString=function(){}};g.struct=function(j){var k=j.view.component.charts.baseAxis;k.struct(j);g.prototype=Object.create(k.prototype);g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(e,c,f){(function(i){var g=function(F,T,V,H){if(arguments.length<4){console.error("缺少参数");return}const Q=ghca_charts.events.BaseEvent;const Z=ghca_charts.view.util.UUIDUtil;const A=ghca_charts.view.util.regexUtil;const U=ghca_charts.view.util.eventUtil;var N=true;var L=Z.generateUUID(),p=Z.generateUUID();var j=200,l=200;template="<g  style='clip-path: url(#{clipId});' transform='translate({g0tran})')><clipPath id='{clipId}'><rect height='{eyeHeight}' width='{eyeWidth}'></rect></clipPath><rect style='stroke:none;fill:{eyeViewBgColor};' height='{eyeHeight}' width='{eyeWidth}'></rect><g transform='scale({g1scale})'><g transform='translate({g2tran})'>{source}</g></g><rect id='{eyeActivityAreaId}' x='0' y='0' style='stroke-width: 1px;stroke:{eyeActivityAreaColor};fill: {eyeActivityAreaColor}; fill-opacity: 0.0' height='0' width='0'></rect></g>";this.width=function(aa){if(!arguments.length){return j}j=aa;return this};this.height=function(aa){if(!arguments.length){return l}l=aa;return this};this.dragEnable=function(aa){if(!arguments.length){return N}N=aa;return this};var m="none",s="#42AFFF",k="red";this.eyeBgColor=function(aa){if(!arguments.length){return m}m=aa;return this};this.eyeViewBgColor=function(aa){if(!arguments.length){return s}s=aa;return this};this.eyeActivityAreaColor=function(aa){if(!arguments.length){return k}k=aa;return this};var G=1;var W,B,O,v,P,Y,X;var E=T,C=V;var K,J,o,u;function S(ab){var aa=ab.detail;E=aa.width;C=aa.height}function n(){var aa=H.attr("transform");B=A.translate(aa);W=A.scale(aa);O=A.rotate(aa);var ac=H.node();var ab=ac.getBBox();v=ab.width;P=ab.height;Y=ab.x;X=ab.y}function z(){G=j/v<l/P?j/v:l/P;o=v*G;u=P*G;K=o<j?(j-o)/2:0;J=u<l?(l-u)/2:0}function r(){H.node().addEventListener(Q.POSITION_CHANGE,function(aa){n();R()});H.node().addEventListener(Q.CONTENT_CHANGE,function(aa){n();z();t()});H.node().addEventListener(Q.SIZE_CHANGE,function(aa){S(aa);t()});H.node().addEventListener(Q.EAGLE_EYE_DRAG_CHANGE,function(ab){var aa=ab.detail;N=aa.enable})}function q(){n();z();r()}this.render=function(){q();t()};function t(){var ab=H.html();var aa={eyeBgColor:m,eyeViewBgColor:s,eyeActivityAreaColor:k,eyeWidth:o,eyeHeight:u,width:j,height:l,clipId:L,g0tran:[K,J].toString(),g1scale:[G,G].toString(),g2tran:[Math.abs(Y),Math.abs(X)].toString(),source:ab,eyeActivityAreaId:p};F.html(A.replace(A.dataRegex,template,aa));R()}function R(){var ae=Number(B[0]),ad=Number(B[1]);var ac=Number(W[0]),ab=Number(W[1]);var aa=i.select(document.getElementById(p));aa.attr("width",E/ac*G);aa.attr("height",C/ab*G);aa.attr("x",(Math.abs(Y)-ae/ac)*G).attr("y",(Math.abs(X)-ad/ab)*G);aa.call(i.drag().on("start",D).on("drag",I))}function D(){i.event.sourceEvent.stopPropagation()}function I(){if(N==false){return}var ad=i.select(this);var ac=Number(ad.attr("x")),ab=Number(ad.attr("y"));var aa=ac+i.event.dx,ae=ab+i.event.dy;ad.attr("x",aa).attr("y",ae);M(aa,ae)}function M(ab,ah){var ag=Number(B[0]),af=Number(B[1]);var ae=Number(W[0]),ad=Number(W[1]);var ac=ag-(ab-(Math.abs(Y)-ag/ae)*G)/G*ae;var aa=af-(ah-(Math.abs(X)-af/ad)*G)/G*ad;H.attr("transform","translate("+[ac,aa]+")scale("+W+")rotate("+O+")");H.node().dispatchEvent(U.createCustomEvent(Q.EAGLE_EYE_DRAG,true,true,{x:ac,y:aa}))}};g.prototype.constructor=g;e.exports=g}.call(c,f(2)))},function(e,c){var f=function(l,n){const i=ghca_charts.view.component.baseComponent;const k=ghca_charts.view.component.eagleEye;i.apply(this,arguments);var g=this,j=g.init,m=g.renderChildren;g.className("eagleEyeContainer");this.renderChildren=function(){m();var o=new k(g.mainContainer().append("g"),g.parent().width(),g.parent().height(),g.parent().parent().mainContainer().select("g."+l.eagleConfig.target.clazz));o.eyeViewBgColor(l.eagleConfig.background.fill);o.width(g.width());o.height(g.height());o.render()};this.init=function(){j()}};f.struct=function(i){var g=i.view.component.baseComponent;g.struct(i);f.prototype=Object.create(g.prototype);f.prototype.constructor=f};e.exports=f},function(e,c,f){(function(g){var i=function(k,j,r){const l=ghca_charts.view.component.baseComponent;l.apply(this,arguments);var q=this,s=q.renderSize,m=q.render,p=q.renderChildren;if(arguments.length<1){throw new Error("传入参数个数错误,当前个数"+arguments.length+",至少传入前1个参数。")}if(typeof(k)=="string"){k=document.getElementById(k)}if(k){q.parent(k)}else{throw new Error("SVG构造方法中传入的容器_ele:"+k+"无法找到。")}this.className=function(){return"svgContainer"};this.parentWidth=function(){return q.parent()?q.parent().clientWidth:0};this.parentHeight=function(){return q.parent()?q.parent().clientHeight:0};var o=null;this.toolTipDiv=function(t){if(!arguments.length){return o}o=t;return this};this.renderMainContainer=function(){if(q.mainContainer()){q.mainContainer().remove()}var u=q.parent().style;u.overflow="hidden";q.percentWidth(100);q.percentHeight(100);var t=g.select(q.parent()).append("svg").attr("class",q.className()).attr("width",q.width()).attr("height",q.height()).attr("style","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;");q.mainContainer(t)};this.renderChildren=function(){p();n()};this.renderSize=function(){s();svg=q.mainContainer();if(!svg){return}svg.attr("width",q.width());svg.attr("height",q.height())};this.destroy=function(){if(q.mainContainer()){q.mainContainer().remove()}var t=g.select(q.parent());var u="toolTip-container";t.select("div."+u).remove()};this.toString=function(){return("BaseChart info: \n   width:"+q.width()+"\n   height:"+q.height()+"\n   layout:"+q.layout()+"\n   data:"+JSON.stringify(this.data(),null,4))};var n=function(){var t=g.select(q.parent());var u="toolTip-container";if(t.select("div."+u).node()!==null){return}var z=t.append("div").attr("class",u);var v=z.node().style;v.position="absolute";v.display="none";v.borderStyle="solid";v.whiteSpace="nowrap";v.transition="left 0.2s, top 0.2s";v.backgroundColor="rgba(50, 50, 50, 0.498039)";v.borderWidth="0px";v.borderColor="rgb(51, 51, 51)";v.borderRadius="4px";v.color="rgb(255, 255, 255)";v.fontFamily="微软雅黑, Arial, Verdana, sans-serif";v.fontSize="12px";v.padding="5px";v.left="0px";v.top="0px";v.pointerEvents="none";q.toolTipDiv(z)}};i.struct=function(k){var j=k.view.component.baseComponent;j.struct(k);i.prototype=Object.create(j.prototype);i.prototype.constructor=i};e.exports=i}.call(c,f(2)))},function(e,c,f){(function(i){var g=function(S,aG){const ak=ghca_charts.view.util.constant;const aX=ghca_charts.view.component.baseComponent;const aS=ghca_charts.events.BaseEvent;const u=ghca_charts.view.util.selectUtil;const aE=ghca_charts.view.util.objectUtil;const ac=ghca_charts.view.util.commonUtil;const F=ghca_charts.view.util.svgUtil;aX.apply(this,arguments);var aO=this,ax=aO.init,az=aO.resize,aZ=aO.update,aD=aO.renderBackground,aP=aO.renderChildren;var ab,ai,aj,au,aw=false,a0=false,ap=false,aN=0,aM=0,ad=[],aW=null,aC=0,aB=0,a1=["sans-serif","serif","宋体","微软雅黑","黑体","幼圆","Arial","Verdana"],R=[9,10,11,12,13,14,15,18,20,25,30,40],ba={fontFamily:"serif",fontSize:20,fontColor:"#000000"},K=30,Q={window:{title:"拖拽选择颜色",expandable:true,alphaSupport:true,effects:{type:"slide",speed:{show:"fast",hide:"fast"}},position:{x:"20px",y:"20px"}},color:{active:new $.jPicker.Color()},images:{clientPath:""},localization:{text:{title:"拖拽选择颜色",newColor:"新",currentColor:"旧",ok:"确定",cancel:"取消"}}};aO.className("svgCanvas");aO.addAttributes("dragable","iconPath","jpickerPath");var a7="select";this.state=function(bb){if(!arguments.length){return a7}a7=bb;if(a7==="normal"){t();G();aO.ownerSVG().bgNode().style.cursor="move";aO.content.attr("pointer-events","none")}else{aO.ownerSVG().bgNode().style.cursor="";aT();ah();if(a7==="draw"){aO.ownerSVG().bgNode().style.cursor="crosshair";aO.content.attr("pointer-events","none")}else{aO.content.attr("pointer-events","")}}if(a7!=="select"){N()}var bc=u.getSelectedNodes();if(!bc||bc.length===0){aO.propertyBar.style("display","none")}return this};var aJ=null;this.drawType=function(bb){if(!arguments.length){return aJ}aJ=bb;return this};var af=true;this.dragable=function(bb){if(!arguments.length){return af}af=bb;return this};var aq="../image/svg_canvas/";this.iconPath=function(bb){if(!arguments.length){return aq}aq=bb;return this};var X="../js/jpicker-1.1.6/";this.jpickerPath=function(bb){if(!arguments.length){return X}X=bb;return this};var V=function(){if(!aO.dragable()){return}};var z=function(){if(!aO.dragable()){return}var bb=aO.x(),bc=aO.y();aO.x(bb+i.event.dx);aO.y(bc+i.event.dy);aO.renderTransform()};var ao=function(){var bb=aO.scaleType();if(bb===ak.NO_SCALE_TYPE){return}var bc=aO.scaleType()!==ak.COMPONENT_SCALE_TYPE;if(bc){}else{aO.zoom(i.event.deltaY>0)}};var H=function(){i.event.stopImmediatePropagation();s(false);if(i.event.ctrlKey){switch(i.event.keyCode){case 65:aQ();return;case 67:M();return;case 88:L();return;case 86:ae();return;default:break}}if(i.event.shiftKey){switch(i.event.keyCode){case 38:ar(1);return;case 39:B(1);return;case 40:aY(1);return;case 37:v(1);return;default:break}}switch(i.event.keyCode){case 46:at();break;case 27:if(!ap){N()}break;case 38:ar(5);break;case 39:B(5);break;case 40:aY(5);break;case 37:v(5);break;default:break}};var T=function(){s(true)};var am=function(){var bd=i.event.target;if(bd.getAttribute("class")==="moveArea"){var bb=u.getSelectedNodes();if(bb.length===1){var bc=bb[0].tagName;aI(bc,bb[0])}}};var aK=function(){aO.propertyBar.style("display","block");D(event.detail)};var Y=function(){aO.propertyBar.style("display","none")};var o=function(){var bb=u.getSelectedNodes();al(bb)};var a5=function(bc,bd){var bb=u.getSelectedNodes();var be=n(bc.val("rgba"));aV(bb,be)};var aR=function(bc,bd){var bb=u.getSelectedNodes();var be=n(bc.val("rgba"));j(bb,be)};var aa=function(bc,bd){var bb=u.getSelectedNodes();var be=parseFloat(i.event.currentTarget.value);l(bb,be)};var a9=function(){var bb=u.getSelectedNodes();if(bb.length===1){an(bb[0])}};var ag=function(){var bb=u.getSelectedNodes();if(bb.length===1){ay(bb[0])}};var a3=function(){var bb=u.getSelectedNodes();if(bb.length===1){U(bb[0])}};var a6=function(){var bb=u.getSelectedNodes();if(bb.length===1){a4(bb[0])}};var p=function(){var bd=u.getAllNodes();var be=i.event.target===aO.ownerSVG().bgRect.node();var bc=bd.indexOf(i.event.target)!==-1;if(!be&&!bc){return}i.select(window).on("mousemove.svgCanvas",a8);i.select(window).on("mouseup.svgCanvas",J);aw=true;var bb=i.mouse(aO.content.node());aN=parseInt(bb[0]);aM=parseInt(bb[1]);if(a7==="select"){if(be){a0=true;m()}else{if(bc){aH([i.event.target])}}}else{if(a7==="draw"){if(aO.drawType()==="pencil"){ai=i.path();ai.moveTo(aN,aM);ab=aO.content.append("path").attr("fill","none").attr("stroke","black")}else{if(aO.drawType()==="line"){ab=aO.content.append("line").attr("fill","none").attr("stroke","black")}else{if(aO.drawType()==="polyline"){ab=aO.content.append("polyline").attr("fill","none").attr("stroke","black")}else{if(aO.drawType()==="rect"){ab=aO.content.append("rect").attr("fill","white").attr("stroke","black")}else{if(aO.drawType()==="circle"){ab=aO.content.append("circle").attr("fill","white").attr("stroke","black")}else{if(aO.drawType()==="ellipse"){ab=aO.content.append("ellipse").attr("fill","white").attr("stroke","black")}else{if(aO.drawType()==="text"){ab=aO.content.append("text").attr("x",aN).attr("y",aM).attr("text-anchor","start").attr("dy",ba.fontSize-1).attr("font-family",ba.fontFamily).attr("font-size",ba.fontSize).attr("stroke-width",0).attr("stroke",ba.fontColor).attr("fill",ba.fontColor).attr("opacity",1).text("双击编辑")}else{if(aO.drawType()==="image"){ab=aO.content.append("image").attr("x",aN).attr("y",aM).attr("preserveAspectRatio","none").attr("xlink:href",aO.iconPath()+"image.svg")}}}}}}}}}}};var a8=function(){if(!aw){return}if(a7==="select"){if(a0){r()}}else{if(a7==="draw"){var bc=i.mouse(aO.content.node());var bm=parseInt(bc[0]);var bl=parseInt(bc[1]);if(aO.drawType()==="pencil"){ai.lineTo(bm,bl);ab.attr("d",ai.toString())}else{if(aO.drawType()==="line"){ab.attr("x1",aN).attr("y1",aM).attr("x2",bm).attr("y2",bl)}else{if(aO.drawType()==="polyline"){var bq=bm-aN;var bp=bl-aM;var bo=Math.abs(bq)>Math.abs(bp);var bg=bo?Math.round(aN+bq/2):Math.round(aM+bp/2);var bn=bo?[aN,aM,bg,aM,bg,bl,bm,bl]:[aN,aM,aN,bg,bm,bg,bm,bl];ab.attr("points",bn)}else{if(aO.drawType()==="circle"){ab.attr("cx",aN).attr("cy",aM).attr("r",Math.floor(Math.sqrt(Math.pow(aN-bm,2)+Math.pow(aM-bl,2))))}else{if(aO.drawType()==="ellipse"){var bb,bk,be,bd;if(bm<aN){bb=(aN-bm)/2;be=bm+bb}else{bb=(bm-aN)/2;be=aN+bb}if(bl<aM){bk=(aM-bl)/2;bd=bl+bk}else{bk=(bl-aM)/2;bd=aM+bk}ab.attr("cx",be).attr("cy",bd).attr("rx",bb).attr("ry",bk)}else{if(aO.drawType()==="text"){ab.attr("x",aN).attr("y",aM)}else{var bj,bf,bi,bh;if(bm<aN){bj=aN-bm;bi=bm}else{bj=bm-aN;bi=aN}if(bl<aM){bf=aM-bl;bh=bl}else{bf=bl-aM;bh=aM}ab.attr("x",bi).attr("y",bh).attr("width",bj).attr("height",bf)}}}}}}}}};var J=function(){i.select(window).on("mousemove.svgCanvas",null);i.select(window).on("mouseup.svgCanvas",null);aw=false;if(a7==="select"){if(a0){P();a0=false}}else{if(a7==="draw"){var bb=ab.node();var bc=bb.getBBox();if((bc.width===0||bc.height===0)&&aO.drawType()!=="text"){ab.remove()}else{u.addNode(bb);a2();aH([bb]);aI(aO.drawType(),bb)}}}};this.init=function(){ax();Q.images.clientPath=aO.jpickerPath()+"images/"};this.initAllContainers=function(){aO.content=aO.mainContainer().append("g").attr("class","content");aO.selectCon=aO.mainContainer().append("g").attr("class","select-container");aL();E();aO.state("select")};this.getJSONData=function(){var bb=aO.toJSON();console.log(bb);return bb};this.update=function(){aZ();aF()};this.addListeners=function(){if(!aO.parent()){return}aO.parent().mainContainer().on("wheel",ao)};this.renderBackground=function(){aD();if(aO.bgRect){aO.bgRect.attr("pointer-events","none")}};this.renderChildren=function(){aP();aO.initAllContainers();aO.update()};this.resize=function(){az();var bb=aO.propertyBar.node().style;bb.top=(aO.ownerSVG().height()-K)+"px"};this.toJSON=function(){var bc="";var bb=aO.data();if(!bb){return bc}bb.data=k(u.getAllNodes(),true,false);bc=JSON.stringify(bb);return bc};this.toString=function(){return("BaseChart info: \n   width:"+aO.width()+"\n   height:"+aO.height()+"\n   data:"+JSON.stringify(this.data(),null,4))};var E=function(){if(!aO.ownerSVG()||!aO.ownerSVG().parent()){return}var bj=aO.ownerSVG();var bd=i.select(bj.parent());aO.propertyBar=bd.insert("div","div.toolTip-container").attr("class","property-bar");var bc=aO.propertyBar.node().style;bc.position="absolute";bc.display="block";bc.backgroundColor="rgb(238,238,238)";bc.left="0px";bc.top=(bj.height()-K)+"px";bc.width=bj.width()+"px";bc.height=K+"px";var bi=aO.propertyBar.append("div").text("x:").attr("style","margin-left:5px;float:left;");aO.xText=bi.append("input").attr("type","text").attr("title","修改x坐标").attr("style","width:50px;height:18px;margin-top:4px;margin-left:2px;").on("change",o);var bl=aO.propertyBar.append("div").text("y:").attr("style","margin-left:5px;float:left;");aO.yText=bl.append("input").attr("type","text").attr("title","修改y坐标").attr("style","width:50px;height:18px;margin-top:4px;margin-left:2px;").on("change",o);var bo=aO.propertyBar.append("div").text("宽:").attr("style","margin-left:10px;float:left;");aO.widthText=bo.append("input").attr("type","text").attr("title","修改宽度").attr("style","width:50px;height:18px;margin-top:4px;margin-left:2px;").on("change",o);var bm=aO.propertyBar.append("div").text("高:").attr("style","margin-left:5px;float:left;");aO.heightText=bm.append("input").attr("type","text").attr("title","修改高度").attr("style","width:50px;height:18px;margin-top:4px;margin-left:2px;").on("change",o);var bp=aO.propertyBar.append("div").text("旋转:").attr("style","margin-left:10px;float:left;");aO.rotatetText=bp.append("input").attr("type","text").attr("title","修改旋转角度").attr("style","width:50px;height:18px;margin-top:4px;margin-left:2px;").on("change",o);var be=aO.propertyBar.append("div").text("层级:").attr("style","margin-left:10px;float:left;");aO.upZIndexBtn=be.append("input").attr("type","button").attr("value","↑").attr("style","margin-top:4px;margin-left:2px;").attr("title","向上移动一个层级").on("click",a9);var bb=aO.propertyBar.append("div").text("").attr("style","margin-left:5px;float:left;");aO.downZIndexBtn=bb.append("input").attr("type","button").attr("value","↓").attr("style","margin-top:4px;margin-left:2px;").attr("title","向下移动一个层级").on("click",ag);var bf=aO.propertyBar.append("div").text("").attr("style","margin-left:5px;float:left;");aO.topZIndexBtn=bf.append("input").attr("type","button").attr("value","⇧").attr("style","margin-top:4px;margin-left:2px;").attr("title","移动到顶层").on("click",a3);var bg=aO.propertyBar.append("div").text("").attr("style","margin-left:5px;float:left;");aO.bottomZIndexBtn=bg.append("input").attr("type","button").attr("value","⇩").attr("style","margin-top:4px;margin-left:2px;").attr("title","移动到底层").on("click",a6);var bh=aO.propertyBar.append("div").attr("style","margin-left:10px;margin-top:4px;float:left;").attr("title","修改填充色");bh.append("img").attr("src",aO.iconPath()+"fill.svg").attr("align","top").attr("style","width:24px;height:24px;");aO.fillCp=bh.append("span").attr("id","fillColor").attr("style","margin-left:2px;");$("#fillColor").jPicker(Q,a5);var bn=aO.propertyBar.append("div").attr("style","margin-left:10px;margin-top:4px;float:left;").attr("title","修改笔触色");bn.append("img").attr("src",aO.iconPath()+"stroke.svg").attr("align","top").attr("style","width:24px;height:24px;");aO.strokeCp=bn.append("span").attr("id","strokeColor").attr("style","margin-left:2px;");$("#strokeColor").jPicker(Q,aR);var bk=aO.propertyBar.append("div").attr("style","margin-left:5px;float:left;");aO.strokeWidthText=bk.append("input").attr("type","text").attr("title","修改笔触粗细").attr("style","width:30px;height:18px;margin-top:4px;margin-left:2px;").on("change",aa)};var n=function(be){var bg=be&&be.r||"0";var bf=be&&be.g||"0";var bb=be&&be.b||"0";var bc=be&&be.a/255||"0";var bd="rgba("+[bg,bf,bb,bc]+")";return bd};var O=function(bc){if(bc===null||bc===undefined||bc===""||bc==="none"){bc="rgba(0,0,0,0)"}var bb=i.color(bc).rgb();bb.r=isNaN(bb.r)?0:bb.r;bb.g=isNaN(bb.g)?0:bb.g;bb.b=isNaN(bb.b)?0:bb.b;return{r:bb.r,g:bb.g,b:bb.b,a:Math.floor(bb.opacity*255)}};var D=function(bb){var bc=bb.__data__;aO.xText.node().value=bc.x;aO.yText.node().value=bc.y;aO.widthText.node().value=bc.width;aO.heightText.node().value=bc.height;aO.rotatetText.node().value=bc.rotate;var be=bb.getAttribute("fill");be=O(be);$("#fillColor")[0].color.active.val("rgba",be);var bd=bb.getAttribute("stroke");bd=O(bd);$("#strokeColor")[0].color.active.val("rgba",bd);var bf=bb.getAttribute("stroke-width");bf=bf===null?"1":bf.replace("px","");aO.strokeWidthText.node().value=bf};var al=function(bb){if(!bb||bb.length>1){return}var bc=bb[0];var bd=bc.__data__;var be=[{x:bd.x,y:bd.y,width:bd.width,height:bd.height}];bd.x=parseFloat(aO.xText.node().value);bd.y=parseFloat(aO.yText.node().value);bd.width=parseFloat(aO.widthText.node().value);bd.height=parseFloat(aO.heightText.node().value);bd.rotate=parseFloat(aO.rotatetText.node().value);var bb=[bc];u.validateNodes(bb,be);N();aH(bb)};var aV=function(bb,bd){if(!bb||bb.length>1){return}var bc=bb[0];bc.setAttribute("fill",bd)};var j=function(bb,bd){if(!bb||bb.length>1){return}var bc=bb[0];bc.setAttribute("stroke",bd)};var l=function(bb,bd){if(isNaN(bd)||!bb||bb.length>1){return}var bc=bb[0];bc.setAttribute("stroke-width",bd+"px")};var aL=function(){if(!aO.ownerSVG()){return}var be=aO.ownerSVG().mainContainer();aO.toolBar=be.append("g").attr("class","toolbar");aO.toolBar.attr("transform","translate("+[5,5]+")");var bd=24,bf=5;ad.push(Z("normal_btn",bd,bd,aO.iconPath()+"normal.png","拖拽",false,true));ad.push(Z("select_btn",bd,bd,aO.iconPath()+"select.png","选择",true,true));ad.push(Z("pencil_btn",bd,bd,aO.iconPath()+"pencil.png","铅笔工具",false,true));ad.push(Z("line_btn",bd,bd,aO.iconPath()+"line.png","直线",false,true));ad.push(Z("polyline_btn",bd,bd,aO.iconPath()+"polyline.png","折线",false,true));ad.push(Z("rect_btn",bd,bd,aO.iconPath()+"rectangle.png","矩形",false,true));ad.push(Z("circle_btn",bd,bd,aO.iconPath()+"circle.png","圆形",false,true));ad.push(Z("ellipse_btn",bd,bd,aO.iconPath()+"ellipse.png","椭圆",false,true));ad.push(Z("text_btn",bd,bd,aO.iconPath()+"text.png","文字",false,true));ad.push(Z("image_btn",bd,bd,aO.iconPath()+"image.svg","图片",false,true));ad.push(Z("delete_btn",bd,bd,aO.iconPath()+"delete.png","删除",false,false));ad.push(Z("save_btn",bd,bd,aO.iconPath()+"save.png","保存",false,false));for(var bh,bc=0,bg=0,bb=ad.length;bg<bb;bg++){bh=ad[bg];bh.attr("transform","translate("+[bc,0]+")");bc+=bd+bf}var bi=aO.toolBar.node().getBBox();aO.toolBar.insert("rect",".normal_btn").attr("class","toolbar-bg").attr("x",-1).attr("y",-1).attr("width",bi.width+2).attr("height",bi.height+2).attr("rx",4).attr("ry",4).attr("fill","white").attr("stroke","#666")};var Z=function(bi,bl,bh,bm,bj,bd,bb){var bk=aO.toolBar;var bc=bk.append("g").attr("class",bi);bc.on("mouseover",function(){bf.attr("stroke","red")});bc.on("mouseout",function(){bf.attr("stroke","none")});bc.on("mousedown",function(){if(!bb){i.select(window).on("mouseup",function(){i.select(window).on("mouseup",null);bc.select(".bg").attr("fill","white")})}var bn=i.select(i.event.currentTarget);bn.select(".bg").attr("fill","#ccc");if(bb){ad.forEach(function(bo){if(bo.node()!==bn.node()){bo.select(".bg").attr("fill","white")}})}var bg=bn.attr("class");if(bg==="normal_btn"){aO.state("normal")}else{if(bg==="select_btn"){aO.state("select")}else{if(bg==="pencil_btn"){aO.state("draw");aO.drawType("pencil")}else{if(bg==="line_btn"){aO.state("draw");aO.drawType("line")}else{if(bg==="polyline_btn"){aO.state("draw");aO.drawType("polyline")}else{if(bg==="rect_btn"){aO.state("draw");aO.drawType("rect")}else{if(bg==="circle_btn"){aO.state("draw");aO.drawType("circle")}else{if(bg==="ellipse_btn"){aO.state("draw");aO.drawType("ellipse")}else{if(bg==="text_btn"){aO.state("draw");aO.drawType("text")}else{if(bg==="image_btn"){aO.state("draw");aO.drawType("image")}else{if(bg==="delete_btn"){at()}else{if(bg==="save_btn"){aO.getJSONData()}}}}}}}}}}}}i.event.stopImmediatePropagation()});var bf=bc.append("rect").attr("class","bg").attr("x",0).attr("y",0).attr("width",bl+2).attr("height",bh+2).attr("stroke","none").attr("fill",bd?"#ccc":"white");if(bm){var be=bc.append("image").attr("x",1).attr("y",1).attr("width",bl).attr("height",bh).attr("xlink:href",bm).attr("pointer-events","none")}if(bj!==null||bj!==undefined||bj!==""){bc.append("title").text(bj)}return bc};var G=function(){aO.parent().mainContainer().call(i.drag().on("start",V).on("drag",z))};var aT=function(){aO.parent().mainContainer().on("mousedown.drag",null)};var ah=function(){aO.parent().mainContainer().on("mousedown.svgCanvas",p,true);aO.parent().mainContainer().on("dblclick.svgCanvas",am,true);i.select(window).on("keydown.window",H);i.select(window).on("keyup.window",T);aO.ownerSVG().addEventListener(aS.UPDATE_PROPERTIES,aK);aO.ownerSVG().addEventListener(aS.HIDDEN_PROPERTIES,Y)};var t=function(){aO.parent().mainContainer().on("mousedown.svgCanvas",null,true);aO.parent().mainContainer().on("dblclick.svgCanvas",null,true);i.select(window).on("mousemove.svgCanvas",null);i.select(window).on("mouseup.svgCanvas",null);aO.ownerSVG().removeEventListener(aS.UPDATE_PROPERTIES,aK);aO.ownerSVG().removeEventListener(aS.HIDDEN_PROPERTIES,Y)};var I=function(be,bd){if(ac.isChrome()||ac.isFirefox()){be.innerHTML=bd}else{var bg=new DOMParser().parseFromString('<svg xmlns="http://www.w3.org/2000/svg">'+bd+"</svg>","application/xml");var bb=bg.documentElement.childNodes;for(var bc=0,bf=bb.length;bc<bf;bc++){be.appendChild(bb[0])}}};var k=function(bb,bf,bd){if(!bb){return null}var bl=[];for(var bi=0,bk=bb.length;bi<bk;bi++){var be=bb[bi];var bc;if(bf){bc={};var bj=be.outerHTML;bc.html=bj;var bh=aE.cloneObj(be.__data__);bh.tx+=aC;bh.ty+=aB;bc.data=bh;if(bd){var bg=be.cloneNode(true);bc.node=bg;bg.__data__=bh}}else{bc=be.cloneNode(true);var bh=aE.cloneObj(be.__data__);bc.__data__=bh}bl.push(bc)}return bl};var aA=function(){if(!aj||!au||aj.length!==au.length){return false}var bd=W();for(var bc=0,bb=au.length;bc<bb;bc++){if(bd[bc].x!==au[bc].x||bd[bc].y!==au[bc].y){return true}}return false};var W=function(){if(!aj){return null}var bd=[];for(var bc=0,bb=aj.length;bc<bb;bc++){bd.push(aj[bc].getBBox())}return bd};var aI=function(bb,bc){if(!bc){return}if(bb==="text"){av(bc)}else{if(bb==="image"){C(bc)}}ap=true};var av=function(bg){var bk=bg.textContent;var bh=bg.getAttribute("fill");var bi=bg.getAttribute("font-family");var bo=parseInt(bg.getAttribute("font-size"));var be="";for(var bj=0,bl=a1.length;bj<bl;bj++){var bm=a1[bj];be+='<option value="'+bm+'"'+(bm===bi?' selected="selected"':"")+">"+bm+"</option>"}var bf="";for(var bj=0,bl=R.length;bj<bl;bj++){var bn=R[bj];bf+='<option value="'+bn+'"'+(bn===bo?' selected="selected"':"")+">"+bn+"</option>"}var bc='<div style="padding-left:10px;padding-top:10px;"><div style="float:left;width:100%;">文本内容: <input type="text" id="text_content" style="width:390px;height:18px;padding-left:2px;margin-bottom:10px;" value="'+bk+'"/></div><div style="float:left;width:100%;">字体类型: <select id="text_family" style="width:100px;border: 1px solid #3c99f7;margin-bottom:10px;">'+be+'</select></div><div style="float:left;width:100%;">字体大小: <select id="text_size" style="width:100px;border: 1px solid #3c99f7;">'+bf+"</select></div></div>";var bb=function(){ap=false;if(!this.getValue()){this.remove();return}var bt=$.trim(document.getElementById("text_content").value);var br=document.getElementById("text_family").value;var bq=document.getElementById("text_size").value;this.remove();if(bt===""){alert("请填写文本内容");return}i.select(bg).text(bt).attr("font-family",br).attr("font-size",bq).attr("dy",bq-1);var bp=[bg];var bu=bg.__data__;var bs=bg.getBBox();bu.x=bs.x;bu.y=bs.y;bu.width=bs.width;bu.height=bs.height;u.validateNodes(bp);N();aH(bp)};new $.msgbox({width:480,height:180,title:"编辑文本",type:"custom",content:bc,bgOpacity:0.8,cache:true,onClose:bb}).show();var bd=setTimeout(function(){clearTimeout(bd);var bp=document.getElementById("text_content");if(bp){bp.focus();bp.select()}},100)};var C=function(bc){var bb=bc.getAttribute("href");var bd='<div style="padding-left:10px;padding-top:10px;">图片地址: <input type="text" id="image_url" style="width:390px;height:18px;padding-left:2px;" value="'+bb+'"/></div>';var bf=function(){ap=false;if(!this.getValue()){this.remove();return}var bh=$.trim(document.getElementById("image_url").value);this.remove();if(bh===""){alert("请填写图片地址");return}i.select(bc).attr("xlink:href",bh);var bg=[bc];u.validateNodes(bg);N();aH(bg)};new $.msgbox({width:480,height:120,title:"编辑图片",type:"custom",content:bd,bgOpacity:0.8,cache:true,onClose:bf}).show();var be=setTimeout(function(){clearTimeout(be);var bg=document.getElementById("image_url");if(bg){bg.focus();bg.select()}},100)};var a2=function(bf){var bc=u.getAllNodes();F.sortByZIndex(bc,false);if(bf){for(var bd=0,bb=bc.length;bd<bb;bd++){var be=bc[bd];be.setAttribute("z-index",bd)}}};var m=function(){if(aO.selectCon){var bb=aO.selectCon;var bc=bb.select("rect.select");if(bc.node()===null){bb.append("rect").attr("class","select").attr("x",aN).attr("y",aM).attr("stroke","#0078d7").attr("stroke-width",1).attr("fill","#0078d7").attr("fill-opacity",0.1)}}};var r=function(){if(aO.selectCon){var bb=aO.selectCon;var bd=bb.select("rect.select");if(bd.node()){var bf,be,bc=i.mouse(bb.node());if(bc[0]<aN){w=aN-bc[0];bf=bc[0]}else{w=bc[0]-aN;bf=aN}if(bc[1]<aM){h=aM-bc[1];be=bc[1]}else{h=bc[1]-aM;be=aM}bd.attr("x",bf).attr("y",be).attr("width",w).attr("height",h)}}};var aU=function(){if(aO.selectCon){aO.selectCon.select("rect.select").remove()}};var N=function(){var bb=u.getAllNodes();u.removeControlPoints(aO.selectCon.node())};var A=function(){aQ();at()};var at=function(){u.removeSelectedNodes();u.removeControlPoints(aO.selectCon.node());a2(true);if(u.getAllNodes().length===0){aC=0;aB=0;aj=null;au=null}};var aQ=function(){N();var be=u.getAllNodes();var bc=[];for(var bd=0,bb=be.length;bd<bb;bd++){bc.push(be[bd])}aH(bc)};var q=function(bj,bb){if(!bj){return}var bg=[],bi=aO.content.node();for(var bf=0,bh=bj.length;bf<bh;bf++){var bc=bj[bf];var be=bc.data;var bd=bc.node?bc.node:bc.html;bi.appendChild(bd);u.addNode(bd,be);bg.push(bd)}u.validateNodes(bg);a2();if(bb){N();aH(bg)}return bg};var aF=function(){A();if(!aO.data()){return}var bj=aO.data().data;if(!bj||bj.length===0){return}var bg=[],bi=aO.content.node();var bd="";for(var bf=0,bh=bj.length;bf<bh;bf++){bd+=bj[bf].html}I(bi,bd);var bb=bi.childNodes;for(var bf=0,bh=bj.length;bf<bh;bf++){var bc=bb[bf];var be=bj[bf].data;u.addNode(bc,be);bg.push(bc)}u.validateNodes(bg);a2()};var M=function(){var bc=u.getSelectedNodes();if(bc.length===0){return}aC=0;aB=0;aj=null;au=null;var bb=k(bc);aW=bb};var L=function(){M();at()};var ae=function(){if(!aW||aW.length===0){return}if(!aA()){aC+=10;aB+=10}var bb=k(aW,true,true);aj=q(bb,true);au=W()};var ar=function(bb){u.moveNodes(0,bb)};var B=function(bb){u.moveNodes(1,bb)};var aY=function(bb){u.moveNodes(2,bb)};var v=function(bb){u.moveNodes(3,bb)};var P=function(){var bb=aO.selectCon.select("rect.select").node();var bc=u.getSelectedNodesInBBox(bb.getBBox());aH(bc);aU()};var aH=function(bg){if(i.event&&(i.event.shiftKey||i.event.ctrlKey)){var bf=u.getSelectedNodes();for(var bd=0,bb=bf.length;bd<bb;bd++){var be=bf[bd];var bc=bg.indexOf(be);if(bc===-1){bg.push(be)}else{bg.splice(bc,1)}}}u.removeControlPoints(aO.selectCon.node());u.showControlPoints(aO.selectCon.node(),bg);s(false)};var s=function(bb){if(bb){i.select("rect.moveArea").attr("pointer-events","")}else{if(a7==="select"&&i.event&&(i.event.ctrlKey||i.event.shiftKey)){i.select("rect.moveArea").attr("pointer-events","none")}}};var ay=function(bf){var bh=parseInt(bf.getAttribute("z-index"));if(bh===0){return}bh--;var bc=u.getAllNodes();for(var bd=0,bb=bc.length;bd<bb;bd++){var bg=bc[bd];var be=parseInt(bg.getAttribute("z-index"));if(be===bh){bg.setAttribute("z-index",bh+1);break}}bf.setAttribute("z-index",bh);a2()};var an=function(bf){var bc=u.getAllNodes();var bh=parseInt(bf.getAttribute("z-index"));if(bh===bc.length-1){return}bh++;for(var bd=0,bb=bc.length;bd<bb;bd++){var bg=bc[bd];var be=parseInt(bg.getAttribute("z-index"));if(be===bh){bg.setAttribute("z-index",bh-1);break}}bf.setAttribute("z-index",bh);a2()};var U=function(bd){var be=parseInt(bd.getAttribute("z-index"));var bb=u.getAllNodes();var bc=bb.length-1;if(bb.length===0||be===bc){return}bb[bc].setAttribute("z-index",be);bd.setAttribute("z-index",bc);a2()};var a4=function(bc){var bd=parseInt(bc.getAttribute("z-index"));if(bd===0){return}var bb=u.getAllNodes();bb[0].setAttribute("z-index",bd);bc.setAttribute("z-index",0);a2()};g.clazzName="SvgCanvas";aO.init()};g.struct=function(k){var j=k.view.component.baseComponent;j.struct(k);g.prototype=Object.create(j.prototype);g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(e,c){var f=function(g,p){const i=ghca_charts.view.component.baseComponent;const j=ghca_charts.view.elements.plugins.imageTag;const n=ghca_charts.view.util.elementUtil;i.apply(this,arguments);var k;var o=this,m=o.init,l=o.renderChildren;o.className("tagComponent");this.renderChildren=function(){l();var r=g.config;var q=o.mainContainer().append("g");if(!k){k=new j(q,null)}k.config(r);k.render();n.setElementProperties(q,{transform:"translate("+[o.width()/2,k.actualHeight()/2]+")"})};this.init=function(){m()}};f.struct=function(i){var g=i.view.component.baseComponent;g.struct(i);f.prototype=Object.create(g.prototype);f.prototype.constructor=f};e.exports=f},function(e,c,f){(function(g){var i=function(n,l){const k=ghca_charts.events.BaseEvent;this.dispatch=g.dispatch("dataChanged");this.svgElement=null;var j=this;var m=l;this.data=function(o){if(!arguments.length){return m}m=o;j.dispatch.call("dataChanged",this,new k(j,{data:o}));return this};this.style=function(o,p){if(j.svgElement){j.svgElement.style(o,p)}};this.attribute=function(o,p){if(j.svgElement){j.svgElement.attr(o,p)}};this.render=function(){var p=j.data();for(var o in p){if(j.hasOwnProperty(o)){j[o](p[o])}}j.addListener("dataChanged",function(q){j.dataChangeHandler(q)})};this.dataChangeHandler=function(o){};this.elementHeight=function(){if(j.svgElement){return j.svgElement.node().getBBox().height}return 0};this.elementWidth=function(){if(j.svgElement){return j.svgElement.node().getBBox().width}return 0};this.addListener=function(){var o=j.dispatch.on.apply(j.dispatch,arguments);return o===j.dispatch?j:o};this.on=function(){if(j.svgElement){j.svgElement.on.apply(j.svgElement,arguments)}}};i.struct=function(j){i.prototype.constructor=i};e.exports=i}.call(c,f(2)))},function(f,e){var c=function(q,g){const l=ghca_charts.view.elements.baseElement;l.apply(this,arguments);var z=this;z.svgElement=q.append("circle");var j=this.render;var v="butt";this.linecap=function(A){if(!arguments.length){return v}v=A;return this};var s=1;this.opacity=function(A){if(!arguments.length){return s}s=A;return this};var u=1;this.borderOopacity=function(A){if(!arguments.length){return u}u=A;return this};var k;this.cy=function(A){if(!arguments.length){return k}k=A;return this};var p;this.cx=function(A){if(!arguments.length){return p}p=A;return this};var r;this.radius=function(A){if(!arguments.length){return r}r=A;return this};var o=0;this.border=function(A){if(!arguments.length){return o}o=A;return this};var n;this.dashoffset=function(A){if(!arguments.length){return n}n=A;return this};var t;this.dasharray=function(A){if(!arguments.length){return t}t=A;return this};var i="none";this.borderColor=function(A){if(!arguments.length){return i}i=A;return this};var m="none";this.color=function(A){if(!arguments.length){return m}m=A;return this};this.render=function(){j();z.svgElement.style("fill",z.color()).style("fill-opacity",z.opacity()).attr("r",z.radius());if(z.border()!=0){z.svgElement.style("stroke",z.borderColor()).style("stroke-linecap",z.linecap()).style("stroke-width",z.border()).style("stroke-opacity",z.borderOopacity());if(z.dasharray()){z.svgElement.style("stroke-dasharray",z.dasharray())}if(z.dashoffset()){z.svgElement.style("stroke-dashoffset",z.dashoffset())}}z.cx()!=undefined?z.svgElement.style("cx",z.cx()):z.svgElement.style("cx",z.radius());z.cy()!=undefined?z.svgElement.style("cy",z.cy()):z.svgElement.style("cy",z.radius())};this.dataChangeHandler=function(A){z.render()}};c.struct=function(g){var i=g.view.elements.baseElement;i.struct(g);c.prototype=Object.create(i.prototype);c.prototype.constructor=c};f.exports=c},function(e,c){var f=function(l,i){const k=ghca_charts.view.elements.baseElement;k.apply(this,arguments);var p=this;p.svgElement=l.append("image");var j=this.render;var o=32;this.imageWidth=function(q){if(!arguments.length){return o}o=q;return this};var m=32;this.imageHeight=function(q){if(!arguments.length){return m}m=q;return this};var g=null;this.url=function(q){if(!arguments.length){return g}g=q;return this};var n=1;this.opacity=function(q){if(!arguments.length){return n}n=q;return this};this.render=function(){j();p.svgElement.attr("x",-p.imageWidth()/2).attr("y",-p.imageHeight()/2).attr("width",p.imageWidth()).attr("height",p.imageHeight()).attr("xlink:href",p.url()).style("opacity",p.opacity())};this.dataChangeHandler=function(q){p.render()}};f.struct=function(g){var i=g.view.elements.baseElement;i.struct(g);f.prototype=Object.create(i.prototype);f.prototype.constructor=f};e.exports=f},function(e,c){var f=function(p,j){const m=ghca_charts.view.elements.baseElement;const q=ghca_charts.view.util.stringUtil;m.apply(this,arguments);var t=this;t.svgElement=p.append("text");var l=this.render;var s;this.text=function(z){if(!arguments.length){return s}s=z;return this};var g=1;this.textLine=function(z){if(!arguments.length){return g}g=z;return this};var v=16;this.fontSize=function(z){if(!arguments.length){return v}v=z;return this};var r="宋体";this.fontFamily=function(z){if(!arguments.length){return r}r=z;return this};var o="#000000";this.color=function(z){if(!arguments.length){return o}o=z;return this};var u="none";this.textDecoration=function(z){if(!arguments.length){return u}u=z;return this};var k;this.borderColor=function(z){if(!arguments.length){return k}k=z;return this};var n=0;this.border=function(z){if(!arguments.length){return n}n=z;return this};var i=0;this.width=function(z){if(!arguments.length){return i}i=z;return this};this.render=function(){l();t.svgElement.style("font-size",t.fontSize()).style("font-family",t.fontFamily()).style("fill",t.color()).style("text-decoration",t.textDecoration()).style("stroke-width",t.border());if(t.borderColor()){t.svgElement.style("stroke",t.borderColor())}t.svgElement.selectAll("*").remove();var z=q.splitByLine(t.text(),t.width(),t.fontSize(),t.textLine());t.svgElement.selectAll("tspan").data(z).enter().append("tspan").attr("x",0).attr("dy",t.fontSize()).text(function(A){return A})};this.dataChangeHandler=function(z){t.render()}};f.struct=function(g){var i=g.view.elements.baseElement;i.struct(g);f.prototype=Object.create(i.prototype);f.prototype.constructor=f};e.exports=f},function(e,c){var f=function(o,g){const k=ghca_charts.view.elements.baseElement;k.apply(this,arguments);var t=this;t.svgElement=o.append("path");var j=this.render;var s="butt";this.linecap=function(v){if(!arguments.length){return s}s=v;return this};var p=1;this.opacity=function(v){if(!arguments.length){return p}p=v;return this};var r=1;this.borderOopacity=function(v){if(!arguments.length){return r}r=v;return this};var u="";this.path=function(){if(!arguments.length){return u}u=arguments[0];return this};var n=0;this.border=function(v){if(!arguments.length){return n}n=v;return this};var m;this.dashoffset=function(v){if(!arguments.length){return m}m=v;return this};var q;this.dasharray=function(v){if(!arguments.length){return q}q=v;return this};var i="none";this.borderColor=function(v){if(!arguments.length){return i}i=v;return this};var l="none";this.color=function(v){if(!arguments.length){return l}l=v;return this};this.render=function(){j();t.svgElement.style("stroke",t.borderColor()).style("stroke-linecap",t.linecap()).style("stroke-width",t.border()).style("stroke-opacity",t.borderOopacity()).style("fill",t.color()).style("fill-opacity",t.opacity()).attr("d",t.path());if(t.dasharray()){t.svgElement.style("stroke-dasharray",t.dasharray())}if(t.dashoffset()){t.svgElement.style("stroke-dashoffset",t.dashoffset())}};this.dataChangeHandler=function(v){t.render()}};f.struct=function(g){var i=g.view.elements.baseElement;i.struct(g);f.prototype=Object.create(i.prototype);f.prototype.constructor=f};e.exports=f},function(f,e){var c=function(g,m){const l=ghca_charts.view.elements.plugins.plugin;const o=ghca_charts.view.elements.imageElement;const j=ghca_charts.view.elements.mulitextElement;l.apply(this,arguments);var i=this;var k=[],n;i.config({image:{},text:{}});this.nameSpace=function(){return"imageTag"};this.update=function(p){};this.drawPlugin=function(q){var p=i.config();var r=q.append("g");p.text.forEach(function(u){var t=r.node().getBBox().width;var v=r.node().getBBox().height;var s=new j(r,u);s.render();s.attribute("transform","translate("+[t,-v/2]+")");k.push(s)});n=new o(q,p.image);n.render();r.attr("transform","translate("+[-r.node().getBBox().width/2,n.elementHeight()/2+10]+")")}};c.struct=function(g){var i=g.view.elements.plugins.plugin;i.struct(g);c.prototype=Object.create(i.prototype);c.prototype.constructor=c};f.exports=c},function(f,e){var c=function(j,i){const o=ghca_charts.view.util.elementUtil;const n=ghca_charts.view.elements.plugins.plugin;n.apply(this,arguments);var q=this,m,p,l=this.nameSpace,k=this.drawPlugin,g=this.bindEvents;this.nameSpace=function(){return"baseLabel"};this.actualWidth=function(){return Number(m.attr("width"))};this.actualHeight=function(){return Number(m.attr("height"))};this.drawPlugin=function(u){k(u);m=o.createRect(u,i.backGroundProperties);p=o.createText(u,i.labelProperties);p.text(i.name);o.setElementProperties(p,{"text-anchor":"middle",dy:"0.31em"});var t=p.node().getBBox();var s=t.width;var r=t.height;o.setElementProperties(m,{x:-s/2,y:-r/2,width:s,height:r,rx:2,ry:2})};this.update=function(u){if(u){i=u}if(!p){return}p.text(i.name);o.setElementProperties(p,{"text-anchor":"middle",dy:"0.31em"});o.setElementProperties(p,i.labelProperties);var t=p.node().getBBox();var s=t.width;var r=t.height;o.setElementProperties(m,{x:-s/2,y:-r/2,width:s,height:r,rx:2,ry:2})};this.bindEvents=function(r){g(r)}};c.struct=function(g){var i=g.view.elements.plugins.plugin;i.struct(g);c.prototype=Object.create(i.prototype);c.prototype.constructor=c};f.exports=c},function(e,c){var f=function(k,g){const p=ghca_charts.view.util.elementUtil;const o=ghca_charts.view.elements.plugins.plugin;const q=ghca_charts.view.elements.rectElement;const n=ghca_charts.view.elements.mulitextElement;const l=ghca_charts.view.util.regexUtil;o.apply(this,arguments);var r=this;var m,j;r.config({text:"{name}",maxWidth:60,backGroundColor:"green",backGroundOpacity:0.3,borderRadius:4,padding:4,fontColor:"0x000000",fontFamily:"宋体",fontSize:12,textLine:3,visible:true});var i;this.textFunc=function(s){if(!arguments.length){return}i=s};this.nameSpace=function(){return"label"};this.update=function(t){var s=r.config();var u=s.text;if(u&&u.indexOf("{#")===0){u=r.formatStr(u)(r.data().data)}else{u=this.textFunc()==undefined?l.replace(l.dataRegex,u,r.data()):this.textFunc()(r.data())}j.data({text:u,fontSize:s.fontSize,color:s.fontColor,width:s.maxWidth,textLine:s.textLine?s.textLine:1,fontFamily:s.fontFamily});j.attribute("transform","translate("+[s.padding,s.padding]+")");m.data({rx:s.borderRadius,ry:s.borderRadius,color:s.backGroundColor,opacity:s.backGroundOpacity});m.svgElement.attr("width",j.elementWidth()+(2*s.padding)).attr("height",j.elementHeight()+(2*s.padding));r.visible(s.visible==undefined?true:s.visible==true)};this.drawPlugin=function(t){var s=r.config();var u=s.text;if(u&&u.indexOf("{#")===0){u=r.formatStr(u)(r.data().data)}else{u=this.textFunc()==undefined?l.replace(l.dataRegex,u,r.data()):this.textFunc()(r.data())}m=new q(t,{rx:s.borderRadius,ry:s.borderRadius,color:s.backGroundColor,opacity:s.backGroundOpacity});m.render();j=new n(t,{text:u,fontSize:s.fontSize,color:s.fontColor,width:s.maxWidth,textLine:s.textLine?s.textLine:1,fontFamily:s.fontFamily});j.render();j.attribute("transform","translate("+[s.padding,s.padding]+")");j.attribute("pointer-events","none");m.svgElement.attr("width",j.elementWidth()+(2*s.padding));m.svgElement.attr("height",j.elementHeight()+(2*s.padding));m.svgElement.attr("pointer-events","none");r.visible(s.visible==undefined?true:s.visible==true)}};f.struct=function(g){var i=g.view.elements.plugins.plugin;i.struct(g);f.prototype=Object.create(i.prototype);f.prototype.constructor=f};e.exports=f},function(e,c,f){(function(g){var i=function(o,j,p){const q=ghca_charts.view.elements.plugins.plugin;q.apply(this,arguments);var t,u=this;this.nameSpace=function(){return"pieLabel"};var l=function(){return j.data&&j.data.clazzProperties&&j.data.clazzProperties.labelPos?j.data.clazzProperties.labelPos:"outer"};var m=function(){return l()==="outer"?j.hasOwnProperty("legendColor")?j.legendColor:"#000":"#000"};var k=function(v){return v.startAngle+(v.endAngle-v.startAngle)/2};this.drawPlugin=function(C){t=C.append("text").style("display",l()==="none"?"none":"block");if(l()==="none"){return}var z=j.data.labelProperties.text;var B=z?u.formatStr(z):null;t.text(B?B:function(D){return D.value}).attr("fill",function(D){return m()}).attr("pointer-events","none").attr("dy",".35em").transition(p).attrTween("transform",s).styleTween("text-anchor",n);var v=j.data.labelProperties;for(var A in v){t.attr(A,v[A])}};this.update=function(B){if(t){t.style("display",l()==="none"?"none":"block");if(l()==="none"){return}var z=j.data.labelProperties.text;var C=z?u.formatStr(z):null;t.attr("fill",function(D){return m()}).text(C?C:function(D){return D.value}).transition(B).attrTween("transform",r).styleTween("text-anchor",n);var v=j.data.labelProperties;for(var A in v){t.attr(A,v[A])}}};var s=function(z){this._current=this._current||z;var v,A;if(l()==="outer"){v=g.interpolate({startAngle:this._current.startAngle,endAngle:this._current.endAngle},z);A=z.lineSize+5;this._current=v(0);return function(B){var C=v(B);var D=z.outerArc2.centroid(C);D[0]+=(100*(1-B)+A)*(k(C)<Math.PI?1:-1);return"translate("+D+")"}}else{if(z.startAngle===0&&z.endAngle===6.283185307179586){return function(B){return"translate(0)"}}v=g.interpolate({startAngle:0,endAngle:0},z);this._current=v(0);return function(B){var C=v(B);var D=z.arc.centroid(C);return"translate("+D+")"}}};var r=function(z){this._current=this._current||z;var v,A;if(l()==="outer"){v=g.interpolate({startAngle:this._current.startAngle,endAngle:this._current.endAngle},z);A=z.lineSize+5;this._current=v(0);return function(B){var C=v(B);var D=z.outerArc2.centroid(C);D[0]+=A*(k(C)<Math.PI?1:-1);return"translate("+D+")"}}else{if(z.startAngle===0&&z.endAngle===6.283185307179586){return function(B){return"translate(0)"}}v=g.interpolate({startAngle:this._current.startAngle,endAngle:this._current.endAngle},z);this._current=v(0);return function(B){var C=v(B);var D=z.arc.centroid(C);return"translate("+D+")"}}};var n=function(z){this._current=this._current||z;if(l()==="outer"){var v=g.interpolate({startAngle:this._current.startAngle,endAngle:this._current.endAngle},z);this._current=v(0);return function(A){var B=v(A);return k(B)<Math.PI?"start":"end"}}else{return function(A){return"middle"}}}};i.struct=function(j){var k=j.view.elements.plugins.plugin;k.struct(j);i.prototype=Object.create(k.prototype);i.prototype.constructor=i};e.exports=i}.call(c,f(2)))},function(f,c){var e=function(){this.getMap=function(){var g={};g.baselink=ghca_charts.view.elements.plugins.links.baseLink;g.curvelink=ghca_charts.view.elements.plugins.links.curveLink;g.parallellink=ghca_charts.view.elements.plugins.links.parallelLink;g.sankeylink=ghca_charts.view.elements.plugins.links.sankeyLink;g.link=ghca_charts.view.elements.plugins.links.link;return g}};e.struct=function(g){e.prototype.constructor=e};f.exports=e},function(e,c,f){(function(g){var i=function(o,k){const v=ghca_charts.view.util.elementUtil;const u=ghca_charts.view.elements.plugins.plugin;const l=ghca_charts.view.elements.plugins.label.baseLabel;const r=ghca_charts.events.BaseEvent;const t=ghca_charts.view.util.math;const s=ghca_charts.view.util.regexUtil;const n=ghca_charts.view.component.baseComponent;u.apply(this,arguments);var z=this,p=this.drawPlugin,j=this.bindEvents;z.dispatch=g.dispatch("selectedChange");z.mainPathElement=o;z.checkPathElement=o;z.labelElement=o;z.label;var q=false;this.data=function(){return k.data};var m=false;this.isShowArrow=function(A){if(!arguments.length){return m}m=A;return this};this.selected=function(A){if(!arguments.length){return q}q=A;z.dispatch.call("selectedChange",this,new r(z,{selected:q}));return this};this.nameSpace=function(){return"baseLink"};this.drawPlugin=function(A){p(A);A.each(function(C){z.isShowArrow(z.data().showArrow?true:false);var B=g.select(this);z.checkPathElement=v.createPath(B,z.data().linkCheckProperties);z.mainPathElement=v.createPath(B,z.data().linkProperties);z.createLabel(B,k);z.setPath(z.mainPathElement,k);z.setPath(z.checkPathElement,k)})};this.update=function(){z.setPath(z.mainPathElement,k);z.setPath(z.checkPathElement,k);if(z.label&&z.labelElement){z.labelLayout(z.labelElement,z.label,k)}};this.bindEvents=function(A){j(A);A.on("mouseover",function(B){z.mouseOverHandler()});A.on("mouseout",function(B){z.mouseOutHandler()});A.on("click",function(B){z.selected(!q)});z.on("selectedChange."+z.nameSpace(),function(B){z.selectedChange(B.data.selected)})};this.on=function(){var A=z.dispatch.on.apply(z.dispatch,arguments);return A===z.dispatch?z:A};this.selectedChange=function(A){if(A){z.checkPathElement.attr("opacity",0.5)}else{z.checkPathElement.attr("opacity",0)}};this.mouseOverHandler=function(){if(!z.selected()){z.checkPathElement.attr("opacity",0.5)}};this.mouseOutHandler=function(){if(!z.selected()){z.checkPathElement.attr("opacity",0)}};this.setPath=function(A,D){var C=g.path();var B=z.isShowArrow()?{x:D.target.cx,y:D.target.cy}:D.target;C.moveTo(D.source.x,D.source.y);C.lineTo(B.x,B.y);v.setElementProperties(A,{d:C.toString()})};this.createLabel=function(B,C){if(!C.data.label){return}z.labelElement=B.append("g");var A=C.data.label;A.name=C.name;z.label=new l(z.labelElement,A,z);z.label.render();z.labelLayout(z.labelElement,z.label,C)};this.labelLayout=function(B,C,D){var A=t.calculateCenter(D.source,D.target);var E=t.linkAngle(D.source,D.target);v.setElementProperties(B,{transform:"translate("+[A.x,A.y]+") rotate("+E+")"})};this.addArrow=function(K){var L=g.select(K.node().ownerSVGElement);var A=L.select("svg defs");if(A.node()===null){A=L.append("defs")}var O=A.select("marker#link-arrow");if(O.node()===null){O=A.append("marker").attr("id","link-arrow").attr("markerUnits","strokeWidth").attr("markerWidth","6").attr("markerHeight","4").attr("viewBox","0 0 6 4").attr("refX",6).attr("refY",2).attr("orient","auto");var C="M0,0 L6,2 L0,4";var J=z.data().linkProperties;O.append("path").attr("d",C).attr("fill","none").attr("stroke",J.stroke).attr("stroke-opacity",J["stroke-opacity"])}K.attr("marker-end","url(#link-arrow)");var N=s.replace(s.dataRegex,k.source,z.data()),S=s.replace(s.dataRegex,k.target,z.data());if(z.isShowArrow()){var B=S.ins;var R=B instanceof n;var M=B?(R?B.node().getBBox():B.mainPlugin.el.node().getBBox()):{x:g.event.x,y:g.event.y,width:0,height:0};var I=M.width;var Q=M.height;var H=R?S.x+B.x():S.x+M.x;var G=R?S.y+B.y():S.y+M.y;var E,P=z.nameSpace();if(P==="curveLink"&&k.lineIndex>0){M.x=H;M.y=G;var D=z.label?z.label.actualHeight():12;var F=t.parallelDeviationPoint(N,S,D*3,k.lineIndex);k.controlX=F[1].x;k.controlY=F[1].y;E=t.calcQBezCurveAndRectIntersects(N,{x:F[1].x,y:F[1].y},S,M);if(E.length>0){E=E[0]}}else{delete k.controlX;delete k.controlY;E=t.getCrossPointInRectAndSegment(H,G,I,Q,N.x,N.y,S.x,S.y)}if(E&&E.length===2){S.cx=E[0];S.cy=E[1]}else{S.cx=S.x;S.cy=S.y}}}};i.struct=function(j){var k=j.view.elements.plugins.plugin;k.struct(j);i.prototype=Object.create(k.prototype);i.prototype.constructor=i};e.exports=i}.call(c,f(2)))},function(e,c,f){(function(i){var g=function(j,n){const l=ghca_charts.view.util.elementUtil;const o=ghca_charts.view.elements.plugins.links.baseLink;const m=ghca_charts.view.util.math;o.apply(this,arguments);var k=this;this.nameSpace=function(){return"curveLink"};this.setPath=function(p,v){var s=k.isShowArrow();if(s){k.addArrow(p)}var u=s?{x:v.target.cx,y:v.target.cy}:v.target;fontSize=k.label?k.label.actualHeight():12;var z=m.parallelDeviationPoint(v.source,u,fontSize*3,v.lineIndex);var r=s&&v.hasOwnProperty("controlX")?v.controlX:z[1].x;var q=s&&v.hasOwnProperty("controlY")?v.controlY:z[1].y;var t=i.path();t.moveTo(v.source.x,v.source.y);t.quadraticCurveTo(r,q,u.x,u.y);l.setElementProperties(p,{d:t.toString()})};this.labelLayout=function(p,q,r){var s=m.parallelDeviationPoint(r.source,r.target,q.actualHeight()*1.5,r.lineIndex);l.setElementProperties(p,{transform:"translate("+[s[1].x,s[1].y]+") rotate("+m.linkAngle(r.source,r.target)+")"})}};g.struct=function(j){var k=j.view.elements.plugins.links.baseLink;k.struct(j);g.prototype=Object.create(k.prototype);g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(e,c,f){(function(i){var g=function(v,B){const q=ghca_charts.view.util.math;const n=ghca_charts.view.elements.plugins.plugin;const L=ghca_charts.view.util.commonUtil;const l=ghca_charts.events.BaseEvent;const G=ghca_charts.view.elements.pathElement;const D=ghca_charts.view.elements.plugins.label.label;const I=ghca_charts.view.component.baseComponent;const K=ghca_charts.view.util.regexUtil;n.apply(this,arguments);var A=this;var z,u,j,o;var N=false;A.dispatch=i.dispatch("selectedChange");this.nameSpace=function(){return"link"};A.config({source:"{source}",target:"{target}",math:2,num:6,besselX:true,path:{dasharray:"5,5",borderWidth:2,borderColor:"{color}",borderOpacity:0.6,overDasharray:"5,5",overBorderWidth:10,overBorderColor:"red",overBorderOpacity:0.8},label:{clazz:"label",config:{text:"{name}:{value}",maxWidth:60,backGroundColor:"green",backGroundOpacity:0.3,borderRadius:4,padding:4,fontColor:"0x000000",fontFamily:"宋体",fontSize:12}}});var H=false;this.selected=function(O){if(!arguments.length){return H}H=O;A.dispatch.call("selectedChange",this,new l(A,{selected:H}));return this};this.selectedChange=function(O){var Q=A.config();var P=Q.path;if(O){z.data({borderColor:P.overBorderColor,border:P.overBorderWidth,dasharray:P.overDasharray,borderOopacity:P.overBorderOpacity})}else{z.data({borderColor:K.replace(K.dataRegex,P.borderColor,A.data()),border:P.borderWidth,dasharray:P.dasharray,borderOopacity:P.borderOpacity})}};var k;this.pathFunc=function(O){if(!arguments.length){return k}k=O;return this};this.nameSpace=function(){return"link"};this.update=function(R){if(R==="topo"){N=o?o.visible===true:false;if(u){u.transform("translate("+[-u.actualWidth()/2,-u.actualHeight()/2]+")")}if(j){j.attr("transform",M())}J()}else{var Q=A.config();var P=Q.path;N=o?o.visible===true:false;var O=Q.label?Q.label.config:null;if(O){u.config(O);if(u){u.update();u.transform("translate("+[-u.actualWidth()/2,-u.actualHeight()/2]+")")}if(j){j.attr("transform",M())}}z.borderColor(K.replace(K.dataRegex,P.borderColor,A.data()));z.border(P.borderWidth);z.dasharray(P.dasharray);z.borderOopacity(P.borderOpacity);J()}};this.drawPlugin=function(R){var Q=A.config();var P=Q.path;o=P.arrow;N=o?o.visible===true:false;z=new G(R,{borderColor:K.replace(K.dataRegex,P.borderColor,A.data()),border:P.borderWidth,dasharray:P.dasharray,borderOopacity:P.borderOpacity});z.render();var O=Q.label?Q.label.config:null;if(O){j=R.append("svg:g");u=new D(j,A.data());u.config(O);u.render();u.transform("translate("+[-u.actualWidth()/2,-u.actualHeight()/2]+")");j.attr("transform",M())}J()};this.bindEvents=function(O){O.on("mouseover",s);O.on("mouseout",E);O.on("click",function(P){A.selected(!H)});A.dispatch.on("selectedChange."+A.nameSpace(),function(P){A.selectedChange(P.data.selected)})};var F=null;this.pathFunction=function(O){if(!arguments.length){return F}F=O;return this};function t(P,O,Q){if(L.isIE()){}else{P.svgElement.attr(O,Q)}}function s(){var O=A.config().path;if(!A.selected()){z.data({borderColor:O.overBorderColor,border:O.overBorderWidth,dasharray:O.overDasharray,borderOopacity:O.overBorderOpacity})}}function E(){var O=A.config().path;if(!A.selected()){z.data({borderColor:K.replace(K.dataRegex,O.borderColor,A.data()),border:O.borderWidth,dasharray:O.dasharray,borderOopacity:O.borderOpacity})}}function J(){if(o){m(o.position==="start")}z.path(C());z.render()}function m(O){if(O){p()}else{r()}}function r(){var Q=A.config();var T=i.select(z.svgElement.node().ownerSVGElement);var R=T.select("svg defs");if(R.node()===null){R=T.append("defs")}var ac=R.select("marker#link-arrow");if(ac.node()===null){ac=R.append("marker").attr("id","link-arrow");ac.append("path")}ac.attr("markerUnits","strokeWidth").attr("markerWidth","6").attr("markerHeight","4").attr("viewBox","0 0 6 4").attr("refX",6).attr("refY",2).attr("orient","auto").style("display",N?"block":"none");var ae=Q.path;ac.select("path").attr("d","M0,0 L6,2 L0,4").attr("fill","none").attr("stroke",ae.borderColor).attr("stroke-opacity",ae.borderOpacity);t(z,"marker-end","url(#link-arrow)");var O=K.replace(K.dataRegex,Q.source,A.data()),X=K.replace(K.dataRegex,Q.target,A.data());var V=X.ins;var U=V instanceof I;var P=V?(U?V.node().getBBox():V.mainPlugin.el.node().getBBox()):{x:i.event.x,y:i.event.y,width:0,height:0};var ab=P.width;var S=P.height;var aa=U?X.x+V.x():X.x+P.x;var Z=U?X.y+V.y():X.y+P.y;var Y;if(Q.math===2&&B.lineIndex>0){P={x:aa,y:Z,width:P.width,height:P.height};var ad=u?u.actualHeight()*2:12;var W=q.parallelDeviationPoint(O,X,ad,B.lineIndex);B.controlX=W[1].x;B.controlY=W[1].y;Y=q.calcQBezCurveAndRectIntersects(O,{x:W[1].x,y:W[1].y},X,P);if(Y.length>0){Y=Y[0]}}else{delete B.controlX;delete B.controlY;Y=q.getCrossPointInRectAndSegment(aa,Z,ab,S,O.x,O.y,X.x,X.y)}if(Y&&Y.length===2){X.cx=Y[0];X.cy=Y[1]}else{X.cx=X.x;X.cy=X.y}}function p(){var P=A.config();var S=i.select(v.node().ownerSVGElement);var Q=S.select("svg defs");if(Q.node()===null){Q=S.append("defs")}var ac=Q.select("marker#link-arrow");if(ac.node()===null){ac=Q.append("marker").attr("id","link-arrow");ac.append("path")}ac.attr("markerUnits","strokeWidth").attr("markerWidth","6").attr("markerHeight","6").attr("viewBox","0 0 6 6").attr("refX",0).attr("refY",3).attr("orient","auto").style("display",N?"block":"none");var ae=A.config().path;ac.select("path").attr("d","M6,0 L0,3 L6,6").attr("fill","none").attr("stroke",ae.borderColor).attr("stroke-opacity",ae.borderOpacity);t(z,"marker-start","url(#link-arrow)");var O=K.replace(K.dataRegex,A.config().source,A.data()),W=K.replace(K.dataRegex,A.config().target,A.data());var U=O.ins;var T=U instanceof I;var aa=U?(T?U.node().getBBox():U.mainPlugin.el.node().getBBox()):{x:i.event.x,y:i.event.y,width:0,height:0};var ab=aa.width;var R=aa.height;var Z=T?O.x+U.x():O.x+aa.x;var Y=T?O.y+U.y():O.y+aa.y;var X;if(P.math===2&&B.lineIndex>0){aa={x:Z,y:Y,width:aa.width,height:aa.height};var ad=u?u.actualHeight()*2:12;var V=q.parallelDeviationPoint(W,O,ad,B.lineIndex);B.controlX=V[1].x;B.controlY=V[1].y;X=q.calcQBezCurveAndRectIntersects(W,{x:V[1].x,y:V[1].y},O,aa);if(X.length>0){X=X[0]}}else{delete B.controlX;delete B.controlY;X=q.getCrossPointInRectAndSegment(Z,Y,ab,R,O.x,O.y,W.x,W.y)}if(X&&X.length===2){O.cx=X[0];O.cy=X[1]}else{O.cx=O.x;O.cy=O.y}}function M(){if(!u){return}var Q=A.config();var O=K.replace(K.dataRegex,Q.source,A.data()),W=K.replace(K.dataRegex,Q.target,A.data());var R=q.linkAngle(O,W);var U=q.calculateCenter(O,W);var P=O,X=W;if(N){if(o.position==="start"){P=O.hasOwnProperty("cx")?{x:O.cx,y:O.cy}:O}else{X=W.hasOwnProperty("cx")?{x:W.cx,y:W.cy}:W}}if(Q.math){switch(Q.math){case 1:U=q.calculateCenter(P,X);break;case 2:var T=parseInt(K.replace(K.dataRegex,Q.num,A.data()));var V=q.parallelDeviationPoint(O,W,u.actualHeight()*1.2,T);U=V[1];break;case 3:U=q.calculateCenter(P,X);break;case 4:U=q.radialCenterPoint(K.replace(K.dataRegex,Q.source,A.data()),K.replace(K.dataRegex,Q.target,A.data()));R=q.radialLinkAngle(K.replace(K.dataRegex,Q.source,A.data()),K.replace(K.dataRegex,Q.target,A.data()));break;case 5:var S=Q.path?Q.path.isVer:false;U=q.calculateCenter(P,X);R=S?0:(O.y<W.y?90:-90);break}}return"translate("+[U.x,U.y]+") rotate("+R+")"}function C(){var Q=A.config();var O=K.replace(K.dataRegex,Q.source,A.data());var U=K.replace(K.dataRegex,Q.target,A.data());var P=O,V=U;if(N){if(o.position==="start"){P=O.hasOwnProperty("cx")?{x:O.cx,y:O.cy}:O}else{V=U.hasOwnProperty("cx")?{x:U.cx,y:U.cy}:U}}if(Q.math){switch(Q.math){case 1:return q.baseLinkPath(P,V);break;case 2:var T=K.replace(K.dataRegex,Q.num,A.data());var R=u?(u.actualHeight()==0?12:u.actualHeight()):12;return q.quadraticCurveLinkPath(P,V,R*2,T,B.controlX,B.controlY);break;case 3:return q.besselLinkPath(P,V,Q.besselX);break;case 4:return q.radialLinkPath(P,V,K.replace(K.dataRegex,Q.target,A.data()));break;case 5:var W=Q.path?Q.path.addSize:undefined;var S=Q.path?Q.path.isVer:false;return q.polylinePath(P,V,S,W);break}}else{return F()}return q.baseLinkPath(P,V)}};g.struct=function(j){var k=j.view.elements.plugins.plugin;k.struct(j);g.prototype=Object.create(k.prototype);g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(e,c,f){(function(i){var g=function(j,n){const l=ghca_charts.view.util.elementUtil;const o=ghca_charts.view.elements.plugins.links.baseLink;const m=ghca_charts.view.util.math;o.apply(this,arguments);var k=this;this.nameSpace=function(){return"parallelLink"};this.setPath=function(p,t){if(k.isShowArrow()){k.addArrow(p)}var s=k.isShowArrow()?{x:t.target.cx,y:t.target.cy}:t.target;fontSize=k.label?k.label.actualHeight():12;var r=m.parallelDeviationPoint(t.source,s,fontSize*1.5,t.lineIndex);var C=i.path();var B=t.source.x,z=t.source.y,u=s.x,q=s.y,A=r[0].x,v=r[0].y;C.moveTo(B,z);if(B!==A||z!==v){C.lineTo(A,v)}A=r[2].x,v=r[2].y;if(u!==A||q!==v){C.lineTo(A,v)}C.lineTo(u,q);l.setElementProperties(p,{d:C.toString()})};this.labelLayout=function(p,q,r){var s=m.parallelDeviationPoint(r.source,r.target,q.actualHeight()*1.5,r.lineIndex);l.setElementProperties(p,{transform:"translate("+[s[1].x,s[1].y]+") rotate("+m.linkAngle(r.source,r.target)+")"})}};g.struct=function(j){var k=j.view.elements.plugins.links.baseLink;k.struct(j);g.prototype=Object.create(k.prototype);g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(module,exports,__webpack_require__){(function(d3){var SankeyLink=function(_element,_data){const ElementUtil=ghca_charts.view.util.elementUtil;const BaseLink=ghca_charts.view.elements.plugins.links.baseLink;const MathUtil=ghca_charts.view.util.math;const RegexUtil=ghca_charts.view.util.regexUtil;BaseLink.apply(this,arguments);var self=this;var superDrawPluginFunction=this.drawPlugin;var path=null;this.path=function(value){if(!arguments.length){return path}path=value;return this};var pathFunction=null;this.pathFunction=function(value){if(!arguments.length){return pathFunction}pathFunction=value;return this};var sortFunction=null;this.sortFunction=function(value){if(!arguments.length){return sortFunction}sortFunction=value;return this};var title=null;this.title=function(value){if(!arguments.length){return title}title=value;return this};var titleFunction=null;this.titleFunction=function(value){if(!arguments.length){return titleFunction}titleFunction=value;return this};this.nameSpace=function(){return"sankeyLink"};this.selectedChange=function(seleced){};this.mouseOverHandler=function(){self.mainPathElement.attr("stroke-opacity",0.6)};this.mouseOutHandler=function(){self.mainPathElement.attr("stroke-opacity",0.3)};this.drawPlugin=function(g){superDrawPluginFunction(g)};this.setPath=function(pathElement,data){self.refreshData(_data.data.clazzProperties);var path=self.pathFunction()?self.pathFunction()():self.path();var duration=self.animation()?300:0;pathElement.attr("visibility","hidden");pathElement.transition().duration(duration).ease(d3.easeLinear).on("start",function(d){pathElement.attr("visibility","visible")}).delay(function(d){return d.source.level*(duration-10)}).attrTween("d",function(d){var interpolate=d3.interpolate({target:{x:d.source.x+10}},d);return function(t){return path(interpolate(t))}}).attrTween("stroke-width",function(d){var interpolate=d3.interpolate({dy:Math.max(1,d.dy)},d);return function(t){return interpolate(t).dy}});if(self.sortFunction()){pathElement.sort(self.sortFunction())}pathElement.selectAll("path-title").remove();if(self.titleFunction()){pathElement.append("title").attr("class","path-title").text(self.titleFunction())}else{if(self.title()){pathElement.append("title").attr("class","path-title").text(formatTitleFn)}}ElementUtil.setElementProperties(pathElement,_data.data.useProperties)};this.labelLayout=function(element,plugin,data){var position=MathUtil.calculateCenter(data.source,data.target);ElementUtil.setElementProperties(element,{transform:"translate("+[position.x,position.y]+")"})};this.refreshData=function(data){if(data){for(var key in data){if(this.hasOwnProperty(key)){this[key](data[key])}}}};var formatTitleFn=function(d){var titleStr=self.title();return titleStr.replace(RegexUtil.jsRegex,function(){return arguments.length>1?eval(arguments[1]):""})}};SankeyLink.struct=function(ghca_charts){var BaseLink=ghca_charts.view.elements.plugins.links.baseLink;BaseLink.struct(ghca_charts);SankeyLink.prototype=Object.create(BaseLink.prototype);SankeyLink.prototype.constructor=SankeyLink};module.exports=SankeyLink}.call(exports,__webpack_require__(2)))},function(e,c){var f=function(){this.getMap=function(){var g={};g.basenode=ghca_charts.view.elements.plugins.nodes.baseNode;g.arcclass=ghca_charts.view.elements.plugins.nodes.arcClass;g.sankeynode=ghca_charts.view.elements.plugins.nodes.sankeyNode;g.baselabel=ghca_charts.view.elements.plugins.label.baseLabel;g.node=ghca_charts.view.elements.plugins.nodes.node;g.hbarnode=ghca_charts.view.elements.plugins.nodes.hBarNode;g.vbarnode=ghca_charts.view.elements.plugins.nodes.vBarNode;g.linenode=ghca_charts.view.elements.plugins.nodes.lineNode;g.imagenode=ghca_charts.view.elements.plugins.nodes.imageNode;g.circleshape=ghca_charts.view.elements.shape.circleShape;g.rectshape=ghca_charts.view.elements.shape.rectShape;g.groupnode=ghca_charts.view.elements.plugins.nodes.groupNode;g.treemapnode=ghca_charts.view.elements.plugins.nodes.treemapNode;return g}};f.struct=function(g){f.prototype.constructor=f};e.exports=f},function(e,c,f){(function(i){var g=function(v,A){const l=ghca_charts.view.util.elementUtil;const m=ghca_charts.view.elements.plugins.label.pieLabel;const j=ghca_charts.view.elements.plugins.nodes.baseNode;j.apply(this,arguments);var z=this;var q,n=false;var D=20;this.outerRadius=function(J){if(!arguments.length){return o+(D-o)*(A.hasOwnProperty("radiusPercent")?A.radiusPercent:1)}D=J;return this};this.origOuterRadius=function(){return D};var o=0;this.innerRadius=function(J){if(!arguments.length){return o}o=J;return this};var E=0;this.startAngle=function(J){if(!arguments.length){return E}E=J;return this};var C=Math.PI/2;this.endAngle=function(J){if(!arguments.length){return C}C=J;return this};var k=0;this.cornerRadius=function(J){if(!arguments.length){return k}k=J;return this};var t=0;this.padAngle=function(J){if(!arguments.length){return t}t=J;return this};var I=null;this.title=function(J){if(!arguments.length){return I}I=J;return this};var p=null;this.titleFunction=function(J){if(!arguments.length){return p}p=J;return this};var B="outer";this.labelPos=function(J){if(!arguments.length){return B}B=J;return this};this.data=function(){return A.data};this.nameSpace=function(){return"arcClass"};this.drawPlugin=function(K){if(!z.mainElemet){var J=A.data.clazzProperties;z.refreshData(J);z.mainElement=K.append("path");q=i.arc().outerRadius(z.outerRadius()).innerRadius(z.innerRadius()).cornerRadius(z.cornerRadius()).padAngle(z.padAngle());l.setElementProperties(z.mainElement,J);z.setLegendColor();if(z.titleFunction()){z.mainElement.append("title").attr("class","path-title").text(z.titleFunction())}else{if(z.title()){z.mainElement.append("title").attr("class","path-title").text(z.formatStr(z.title()))}}var L;if(z.isChartFirstInit()){L=i.transition().duration(z.animation()?2000:0).ease(i.easeExpOut);z.mainElement.attr("transform","rotate(-179)scale(0.1)").transition(L).attr("transform","rotate(0)scale(1)").on("start",function(){n=true}).on("end",function(){n=false}).attrTween("d",function(N){var M=i.interpolate({startAngle:0,endAngle:N.endAngle-0.5},N);return function(O){return q(M(O))}})}else{L=i.transition().duration(z.animation()?500:0).ease(i.easeExpOut);z.mainElement.transition(L).on("start",function(){n=true}).on("end",function(){n=false}).attrTween("d",function(N){var M=i.interpolate({startAngle:N.endAngle,endAngle:N.endAngle},N);return function(O){return q(M(O))}})}if(A.data.labelProperties){F();z.label=new m(K.append("g"),A,L);z.label.isChartFirstInit(z.isChartFirstInit());z.label.render();if(z.labelPos()==="outer"&&!z.polyline){z.polyline=K.append("polyline").datum(A).attr("opacity",0.5).attr("stroke",function(M){return M.hasOwnProperty("legendColor")?M.legendColor:"#000"}).attr("stroke-width","1.5px").attr("fill","none");z.polyline.transition(L).attrTween("points",r)}}}};this.update=function(){var K=i.transition().duration(z.animation()?500:0).ease(i.easeExpOut);if(z.mainElement){var J=A.data.clazzProperties;z.refreshData(J);q=i.arc().outerRadius(z.outerRadius()).innerRadius(z.innerRadius()).cornerRadius(z.cornerRadius()).padAngle(z.padAngle());l.setElementProperties(z.mainElement,J);z.setLegendColor();if(z.titleFunction()){z.mainElement.select("title.path-title").text(z.titleFunction())}else{if(z.title()){z.mainElement.select("title.path-title").text(z.formatStr(z.title()))}}z.selectedChange(false);z.mainElement.transition(K).on("start",function(){n=true}).on("end",function(){n=false}).attrTween("d",function(M){this._current=this._current||M;var L=i.interpolate({startAngle:this._current.startAngle,endAngle:this._current.endAngle},M);this._current=L(0);return function(N){return q(L(N))}})}if(z.label){F();z.label.update(K);if(z.labelPos()==="outer"){if(!z.polyline){z.polyline=z.mainContainer().append("polyline").datum(A)}z.polyline.attr("opacity",0.5).attr("stroke",function(L){return L.hasOwnProperty("legendColor")?L.legendColor:"#000"}).attr("stroke-width","1.5px").attr("fill","none").transition(K).attrTween("points",H)}else{if(z.polyline){z.polyline.remove();z.polyline=null}}}};this.mouseOverHandler=function(){if(n){return}var K=z.outerRadius();var J=(K+10)/K;if(J>1.05){J=1.05}l.setElementProperties(z.animation()?z.mainElement.transition():z.mainElement,{transform:"scale("+J+")"})};this.mouseOutHandler=function(){if(n){return}l.setElementProperties(z.animation()?z.mainElement.transition():z.mainElement,{transform:"scale(1)"})};this.selectedChange=function(J){if(n){return}l.setElementProperties(this.animation()?v.transition():v,{transform:J==true?u:G})};this.refreshData=function(K){if(K){for(var J in K){if(this.hasOwnProperty(J)){this[J](K[J])}}}};var F=function(){if(z.labelPos()==="outer"){var N=z.outerRadius();var L=z.origOuterRadius();var O=L*0.2;O=O<10?10:(O>20?20:O);var K=i.arc().innerRadius(N).outerRadius(N);var M=L+O;var J=i.arc().innerRadius(M).outerRadius(M);A.outerArc1=K;A.outerArc2=J;A.lineSize=15}else{A.arc=q}};var u=function(O){var M=q.centroid(O);var N=Math.atan(M[1]/M[0]);var K=z.outerRadius()*0.1;if(K>10){K=10}var L=Math.abs(K*Math.cos(N));var J=Math.abs(K*Math.sin(N));M[0]=M[0]>0?L:-L;M[1]=M[1]>0?J:-J;return"translate("+M+")"};var G=function(J){return"translate(0, 0)"};var s=function(J){return J.startAngle+(J.endAngle-J.startAngle)/2};var r=function(M){this._current=this._current||M;var L=i.interpolate({startAngle:this._current.startAngle,endAngle:this._current.endAngle},M);this._current=L(0);var K=M.outerArc1;var J=M.outerArc2;return function(O){var Q=L(O);var R=K.centroid(Q);var P=J.centroid(Q);var N=J.centroid(Q);P[1]=(P[1]-R[1])*O+R[1];N[1]=(N[1]-R[1])*O+R[1];N[0]+=M.lineSize*(s(Q)<Math.PI?1:-1);return[R,P,N]}};var H=function(M){this._current=this._current||M;var L=i.interpolate({startAngle:this._current.startAngle,endAngle:this._current.endAngle},M);this._current=L(0);var K=M.outerArc1;var J=M.outerArc2;return function(N){var O=L(N);var P=J.centroid(O);P[0]+=M.lineSize*(s(O)<Math.PI?1:-1);return[K.centroid(O),J.centroid(O),P]}}};g.struct=function(j){var k=j.view.elements.plugins.nodes.baseNode;k.struct(j);g.prototype=Object.create(k.prototype);g.prototype.constructor=k};e.exports=g}.call(c,f(2)))},function(e,c,f){(function(g){var i=function(m,k){const s=ghca_charts.view.util.elementUtil;const l=ghca_charts.view.elements.plugins.label.baseLabel;const q=ghca_charts.view.elements.plugins.plugin;const p=ghca_charts.events.BaseEvent;const r=ghca_charts.view.util.eventUtil;q.apply(this,arguments);var t=this,n=this.drawPlugin,j=this.bindEvents;t.dispatch=g.dispatch("selectedChange");t.mainElement=m;t.backGroundElement=m;var o=false;this.data=function(){return k.data};this.selected=function(u){if(!arguments.length){return o}o=u;t.dispatch.call("selectedChange",this,new p(t,{selected:o}));return this};this.selectedChange=function(u){if(t.backGroundElement){if(u){t.backGroundElement.attr("opacity",0.5)}else{t.backGroundElement.attr("opacity",0)}}};this.mouseOverHandler=function(){if(!t.selected()&&t.backGroundElement){t.backGroundElement.attr("opacity",0.5)}};this.mouseOutHandler=function(){if(!t.selected()&&t.backGroundElement){t.backGroundElement.attr("opacity",0)}};this.nameSpace=function(){return"baseNode"};this.actualWidth=function(){if(t.backGroundElement){return t.backGroundElement.node().getBBox().width}return 0};this.actualHeight=function(){if(t.backGroundElement){return t.backGroundElement.node().getBBox().height}return 0};this.drawPlugin=function(u){n(u);t.mainElement=s.createCircle(u,t.data().circleProperties);t.backGroundElement=s.createCircle(u,t.data().circleCheckProperties);t.createLabel(u,k);t.setLegendColor()};this.bindEvents=function(u){j(u);u.on("mouseover",function(z){var v=r.createCustomEvent(p.SHOW_TOOL_TIP,true,true);g.select(this).node().dispatchEvent(v);t.mouseOverHandler()});u.on("mousemove",function(z){var v=r.createCustomEvent(p.UPDATE_TOOL_TIP,true,true,z);g.select(this).node().dispatchEvent(v)});u.on("mouseout",function(z){var v=r.createCustomEvent(p.HIDE_TOOL_TIP,true,true);g.select(this).node().dispatchEvent(v);t.mouseOutHandler()});u.on("click",function(v){t.selected(!o)});t.on("selectedChange."+t.nameSpace(),function(v){t.selectedChange(v.data.selected)})};this.on=function(){var u=t.dispatch.on.apply(t.dispatch,arguments);return u===t.dispatch?t:u};this.createLabel=function(z,A){if(!A.data.label){return}var B=z.append("g");var v=A.data.label;v.name=A.name==""?"":A.name;var u=new l(B,v,t);u.render();t.labelLayout(B,u,A)};this.setLegendColor=function(){if(k.legendColor){s.setElementProperties(t.mainElement,{fill:k.legendColor})}};this.labelLayout=function(z,D,E){var C=E.data.labelPosition;if(!C){C="bottom"}var G=t.actualWidth(),B=t.actualHeight(),F=D.actualHeight(),u=D.actualWidth();var A=C.toLowerCase(),v;if(A==="top"){v="translate("+[0,-B/2-F/2]+")"}else{if(A==="bottom"){v="translate("+[0,B/2+Number(F/2)]+")"}else{if(A==="left"){v="translate("+[-G/2-u/2,0]+")"}else{if(A==="right"){v="translate("+[G/2+u/2,0]+")"}else{if(A==="center"){v="translate("+[0,0]+")"}}}}}s.setElementProperties(z,{transform:v})}};i.struct=function(j){var k=j.view.elements.plugins.plugin;k.struct(j);i.prototype=Object.create(k.prototype);i.prototype.constructor=i};e.exports=i}.call(c,f(2)))},function(e,c){var f=function(j,n){const m=ghca_charts.view.elements.plugins.plugin;const g=ghca_charts.view.elements.circleElement;const l=ghca_charts.view.util.objectUtil;const i=ghca_charts.view.util.regexUtil;m.apply(this,arguments);var k=this,o=j;k.config({cx:0,cy:0,radius:10,border:2,borderColor:"green",linecap:"butt",color:"red"});this.actualWidth=function(){return k.config().radius*2};this.actualHeight=function(){return k.config().radius*2};this.nameSpace=function(){return"circle"};this.update=function(p){o.data(k.config())};this.drawPlugin=function(q){var p=l.cloneObj(k.config());p.color=i.replace(i.dataRegex,p.color,k.data());p.borderColor=i.replace(i.dataRegex,p.borderColor,k.data());o=new g(q,p);o.render()}};f.struct=function(g){var i=g.view.elements.plugins.plugin;i.struct(g);f.prototype=Object.create(i.prototype);f.prototype.constructor=f};e.exports=f},function(f,c){var e=function(l,g){const u=ghca_charts.view.elements.plugins.plugin;const o=ghca_charts.view.elements.plugins.label.label;const k=ghca_charts.view.elements.imageElement;const s=ghca_charts.view.util.objectUtil;const n=ghca_charts.view.util.regexUtil;u.apply(this,arguments);var v=this,q=null,t=null,r=null,p=null,m=null,j=null,i=null;v.config({imageWidth:32,imageHeight:32,opacity:1});this.nameSpace=function(){return"demoImageNode"};this.update=function(z){if(q){q.data(v.config())}if(t){t.data(v.config().icon1)}if(r){r.data(v.config().icon2)}if(p){p.data(v.config().icon3)}if(m){m.data(v.config().label1)}if(j){j.data(v.config().label2)}if(i){i.data(v.config().label3)}};this.drawPlugin=function(F){var A=s.cloneObj(v.config());q=new k(F,A);q.render();var E,G=10,H=2,D=-A.imageWidth/2+A.icon1.imageWidth/2;ty=A.imageHeight/2+G,labelY=0;t=new k(F,A.icon1);t.render();t.svgElement.attr("transform","translate("+D+","+ty+")");var B=F.append("svg:g").attr("pointer-events","none");m=new o(B,v.data());m.config(A.label1);m.render();E=B.node().getBBox();labelY=ty+A.icon1.imageHeight/2-E.height;B.attr("transform","translate("+-4+","+labelY+")");r=new k(F,A.icon2);r.render();ty+=A.icon1.imageHeight+H;r.svgElement.attr("transform","translate("+D+","+ty+")");var z=F.append("svg:g").attr("pointer-events","none");j=new o(z,v.data());j.config(A.label2);j.render();E=z.node().getBBox();labelY=ty+A.icon2.imageHeight/2-E.height;z.attr("transform","translate("+-4+","+labelY+")");p=new k(F,A.icon3);p.render();ty+=A.icon2.imageHeight+H;p.svgElement.attr("transform","translate("+D+","+ty+")");var I=F.append("svg:g").attr("pointer-events","none");i=new o(I,v.data());i.config(A.label3);i.render();E=I.node().getBBox();labelY=ty+A.icon3.imageHeight/2-E.height;I.attr("transform","translate("+-4+","+labelY+")");var C=F.select("rect.bgRect");if(C.node()===null){E=F.node().getBBox();console.log(E);F.insert("rect","image").attr("class","bgRect").attr("x",E.x).attr("y",E.y).attr("width",E.width).attr("height",E.height).attr("fill","white")}}};e.struct=function(g){var i=g.view.elements.plugins.plugin;i.struct(g);e.prototype=Object.create(i.prototype);e.prototype.constructor=e};f.exports=e},function(e,c,f){(function(g){var i=function(o,n){const u=ghca_charts.view.util.elementUtil;const s=ghca_charts.view.elements.plugins.plugin;const r=ghca_charts.view.util.regexUtil;const t=ghca_charts.view.util.eventUtil;s.apply(this,arguments);var v=this,q=this.drawPlugin,k=this.bindEvents;v.dispatch=g.dispatch("collapsed");v.config({collapsed:"{data.collapsed}"});var p=true,z,l,m="M-4 0 L4 0 M0 -4 L0 4 Z",j="M-4 0 L4 0 Z";this.collapsed=function(A){if(!arguments.length){return p}p=A;v.data().collapsed=A;u.setElementProperties(l,{d:(A==true?m:j)});if(v.isRender()){v.el.node().dispatchEvent(t.createCustomEvent(v.config().events,true,true,v.data()))}return this};this.nameSpace=function(){return"expandTool"};this.actualWidth=function(){return 5};this.actualHeight=function(){return 5};this.drawPlugin=function(A){q(A);z=u.createCircle(A,{r:5,"stroke-width":1,stroke:"#2585c0","stroke-opacity":1,fill:"white",opacity:0.6});l=u.createPath(A,{"stroke-width":2,stroke:"#2585c0",fill:"none"});v.collapsed(r.replace(r.dataRegex,v.config().collapsed,v.data())=="true");var B=r.replace(r.dataRegex,v.config().visible,v.data());if(B==false||B==v.config().visible){v.visible(false)}};this.bindEvents=function(A){k(A);A.on("click",function(){g.event.stopPropagation();v.collapsed(!v.collapsed())}).on("dblclick.extool",this.stopEvent).on("mouseover",this.stopEvent).on("mousedown",this.stopEvent).on("mouseover",this.stopEvent).on("mousemove",this.stopEvent)};this.stopEvent=function(){g.event.stopPropagation()}};i.struct=function(j){var k=j.view.elements.plugins.plugin;k.struct(j);i.prototype=Object.create(k.prototype);i.prototype.constructor=i};e.exports=i}.call(c,f(2)))},function(f,e){var c=function(j,g){const n=ghca_charts.view.util.elementUtil;const i=ghca_charts.view.elements.plugins.label.baseLabel;const p=ghca_charts.view.elements.plugins.nodes.baseNode;p.apply(this,arguments);var q=this;this.nameSpace=function(){return"groupNode"};this.data=function(){return g.data};this.bindEvents=function(r){};this.setLegendColor=function(){var t="#d7fea2",s="gray";if(g.legendColor){t=g.legendColor;s=g.legendColor}else{if(g.data&&g.data.nodeProperties){var r=g.data.nodeProperties;if(r.fill){t=r.fill}if(r.stroke){s=r.stroke}}}q.mainElement.attr("fill",t).attr("stroke",s)};this.drawPlugin=function(r){if(g.path===""){return}q.mainElement=n.createPath(r,q.data().nodeProperties);q.mainElement.attr("class","group-area").attr("d",g.path);q.setLegendColor();q.createLabel(r,g)};this.update=function(){if(q.mainElement){q.mainElement.attr("d",g.path);q.setLegendColor();if(q.label){if(g.path===""){q.label.el.attr("display","none")}else{q.label.el.attr("display","block");var r=g.data.label;r.name=r.name?r.name:g.name;q.label.update(r);q.labelLayout(q.labelG,q.label,g,true)}}}};this.createLabel=function(s,t){if(!t.data||!t.data.label){return}q.labelG=s.append("g").attr("pointer-events","none");var r=t.data.label;r.name=r.name?r.name:t.name;q.label=new i(q.labelG,r,q);q.label.render();q.labelLayout(q.labelG,q.label,t,false)};this.labelLayout=function(t,A,B){var z=B.data.labelPosition;if(z==="none"){t.style("display","none");return}else{t.style("display","block")}if(!z){z="top"}var v=z.toLowerCase(),r,u=0,s=0;var E=t.node().getBBox();var D;if(v==="bottom"){D=l(g.pathPoints);u=D[0];s=D[1]+E.height/2}else{if(v==="left"){D=k(g.pathPoints);u=D[0]-E.width/2;s=D[1]}else{if(v==="right"){D=o(g.pathPoints);u=D[0]+E.width/2;s=D[1]}else{if(v==="center"){var C=q.mainElement.node().getBBox();u=C.x+C.width/2;s=C.y+C.height/2}else{if(v==="insidetop"){D=m(g.pathPoints);u=D[0];s=D[1]+E.height/2}else{if(v==="insidebottom"){D=l(g.pathPoints);u=D[0];s=D[1]-E.height/2}else{if(v==="insideleft"){D=k(g.pathPoints);u=D[0]+E.width/2;s=D[1]}else{if(v==="insideright"){D=o(g.pathPoints);u=D[0]-E.width/2;s=D[1]}else{D=m(g.pathPoints);u=D[0];s=D[1]-E.height/2}}}}}}}}t.attr("transform","translate("+u+","+s+")")};var m=function(v){var s=null,A=[];for(var z,u=0,r=v.length;u<r;u++){z=v[u];if(s===null||z[1]<s[1]){s=z;A.length=0;A.push(z[0])}else{if(z[1]===s[1]){A.push(z[0])}}}if(A.length>1){var B=0;for(var u=0,r=A.length;u<r;u++){B+=A[u]}var t=B/A.length}return s?[t?t:s[0],s[1]]:null};var l=function(v){var s=null,A=[];for(var z,u=0,r=v.length;u<r;u++){z=v[u];if(s===null||z[1]>s[1]){s=z;A.length=0;A.push(z[0])}else{if(z[1]===s[1]){A.push(z[0])}}}if(A.length>1){var B=0;for(var u=0,r=A.length;u<r;u++){B+=A[u]}var t=B/A.length}return s?[t?t:s[0],s[1]]:null};var k=function(v){var s=null,z=[];for(var B,u=0,r=v.length;u<r;u++){B=v[u];if(s===null||B[0]<s[0]){s=B;z.length=0;z.push(B[1])}else{if(B[0]===s[0]){z.push(B[1])}}}if(z.length>1){var A=0;for(var u=0,r=z.length;u<r;u++){A+=z[u]}var t=A/z.length}return s?[s[0],t?t:s[1]]:null};var o=function(v){var s=null,z=[];for(var B,u=0,r=v.length;u<r;u++){B=v[u];if(s===null||B[0]>s[0]){s=B;z.length=0;z.push(B[1])}else{if(B[0]===s[0]){z.push(B[1])}}}if(z.length>1){var A=0;for(var u=0,r=z.length;u<r;u++){A+=z[u]}var t=A/z.length}return s?[s[0],t?t:s[1]]:null}};c.struct=function(g){var i=g.view.elements.plugins.nodes.baseNode;i.struct(g);c.prototype=Object.create(i.prototype);c.prototype.constructor=c};f.exports=c},function(f,c){var e=function(i,l){const k=ghca_charts.view.util.elementUtil;const g=ghca_charts.view.elements.plugins.label.baseLabel;const n=ghca_charts.view.util.colorUtil;const m=ghca_charts.view.elements.plugins.nodes.baseNode;m.apply(this,arguments);var j=this;this.nameSpace=function(){return"hBarNode"};this.data=function(){return l.data};this.mouseOverHandler=function(){j.mainElement.attr("fill-opacity",0.5)};this.mouseOutHandler=function(){j.mainElement.attr("fill-opacity",1)};this.selectedChange=function(o){};this.drawPlugin=function(r){var s=j.data();var t=s&&s.hasOwnProperty("clazzProperties")?s.clazzProperties:null;var o={rx:4};if(t){for(var q in t){o[q]=t[q]}}j.mainElement=r.append("rect");j.mainElement.attr("class","bar-rect").attr("fill",function(p){return p.legendColor}).attr("y",function(p){return p.y}).attr("height",function(p){return p.dy}).attr("x",1).attr("width",0);k.setElementProperties(j.mainElement,o);j.mainElement.transition().duration(j.animation()?1000:0).attr("x",function(p){return p.x}).attr("width",function(p){return p.dx});j.createLabel(r,l)};this.update=function(){if(j.mainElement){var s=j.data();var t=s&&s.hasOwnProperty("clazzProperties")?s.clazzProperties:null;var o={rx:4};if(t){for(var q in t){o[q]=t[q]}}j.mainElement.transition().duration(j.animation()?500:0).attr("fill",function(p){return p.legendColor}).attr("y",function(p){return p.y}).attr("height",function(p){return p.dy}).attr("x",function(p){return p.x}).attr("width",function(p){return p.dx});k.setElementProperties(j.mainElement,o);if(j.label){var r=l.data.label;r.name=r.format?j.formatStr(r.format)(l):l.value;j.label.update(r);j.labelLayout(j.labelG,j.label,l,true)}}};this.createLabel=function(p,q){if(!q.data||!q.data.label||q.value===null||q.value===undefined){return}j.labelG=p.append("g").attr("pointer-events","none");var o=q.data.label;o.name=o.format?j.formatStr(o.format)(q):q.value;j.label=new g(j.labelG,o,j);j.label.render();j.labelLayout(j.labelG,j.label,q,false)};this.labelLayout=function(q,u,v,A){var t=v.data.labelPosition;if(t==="none"){q.style("display","none");return}else{q.style("display","block")}if(!t){t="right"}var s=t.toLowerCase(),o,r=0,p=0;var z=q.node().getBBox();if(s=="bottom"){r=v.x+v.dx/2;p=v.y+v.dy+z.height/2}else{if(s=="left"){r=1+z.width/2;p=v.y+v.dy/2}else{if(s=="top"){r=v.x+v.dx/2;p=v.y-z.height/2}else{if(s=="center"){r=v.x+v.dx/2;p=v.y+v.dy/2}else{if(s=="insidetop"){r=v.x+v.dx/2;p=v.y+z.height/2}else{if(s=="insidebottom"){r=v.x+v.dx/2;p=v.y+v.dy-z.height/2}else{if(s=="insideleft"){r=v.x+z.width/2;p=v.y+v.dy/2}else{if(s=="insideright"){r=v.x+v.dx-z.width/2;p=v.y+v.dy/2}else{r=v.x+v.dx+z.width/2+3;p=v.y+v.dy/2}}}}}}}}if(A){q.transition().duration(j.animation()?500:0).attr("transform","translate("+r+","+p+")")}else{q.attr("transform","translate("+1+","+p+")").transition().duration(j.animation()?1000:0).attr("transform","translate("+r+","+p+")")}}};e.struct=function(g){var i=g.view.elements.plugins.nodes.baseNode;i.struct(g);e.prototype=Object.create(i.prototype);e.prototype.constructor=e};f.exports=e},function(e,c){var f=function(i,m){const l=ghca_charts.view.elements.plugins.plugin;const o=ghca_charts.view.elements.imageElement;const k=ghca_charts.view.util.objectUtil;const g=ghca_charts.view.util.regexUtil;l.apply(this,arguments);var j=this,n=i;j.config({imageWidth:32,imageHeight:32,opacity:1});this.nameSpace=function(){return"imageNode"};this.update=function(p){if(n){n.data(j.config())}};this.drawPlugin=function(q){var p=k.cloneObj(j.config());p.color=g.replace(g.dataRegex,p.color,j.data());n=new o(q,p);n.render()}};f.struct=function(g){var i=g.view.elements.plugins.plugin;i.struct(g);f.prototype=Object.create(i.prototype);f.prototype.constructor=f};e.exports=f},function(e,c){var f=function(j,m){const g=ghca_charts.view.elements.plugins.label.baseLabel;const o=ghca_charts.view.elements.plugins.nodes.baseNode;const l=ghca_charts.view.util.elementUtil;o.apply(this,arguments);var k=this,i={r:3,"stroke-width":1.5};this.nameSpace=function(){return"lineNode"};this.data=function(){return m.data};this.mouseOverHandler=function(){k.mainElement.attr("r",i.r+1).attr("stroke-width",i["stroke-width"]+1)};this.mouseOutHandler=function(){k.mainElement.attr("r",i.r).attr("stroke-width",i["stroke-width"])};this.selectedChange=function(p){};this.drawPlugin=function(q){n();k.mainElement=q.append("circle");var p=k.mainElement.attr("class","point-circle").attr("cx",function(r){return r.x}).attr("cy",function(r){return r.y}).attr("r",0).attr("fill",function(r){return r.hasOwnProperty("legendColor")?r.legendColor:"white"}).attr("stroke",function(r){return r.hasOwnProperty("legendColor")?r.legendColor:"blue"}).transition().duration(k.animation()?1000:0);l.setElementProperties(p,i);k.createLabel(q,m)};this.update=function(){if(k.mainElement){n();var q=k.mainElement.transition().duration(k.animation()?500:0).attr("cx",function(r){return r.x}).attr("cy",function(r){return r.y}).attr("fill",function(r){return r.hasOwnProperty("legendColor")?r.legendColor:"white"}).attr("stroke",function(r){return r.hasOwnProperty("legendColor")?r.legendColor:"blue"});l.setElementProperties(q,i)}if(k.label){var p=m.data.label;p.name=p.name?p.name:m.value;k.label.update(p);k.labelLayout(k.labelG,k.label,m,true)}};this.createLabel=function(q,r){if(!r.data||!r.data.label||r.value===null||r.value===undefined){return}k.labelG=q.append("g").attr("pointer-events","none");var p=r.data.label;p.name=p.name?p.name:r.value;k.label=new g(k.labelG,p,k);k.label.render();k.labelLayout(k.labelG,k.label,r,false)};this.labelLayout=function(t,A,B,D){var z=B.data.labelPosition;if(z==="none"){t.style("display","none");return}else{t.style("display","block")}if(!z){z="top"}var v=z.toLowerCase(),q,u=0,s=0;var C=t.node().getBBox();var p=i.r+i["stroke-width"]+2;if(v=="bottom"){u=B.x;s=B.y+p+C.height/2}else{if(v=="left"){u=B.x-p-C.width/2;s=B.y}else{if(v=="right"){u=B.x+p+C.width/2;s=B.y}else{if(v=="center"){u=B.x;s=B.y}else{u=B.x;s=B.y-p-C.height/2}}}}if(D){t.transition().duration(k.animation()?500:0).attr("transform","translate("+u+","+s+")")}else{t.attr("transform","translate("+u+","+s+")").transition().duration(k.animation()?1000:0).attr("transform","translate("+u+","+s+")")}};var n=function(){var r=k.data();var s=r&&r.hasOwnProperty("clazzProperties")?r.clazzProperties:null;i={r:3,"stroke-width":1.5};if(s){for(var q in s){i[q]=s[q]}}}};f.struct=function(g){var i=g.view.elements.plugins.nodes.baseNode;i.struct(g);f.prototype=Object.create(i.prototype);f.prototype.constructor=f};e.exports=f},function(e,c,f){(function(i){var g=function(m,l){const r=ghca_charts.view.elements.plugins.plugin;const q=ghca_charts.view.util.regexUtil;const j=ghca_charts.view.util.classFactory;const p=ghca_charts.events.BaseEvent;const s=ghca_charts.view.util.eventUtil;r.apply(this,arguments);var u=this,n=this.drawPlugin,k=this.bindEvents;u.dispatch=i.dispatch("selectedChange","collapsed");u.mainPlugin=null;u.backGroundPlugin=null;u.labelContainer=null;u.labelPlugin=null;u.config({main:{clazz:"circle",config:{cx:0,cy:0,radius:10,border:2,borderColor:"green",linecap:"butt",color:"red"}},backGround:{clazz:"circle",config:{cx:0,cy:0,radius:15,border:2,borderColor:"green",linecap:"butt",color:"none"}},label:{clazz:"label",position:"{labelPosition}",rotate:"{labelRotateAngle}",config:{text:"{name}",maxWidth:60,backGroundColor:"green",backGroundOpacity:0.3,borderRadius:4,padding:4,fontColor:"0x000000",fontFamily:"宋体",fontSize:12,textLine:3,visible:true}},plugins:[{clazz:"expandTool",config:{}}]});var o=false;this.selected=function(z){if(!arguments.length){return o}o=z;u.dispatch.call("selectedChange",this,new p(u,{selected:o}));return this};this.selectedChange=function(z){if(u.backGroundPlugin){if(z){u.backGroundPlugin.visible(true)}else{u.backGroundPlugin.visible(false)}}};this.mouseOverHandler=function(){if(!u.selected()&&u.backGroundPlugin){u.backGroundPlugin.visible(true)}};this.mouseOutHandler=function(){if(!u.selected()&&u.backGroundPlugin){u.backGroundPlugin.visible(false)}};this.nameSpace=function(){return"node"};this.actualWidth=function(){var A=u.backGroundPlugin?u.backGroundPlugin.actualWidth():0;var z=u.mainPlugin?u.mainPlugin.actualWidth():0;return A>z?A:z};this.actualHeight=function(){var A=u.backGroundPlugin?u.backGroundPlugin.actualHeight():0;var z=u.mainPlugin?u.mainPlugin.actualHeight():0;return A>z?A:z};this.update=function(A){var z=u.config();if(z.backGround&&u.backGroundPlugin){u.backGroundPlugin.config(z.backGround.config);u.backGroundPlugin.update();u.backGroundPlugin.visible(false)}if(z.main&&u.mainPlugin){u.mainPlugin.ownerData(u.ownerData());u.mainPlugin.config(z.main.config);u.mainPlugin.update()}if(z.label&&u.labelContainer){u.labelPlugin.config(z.label.config);u.labelPlugin.update();v()}};this.drawPlugin=function(B){n(B);B.attr("style","cursor:hand;");var A=u.config();if(A.backGround){u.backGroundPlugin=j.newPluginInstance(A.backGround.clazz,[B,u.data()]);u.backGroundPlugin.config(A.backGround.config);u.backGroundPlugin.render();u.backGroundPlugin.visible(false)}if(A.main){u.mainPlugin=j.newPluginInstance(A.main.clazz,[B,u.data()]);u.mainPlugin.ownerData(u.ownerData());u.mainPlugin.config(A.main.config);u.mainPlugin.render()}if(A.label){u.labelContainer=B.append("svg:g");u.labelPlugin=j.newPluginInstance(A.label.clazz,[u.labelContainer,u.data()]);u.labelPlugin.config(A.label.config);u.labelPlugin.render();v()}var z=A.plugins;if(z&&z.length>0){z.forEach(function(E,C){var D=j.newPluginInstance(E.clazz,[B,u.data()]);D.config(E.config);D.render();t(D,E)})}};this.bindEvents=function(z){k(z);z.on("mouseover",function(B){var A=s.createCustomEvent(p.SHOW_TOOL_TIP,true,true);i.select(this).node().dispatchEvent(A);u.mouseOverHandler()});z.on("mousemove",function(B){var A=s.createCustomEvent(p.UPDATE_TOOL_TIP,true,true,B);i.select(this).node().dispatchEvent(A)});z.on("mouseout",function(B){var A=s.createCustomEvent(p.HIDE_TOOL_TIP,true,true);i.select(this).node().dispatchEvent(A);u.mouseOutHandler()});z.on("click",function(A){u.selected(!o)});z.on("dblclick.node",function(A){if(u.config().events){u.el.node().dispatchEvent(s.createCustomEvent(u.config().events,true,true,A))}});u.dispatch.on("selectedChange."+u.nameSpace(),function(A){u.selectedChange(A.data.selected)})};function t(D,E){var B=E.xPos,A=E.yPos,G=0,F=0;var I=u.actualWidth(),C=u.actualHeight(),H=D.actualHeight(),z=D.actualWidth();if(B=="left"){G=-I/2-z}if(B=="right"){G=I/2}if(A=="top"){F=-C/2-H}if(A=="bottom"){F=C/2}D.transform("translate("+[G,F]+")")}function v(){var A=u.config();var D=q.replace(q.dataRegex,A.label.position,u.data());var B=q.replace(q.dataRegex,A.label.rotate,u.data());var E=q.replace(q.dataRegex,A.label.gap,u.data());if(!D){D="bottom"}if(isNaN(E)){E=10}var H=u.actualWidth(),C=u.actualHeight(),G=u.labelPlugin.actualHeight(),z=u.labelPlugin.actualWidth(),F=[0,0];if(D=="top"){F=[-z/2,(-C/2-G-E)]}if(D=="bottom"){F=[-z/2,(C/2+E)]}if(D=="left"){F=[(-z-H/2),-G/2]}if(D=="right"){F=[H/2,-G/2]}if(D=="center"){F=[-z/2,-G/2]}if(D=="start"){F=[(-z-H/2),-G/2]}if(D=="end"){F=[H/2,-G/2]}u.labelPlugin.transform("translate("+F+")");u.labelContainer.attr("transform","rotate("+B+")")}};g.struct=function(j){var k=j.view.elements.plugins.plugin;k.struct(j);g.prototype=Object.create(k.prototype);g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(e,c){var f=function(m,j){const t=ghca_charts.view.elements.plugins.plugin;const k=ghca_charts.view.elements.pathElement;const s=ghca_charts.view.util.objectUtil;const o=ghca_charts.view.util.regexUtil;const g=ghca_charts.view.util.classFactory;const q=ghca_charts.view.elements.plugins.label.label;t.apply(this,arguments);var v=this,i=m,p=null,n=null,l=null,u=[];v.config({lineLength:100,nodePadding:10,border:2,borderColor:"black",linecap:"butt"});this.actualWidth=function(){return i?i.svgElement.node().getBBox().width:0};this.actualHeight=function(){return i?i.svgElement.node().getBBox().height:0};this.nameSpace=function(){return"pathNode"};this.update=function(C){var z=0,A=v.config();if(i){z=r(A);i.data(A);if(p){p.attr("transform","translate("+[z+A.nodePadding,-48/2-2]+")")}}if(n){n.data(A.label1);n.el.attr("transform","translate("+[z+10,6]+")")}if(l){l.data(A.label2);var B=l.el.node().getBBox();l.el.attr("transform","translate("+[z+(v.actualWidth()-B.width)/2,6]+")")}};this.drawPlugin=function(H){var D=s.cloneObj(v.config());D.color=o.replace(o.dataRegex,D.color,v.data());D.borderColor=o.replace(o.dataRegex,D.borderColor,v.data());var G=r(D);i=new k(H,D);i.render();p=H.append("g");p.attr("transform","translate("+[G+D.nodePadding,-48/2-2]+")");n=new q(H,v.data());n.config(D.label1);n.render();n.el.attr("transform","translate("+[G+10,6]+")");l=new q(H,v.data());l.config(D.label2);l.render();var F=l.el.node().getBBox();l.el.attr("transform","translate("+[G+(v.actualWidth()-F.width)/2,6]+")");var A=j.data&&j.data.hasOwnProperty("nodes")?j.data.nodes:null;if(A&&A.length>0){for(var B,E=0,I=A.length;E<I;E++){B=A[E];var z;if(B.nodeRenderer&&v.ownerData()){z=v.ownerData().renderers[B.nodeRenderer]}var C=g.newNodeInstance(z.clazz,[p,B]);C.config(z.config);C.render();C.el.attr("transform","translate("+[E*(48+30),0]+")");B.ins=C;u.push(C)}}};var r=function(B){var z=o.replace(o.dataRegex,B.lineLength,v.data());if(isNaN(z)){z=100}var D=v.data().x;var E=v.data().parent.x;var A=(E-D)/2;var C=A+z;B.path="M"+A+" 0L "+C+" 0";return A}};f.struct=function(g){var i=g.view.elements.plugins.plugin;i.struct(g);f.prototype=Object.create(i.prototype);f.prototype.constructor=f};e.exports=f},function(e,c,f){(function(i){var g=function(k,o){const m=ghca_charts.view.util.elementUtil;const j=ghca_charts.view.elements.plugins.label.baseLabel;const q=ghca_charts.view.util.colorUtil;const p=ghca_charts.view.elements.plugins.nodes.baseNode;p.apply(this,arguments);var l=this;var n=false;this.isDragable=function(r){if(!arguments.length){return n}n=r;return this};this.nameSpace=function(){return"sankeyNode"};this.data=function(){return o.data};this.setLegendColor=function(){if(o&&o.legendColor){m.setElementProperties(l.mainElement,{fill:o.legendColor})}};this.mouseOverHandler=function(){var r=o.legendColor?o.legendColor:q.getColor(0);l.mainElement.attr("stroke-width",1).attr("stroke",function(s){return i.rgb(r).darker(3)})};this.mouseOutHandler=function(){var r=o.legendColor?o.legendColor:q.getColor(0);l.mainElement.attr("stroke-width",1).attr("stroke",function(s){return i.rgb(r).darker(1)})};this.selectedChange=function(r){};this.drawPlugin=function(t){l.mainElement=m.createRect(t,l.data().rectProperties);var s=o.legendColor?o.legendColor:q.getColor(0);var r=l.isDragable()?"move":"default";var u=l.animation()?300:0;l.mainElement.style("cursor",r).style("fill-opacity",1).style("fill",function(v){return s}).attr("height",function(v){return v.dy}).attr("stroke",function(v){return i.rgb(s).darker(1)}).style("transform","scale(0,1)").transition().duration(u).ease(i.easeLinear).delay(function(v){return v.level*(u-10)}).style("transform","scale(1,1)");l.setLegendColor()}};g.struct=function(j){var k=j.view.elements.plugins.nodes.baseNode;k.struct(j);g.prototype=Object.create(k.prototype);g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(e,c){var f=function(k,g){const n=ghca_charts.view.util.elementUtil;const i=ghca_charts.view.elements.plugins.label.baseLabel;const l=ghca_charts.view.util.colorUtil;const o=ghca_charts.view.elements.plugins.nodes.baseNode;o.apply(this,arguments);var p=this;var m=null;this.title=function(q){if(!arguments.length){return m}m=q;return this};var j=null;this.titleFunction=function(q){if(!arguments.length){return j}j=q;return this};this.nameSpace=function(){return"treemapNode"};this.data=function(){return g.data};this.mouseOverHandler=function(){if(p.mainElement){p.mainElement.attr("fill-opacity",0.75)}};this.mouseOutHandler=function(){if(p.mainElement){p.mainElement.attr("fill-opacity",1)}};this.selectedChange=function(q){};this.drawPlugin=function(q){p.mainElement=q.append("rect");p.mainElement.attr("id",function(r){return r.data.id}).attr("fill",function(r){return r.data&&r.data.hasOwnProperty("legendColor")?r.data.legendColor:l.getColor(r.parent?r.parent.data.id:"")});if(p.titleFunction()){p.mainElement.append("title").attr("class","rect-title").text(p.titleFunction())}else{if(p.title()){p.mainElement.append("title").attr("class","rect-title").text(p.formatStr(p.title()))}}q.append("clipPath").attr("id",function(r){return"treemap-node-clip-"+r.data.id}).append("use").attr("xlink:href",function(r){return"#"+r.data.id});q.attr("clip-path",function(r){return"url(#treemap-node-clip-"+r.data.id+")"});p.mainElement.attr("width",0).attr("height",0).transition().duration(p.animation()?(p.isChartFirstInit()?1000:500):0).attr("width",function(r){return r.x1-r.x0}).attr("height",function(r){return r.y1-r.y0});p.createLabel(q,g)};this.update=function(q){if(p.mainElement){p.mainElement.attr("fill",function(s){return s.data&&s.data.hasOwnProperty("legendColor")?s.data.legendColor:l.getColor(q.parent?q.parent.data.id:"")}).transition().duration(p.animation()?500:0).attr("width",function(s){return q.x1-q.x0}).attr("height",function(s){return q.y1-q.y0});if(p.titleFunction()){p.mainElement.select("title.rect-title").text(p.titleFunction())}else{if(p.title()){p.mainElement.select("title.rect-title").text(p.formatStr(p.title()))}}if(p.label){var r=g.data.data.label;r.name=r.format?p.formatStr(r.format)(g.data):g.data.name;p.label.update();p.labelLayout(p.labelG,p.label,g.data,true)}}};this.createLabel=function(r,s){if(!s.data||!s.data.data||!s.data.data.label||s.data.name===null||s.data.name===undefined){return}p.labelG=r.append("g").attr("pointer-events","none");var q=s.data.data.label;q.name=q.format?p.formatStr(q.format)(s.data):s.data.name;p.label=new i(p.labelG,q,p);p.label.render();p.labelLayout(p.labelG,p.label,s.data,false)};this.labelLayout=function(t,A,B,F){if(!p.mainElement||!p.mainElement.node()){return}var z=B.data.labelPosition;if(!z){z="center"}var v=z.toLowerCase(),q,u=0,s=0;var E=t.node().getBBox();var C;k.each(function(G){C=G});var r=C.x1-C.x0;var D=C.y1-C.y0;if(v=="bottom"){u=E.width/2;s=D-E.height/2}else{if(v=="left"){u=E.width/2;s=D/2}else{if(v=="right"){u=r-E.width/2;s=D/2}else{if(v=="top"){u=E.width/2;s=E.height/2}else{u=r/2;s=D/2}}}}if(E.width>r){u=E.width/2}if(F){t.transition().duration(p.animation()?500:0).attr("transform","translate("+u+","+s+")")}else{t.transition().duration(p.animation()?(p.isChartFirstInit()?1000:500):0).attr("transform","translate("+u+","+s+")")}}};f.struct=function(g){var i=g.view.elements.plugins.nodes.baseNode;i.struct(g);f.prototype=Object.create(i.prototype);f.prototype.constructor=f};e.exports=f},function(f,e){var c=function(i,m){const l=ghca_charts.view.elements.plugins.plugin;const g=ghca_charts.view.util.regexUtil;l.apply(this,arguments);var k=this,j=i;k.config({xlink:"#{data.image}",width:"{data.imageWidth}",height:"{data.imageHeight}"});this.actualWidth=function(){return g.replace(g.dataRegex,k.config().width,k.data())};this.actualHeight=function(){return g.replace(g.dataRegex,k.config().height,k.data())};this.nameSpace=function(){return"usePlugin"};this.update=function(n){j.attr("xlink:href",g.replace(g.dataRegex,k.config().xlink,k.data()))};this.drawPlugin=function(n){j=n.append("use").attr("xlink:href",g.replace(g.dataRegex,k.config().xlink,k.data()))}};c.struct=function(g){var i=g.view.elements.plugins.plugin;i.struct(g);c.prototype=Object.create(i.prototype);c.prototype.constructor=c};f.exports=c},function(e,c){var f=function(i,l){const g=ghca_charts.view.elements.plugins.label.baseLabel;const o=ghca_charts.view.elements.plugins.nodes.baseNode;const k=ghca_charts.view.util.elementUtil;const n=ghca_charts.view.util.colorUtil;const m=ghca_charts.view.util.constant;o.apply(this,arguments);var j=this;this.nameSpace=function(){return"vBarNode"};this.data=function(){return l.data};this.mouseOverHandler=function(){j.mainElement.attr("fill-opacity",0.5)};this.mouseOutHandler=function(){j.mainElement.attr("fill-opacity",1)};this.selectedChange=function(p){};this.drawPlugin=function(t){var u=j.data();var v=u&&u.hasOwnProperty("clazzProperties")?u.clazzProperties:null;var r={rx:4};if(v){for(var s in v){r[s]=v[s]}}j.mainElement=t.append("rect");j.mainElement.attr("class","bar-rect").attr("fill",function(p){return p.legendColor}).attr("x",function(p){return p.x}).attr("width",function(p){return p.dx}).attr("y",function(p){return p.startY}).attr("height",0);k.setElementProperties(j.mainElement,r);var q=r.fill;if(q instanceof Array){k.setElementProperties(j.mainElement,{fill:"url(#"+n.getLinearGradientDef(j.mainElement.node(),q,m.HOR_DRAG_TYPE)+")"})}j.mainElement.transition().duration(j.animation()?1000:0).attr("y",function(p){return p.y}).attr("height",function(p){return p.dy});j.createLabel(t,l)};this.update=function(){if(j.mainElement){var t=j.data();var u=t&&t.hasOwnProperty("clazzProperties")?t.clazzProperties:null;var q={rx:4};if(u){for(var r in u){q[r]=u[r]}}j.mainElement.transition().duration(j.animation()?500:0).attr("fill",function(p){return p.legendColor}).attr("x",function(p){return p.x}).attr("width",function(p){return p.dx}).attr("y",function(p){return p.y}).attr("height",function(p){return p.dy});k.setElementProperties(j.mainElement,q)}if(j.label){var s=l.data.label;s.name=s.format?j.formatStr(s.format)(l):l.value;j.label.update(s);j.labelLayout(j.labelG,j.label,l,true)}};this.createLabel=function(q,r){if(!r.data||!r.data.label||r.value===null||r.value===undefined){return}j.labelG=q.append("g").attr("pointer-events","none");var p=r.data.label;p.name=p.format?j.formatStr(p.format)(r):r.value;j.label=new g(j.labelG,p,j);j.label.render();j.labelLayout(j.labelG,j.label,r,false)};this.labelLayout=function(r,v,z,B){var u=z.data.labelPosition;if(u==="none"){r.style("display","none");return}else{r.style("display","block")}if(!u){u="top"}var t=u.toLowerCase(),p,s=0,q=0;var A=r.node().getBBox();if(t=="bottom"){s=z.x+z.dx/2;q=z.y+z.dy+A.height/2}else{if(t=="left"){s=z.x-z.dx/2;q=z.y+z.dy/2}else{if(t=="right"){s=z.x+z.dx+z.dx/2;q=z.y+z.dy/2}else{if(t=="center"){s=z.x+z.dx/2;q=z.y+z.dy/2}else{if(t=="insidetop"){s=z.x+z.dx/2;q=z.y+A.height/2}else{if(t=="insidebottom"){s=z.x+z.dx/2;q=z.y+z.dy-A.height/2}else{if(t=="insideleft"){s=z.x+A.width/2;q=z.y+z.dy/2}else{if(t=="insideright"){s=z.x+z.dx-A.width/2;q=z.y+z.dy/2}else{s=z.x+z.dx/2;q=z.y-A.height/2-1}}}}}}}}if(B){r.transition().duration(j.animation()?500:0).attr("transform","translate("+s+","+q+")")}else{r.attr("transform","translate("+s+","+z.startY+")").transition().duration(j.animation()?1000:0).attr("transform","translate("+s+","+q+")")}}};f.struct=function(g){var i=g.view.elements.plugins.nodes.baseNode;i.struct(g);f.prototype=Object.create(i.prototype);f.prototype.constructor=f};e.exports=f},function(e,c,f){(function(i){var g=function(k,n){const m=ghca_charts.view.elements.plugins.plugin;const j=ghca_charts.view.util.regexUtil;const o=ghca_charts.view.util.eventUtil;m.apply(this,arguments);var l=this;l.config({xlink:"{xlink}",width:"{width}",height:"{height}",data:"{value}"});this.actualWidth=function(){return 0};this.actualHeight=function(){return 0};this.nameSpace=function(){return"VerTool"};this.update=function(p){};this.drawPlugin=function(q){var r=j.replace(j.dataRegex,l.config().data,l.data());if(r instanceof Array){var p=q.selectAll("use").data(r,function(s){return s.xlink});p.exit().remove();p.enter().append("use").attr("xlink:href",function(t,s){return j.replace(j.dataRegex,l.config().xlink,t)}).attr("y",function(t,s){return j.replace(j.dataRegex,l.config().height,t)*s}).on("dblclick.verTool",function(s){i.event.stopPropagation();l.el.node().dispatchEvent(o.createCustomEvent(l.config().events,true,true,s))})}}};g.struct=function(j){var k=j.view.elements.plugins.plugin;k.struct(j);g.prototype=Object.create(k.prototype);g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(module,exports){var Plugin=function(_element,_data){const ElementUtil=ghca_charts.view.util.elementUtil;const RegexUtil=ghca_charts.view.util.regexUtil;var self=this;self.el=undefined;var isRender=false;this.isRender=function(){return isRender};var config={};this.config=function(value){if(!arguments.length){return config}config=value;return this};this.nameSpace=function(){return"plugin"};var visible=true;var i=1;this.visible=function(_visible){if(!arguments.length){return visible}visible=_visible;if(self.el){if(_visible==true){ElementUtil.setElementProperties(self.el,{display:"block"})}else{ElementUtil.setElementProperties(self.el,{display:"none"})}}return this};var data=_data;this.data=function(){if(!arguments.length){return data}data=arguments[0];return this};this.itemData=function(){return _data};var animation=true;this.animation=function(value){if(!arguments.length){return animation}animation=value;return this};this.actualWidth=function(){return self.el.node().getBBox().width};this.actualHeight=function(){return self.el.node().getBBox().height};var isChartFirstInit=false;this.isChartFirstInit=function(value){if(!arguments.length){return isChartFirstInit}isChartFirstInit=value;return this};var ownerData=null;this.ownerData=function(value){if(!arguments.length){return ownerData}ownerData=value;return this};this.mainContainer=function(){return self.el};this.formatStr=function(str){return function(d){return str.replace(RegexUtil.jsRegex,function(){return arguments.length>1?eval(arguments[1]):""})}};this.render=function(){if(isRender==true){self.el.datum(_data);self.update(self.el);return}self.el=_element.append("g").datum(_data);self.el.classed(self.nameSpace(),true);self.visible(self.visible());self.drawPlugin(self.el);self.bindEvents(self.el);isRender=true};this.update=function(g){};this.drawPlugin=function(g){};this.bindEvents=function(g){};this.transform=function(value){if(!arguments.length){if(self.el){return self.el.attr("transform")}}if(self.el){self.el.attr("transform",value)}};this.addEventListener=function(){var value=self.dispatch.on.apply(self.dispatch,arguments);return value===self.dispatch?self:value}};Plugin.struct=function(ghca_charts){Plugin.prototype.constructor=Plugin};module.exports=Plugin},function(e,c){var f=function(){this.getMap=function(){var g={};g.percentageinfo=ghca_charts.view.elements.plugins.tool.percentageInfo;g.tooltip=ghca_charts.view.elements.plugins.tool.toolTip;g.label=ghca_charts.view.elements.plugins.label.label;g.expandtool=ghca_charts.view.elements.plugins.nodes.expandTool;g.circle=ghca_charts.view.elements.plugins.nodes.circle;g.imagenode=ghca_charts.view.elements.plugins.nodes.imageNode;g.demoimagenode=ghca_charts.view.elements.plugins.nodes.demoImageNode;g.pathnode=ghca_charts.view.elements.plugins.nodes.pathNode;g.vertool=ghca_charts.view.elements.plugins.nodes.verTool;g.useplugin=ghca_charts.view.elements.plugins.nodes.usePlugin;return g}};f.struct=function(g){f.prototype.constructor=f};e.exports=f},function(f,e){var c=function(g,m){const n=ghca_charts.view.elements.plugins.label.label;const l=ghca_charts.view.elements.plugins.plugin;l.apply(this,arguments);var j=this;var k;j.config({label:{clazz:"label",config:{text:"{value}",maxWidth:100,backGroundColor:"none",backGroundOpacity:0,borderRadius:4,padding:4,fontColor:"0x000000",fontFamily:"宋体",fontSize:12}}});this.nameSpace=function(){return"percentageInfo"};this.update=function(p){if(k){var o=j.config();k.config(o.label.config);k.data(j.data());k.render();i()}};this.drawPlugin=function(p){var o=j.config();k=new n(p,j.data());k.config(o.label.config);k.render();i()};function i(){var o=k.actualWidth(),p=k.actualHeight();k.transform("translate("+(-o/2)+","+(-p/2)+")")}};c.struct=function(g){var i=g.view.elements.plugins.plugin;i.struct(g);c.prototype=Object.create(i.prototype);c.prototype.constructor=c};f.exports=c},function(e,c,f){(function(i){var g=function(j,o){const n=ghca_charts.view.elements.plugins.plugin;const p=ghca_charts.view.elements.plugins.label.label;n.apply(this,arguments);var k=this;var l;k.config({visible:false,fadeInSpeed:1000,label:{text:"{name}:{value}",maxWidth:60,backGroundColor:"green",backGroundOpacity:0.3,borderRadius:4,padding:4,fontColor:"0x000000",fontFamily:"宋体",fontSize:12}});var m;this.toolTipFunc=function(q){if(!arguments.length){return}m=q};this.nameSpace=function(){return"toolTip"};this.update=function(q){q.style("opacity",0);l.data(k.data());l.render()};this.drawPlugin=function(q){k.visible(k.config().visible);l=new p(q,k.data());l.config(k.config().label);if(m){l.textFunc(m)}l.render()};this.showTooltip=function(r){var q=k.config().fadeInSpeed;k.el.transition().duration(q).style("opacity",function(){return 1});k.moveTooltip(r)};this.moveTooltip=function(q){k.el.attr("transform",function(t){var s=i.mouse(this.parentNode);var r=Number(s[0])+5,u=Number(s[1]-l.actualHeight()-2);return"translate("+r+","+u+")"})};this.hideTooltip=function(q){var r=k.config().fadeInSpeed;k.el.transition().duration(r).style("opacity",function(){return 0})}};g.struct=function(j){var k=j.view.elements.plugins.plugin;k.struct(j);g.prototype=Object.create(k.prototype);g.prototype.constructor=g};e.exports=g}.call(c,f(2)))},function(f,e){var c=function(q,t){const u=ghca_charts.view.elements.baseElement;u.apply(this,arguments);var r=this;r.svgElement=q.append("rect");var l=this.render;var z="butt";this.linecap=function(D){if(!arguments.length){return z}z=D;return this};var i=1;this.opacity=function(D){if(!arguments.length){return i}i=D;return this};var o=1;this.borderOopacity=function(D){if(!arguments.length){return o}o=D;return this};var n=0;this.x=function(D){if(!arguments.length){return n}n=D;return this};var m=0;this.y=function(D){if(!arguments.length){return m}m=D;return this};var j;this.ry=function(D){if(!arguments.length){return j}j=D;return this};var k;this.rx=function(D){if(!arguments.length){return k}k=D;return this};var s=0;this.height=function(D){if(!arguments.length){return s}s=D;return this};var v=0;this.width=function(D){if(!arguments.length){return v}v=D;return this};var B=0;this.border=function(D){if(!arguments.length){return B}B=D;return this};var p;this.dashoffset=function(D){if(!arguments.length){return p}p=D;return this};var A;this.dasharray=function(D){if(!arguments.length){return A}A=D;return this};var g="none";this.borderColor=function(D){if(!arguments.length){return g}g=D;return this};var C="none";this.color=function(D){if(!arguments.length){return C}C=D;return this};this.render=function(){l();r.svgElement.style("stroke",r.borderColor()).style("stroke-linecap",r.linecap()).style("stroke-width",r.border()).style("stroke-opacity",r.borderOopacity()).style("fill",r.color()).style("fill-opacity",r.opacity()).attr("ry",r.ry()).attr("rx",r.rx()).attr("width",r.width()).attr("height",r.height()).attr("x",r.x()).attr("y",r.y());if(r.dasharray()){r.svgElement.style("stroke-dasharray",r.dasharray())}if(r.dashoffset()){r.svgElement.style("stroke-dashoffset",r.dashoffset())}};this.dataChangeHandler=function(D){r.render()}};c.struct=function(g){var i=g.view.elements.baseElement;i.struct(g);c.prototype=Object.create(i.prototype);c.prototype.constructor=c};f.exports=c},function(module,exports,__webpack_require__){(function(d3){var BaseShape=function(_element,_data){const ObjectUtil=ghca_charts.view.util.objectUtil;const BaseEvent=ghca_charts.events.BaseEvent;const EventUtil=ghca_charts.view.util.eventUtil;const RegexUtil=ghca_charts.view.util.regexUtil;var self=this;var mainContainer=null;this.mainContainer=function(value){if(!arguments.length){return mainContainer}mainContainer=value;return this};var className="mainContainer";this.className=function(value){if(!arguments.length){return className}className=value;return this};var data=_data;this.data=function(value){if(!arguments.length){return data}data=value;return this};var defaultConfig=null;this.defaultConfig=function(value){if(!arguments.length){return defaultConfig}defaultConfig=value;return this};var animation=true;this.animation=function(value){if(!arguments.length){return animation}animation=value;return this};this.getMainCon=function(){return self.mainContainer()};this.render=function(){if(!_element||!_data){return}self.renderChildren();self.parseConfig(_data);self.update();self.addListeners()};this.addListeners=function(){var shape=self.mainContainer();if(shape){shape.on("mouseover",function(d){var evt=EventUtil.createCustomEvent(BaseEvent.SHOW_TOOL_TIP,true,true);d3.select(this).node().dispatchEvent(evt);self.mouseOverHandler()});shape.on("mousemove",function(d){var evt=EventUtil.createCustomEvent(BaseEvent.UPDATE_TOOL_TIP,true,true,_data);d3.select(this).node().dispatchEvent(evt)});shape.on("mouseout",function(d){var evt=EventUtil.createCustomEvent(BaseEvent.HIDE_TOOL_TIP,true,true);d3.select(this).node().dispatchEvent(evt);self.mouseOutHandler()})}};this.mouseOverHandler=function(){var shape=self.mainContainer();if(shape){shape.attr("opacity",0.5)}};this.mouseOutHandler=function(){var shape=self.mainContainer();if(shape){shape.attr("opacity",1)}};this.renderChildren=function(){};this.update=function(){};this.parseConfig=function(d){if(!d||!d.data||!d.data.config){return}var config=d.data.config;for(var k in config){if(k==="style"){for(var m in config.style){if(!defaultConfig.style){defaultConfig.style={}}defaultConfig.style[m]=self.scriptRun(d,config.style[m])}}else{defaultConfig[k]=self.scriptRun(d,config[k])}}if(d.hasOwnProperty("legendColor")){defaultConfig.style.fill=d.legendColor}};this.scriptRun=function(d,str){return(ObjectUtil.isString(str)&&str)?str.replace(RegexUtil.jsRegex,function(){return arguments.length>1?eval(arguments[1]):""}):str};this.setGroupStyle=function(group,styleConfig){if(!group.node()||!styleConfig){return}var obj;group.each(function(){obj=this;for(var k in styleConfig){obj.style[k]=styleConfig[k]}})};this.destroy=function(){if(self.mainContainer()){self.mainContainer().remove()}}};BaseShape.struct=function(ghca_charts){BaseShape.prototype.constructor=BaseShape};module.exports=BaseShape}.call(exports,__webpack_require__(2)))},function(f,e){var c=function(g,j){const k=ghca_charts.view.elements.shape.baseShape;k.apply(this,arguments);var i=this;i.defaultConfig({cx:0,cy:0,r:3,style:{fill:"steelblue",stroke:"#aaa","stroke-opacity":1,"stroke-width":1,"fill-opacity":1}});this.renderChildren=function(){if(!i.mainContainer()){var l=g.append("circle").attr("class",i.className());i.mainContainer(l)}};this.update=function(n){var m=i.mainContainer();if(!m){return}i.parseConfig(j);var l=i.defaultConfig();if(!n){m.attr("r",0)}m.attr("cx",j.x).attr("cy",j.y).transition().duration(i.animation()?(n?500:1000):0).attr("r",l.r);i.setGroupStyle(m,l.style)}};c.struct=function(g){var i=g.view.elements.shape.baseShape;i.struct(g);c.prototype=Object.create(i.prototype);c.prototype.constructor=c};f.exports=c},function(f,c){var e=function(g,j){const k=ghca_charts.view.elements.shape.baseShape;k.apply(this,arguments);var i=this;i.defaultConfig({x:0,y:0,width:5,height:5,style:{fill:"steelblue",stroke:"#aaa","stroke-opacity":1,"stroke-width":1,"fill-opacity":1}});this.renderChildren=function(){if(!i.mainContainer()){var l=g.append("rect").attr("class",i.className());i.mainContainer(l)}};this.update=function(n){var m=i.mainContainer();if(!m){return}i.parseConfig(j);var l=i.defaultConfig();if(!n){m.attr("width",0).attr("height",0)}m.attr("x",j.x).attr("y",j.y).transition().duration(i.animation()?(n?500:1000):0).attr("width",l.width).attr("height",l.height);i.setGroupStyle(m,l.style)}};e.struct=function(g){var i=g.view.elements.shape.baseShape;i.struct(g);e.prototype=Object.create(i.prototype);e.prototype.constructor=e};f.exports=e},function(f,e){var c=function(l,q){const m=ghca_charts.view.component.baseComponent;const o=ghca_charts.view.component.charts.chart;const g=ghca_charts.view.component.svg;const r=ghca_charts.view.util.objectUtil;const u=ghca_charts.view.util.dataParser;if(arguments.length!=2){throw new Error("传入参数个数错误,当前个数"+arguments.length+",应传入两个参数。")}if(typeof(l)=="string"){l=document.getElementById(l)}if(!l){throw new Error("Graph构造方法中传入的容器_ele:"+l+"无法找到。")}var v=this;var k=q;this.config=function(A){if(!arguments.length){return k}k=A;return this};this.parentWidth=function(){return l?l.clientWidth:0};this.parentHeight=function(){return l?l.clientHeight:0};var j=NaN;this.width=function(A){if(!arguments.length){return isNaN(j)?v.parentWidth():j}j=A;return this};var s=NaN;this.height=function(A){if(!arguments.length){return isNaN(s)?v.parentHeight():s}s=A;return this};var i=true;this.autoResize=function(A){if(!arguments.length){return i}i=A;return this};this.resizeHandler=function(){v.resize.call(v)};var t=function(){console.log("Graph.init()");v.parent=l;n();v.refreshData(v.config());p()};var n=function(){console.log("Graph.parseConfig()");var A=v.config();if(r.isString(A)){A=JSON.parse(A);v.config(A)}u.parse(A)};var p=function(){if(v.autoResize()){window.onresize=v.resizeHandler}};var z=function(){if(v.topComponent&&v.topComponent.children().length>0){return v.topComponent.children()[0]}return null};this.render=function(){console.log("Graph.render()");var B=new Date().getTime();v.renderTopComponent(v.parent);v.renderComponents(v.topComponent,v.config());v.relayout(v.topComponent);var A=new Date().getTime();console.log("Graph.render() is cost time : "+(A-B)+" ms.")};this.renderTopComponent=function(B){console.log("Graph.renderTopComponent()");if(B instanceof m){v.topComponent=B}else{var A=new g(B);A.render();v.topComponent=A}};this.renderComponents=function(F,C){console.log("Graph.renderComponents()");var B;if(C.hasOwnProperty("type")){if(C.type==="chart"){B=v.renderChart(F,C)}else{B=v.renderComponent(F,C)}}if(C.hasOwnProperty("children")&&r.isArray(C.children)&&C.children.length>0){var E=C.children;for(var D=0,A=E.length;D<A;D++){v.renderComponents(B,E[D])}}};this.renderComponent=function(C,B){console.log("Graph.renderComponent()");var D;switch(B.type){case"component":D=m;break;case"eagleEyeContainer":D=ghca_charts.view.component.eagleEyeContainer;break;case"tagContainer":D=ghca_charts.view.component.tagContainer;break;case"svgCanvas":D=ghca_charts.view.component.svgCanvas;break;default:break}if(!D){throw new Error("当前传入的组件类型"+B.type+"尚未支持。")}var A=new D(B);C.addChild(A);return A};this.renderChart=function(C,A){console.log("Graph.renderChart()");var B=new o(A);C.addChild(B);return B};this.relayout=function(D){if(!D){return}var E=D.layout();if(E&&!E.isChartLayout()){E.measure()}var C=D.children();if(C!==null&&C.length>0){for(var B=0,A=C.length;B<A;B++){v.relayout(C[B])}}};this.update=function(){var A=v.topComponent;if(A instanceof m){A.update()}};this.resize=function(){var A=v.topComponent;if(A instanceof m){A.width(v.width());A.height(v.height());A.resize()}};this.refreshData=function(B){if(!B){return}for(var A in B){if(v.hasOwnProperty(A)){this[A](B[A])}}};this.setConfigProperty=function(A,C){var B=z();return B?B.setConfigProperty(A,C):false};this.setData=function(J,B){var I=z();if(!I){return false}if(r.isString(J)){var A=false;try{if(J.indexOf("[")===0){J=JSON.parse(J)}if(r.isArray(J)){A=true}}catch(H){A=false}if(A){var K=I.parent();K.removeChild(I);var D=I.data();var E=[];D.series=E;for(var C=0,F=J.length;C<F;C++){E.push({data:[]})}u.parse(D);v.renderChart(K,D);for(var C=0,F=J.length;C<F;C++){var M=v.setData({data:J[C]},C);if(!M){return false}}u.parse(I.data());return true}}var G=I.children();if(G.length===0){return false}if(isNaN(B)||B<0){B=0}if(B>G.length-1){B=G.length-1}var L=G[B];return L.setData(J)};this.setConfigPropertyAndUpdate=function(A,C){if(v.setConfigProperty(A,C)){var B=z();u.parse(B.data());B.update();return true}return false};this.setDataAndUpdate=function(C,A){if(v.setData(C,A)){var B=z();B.update();return true}return false};this.destroy=function(){var A=v.topComponent;if(A instanceof m){A.destroy()}};t()};c.struct=function(g){c.prototype.constructor=c};f.exports=c},function(e,c,f){(function(g){var k=null;var j=null;var m=null;var i=null;var l={};l.newPluginInstance=function(q,o){if(!q){return null}if(m===null){m=new ghca_charts.view.elements.plugins.pluginMap().getMap()}var p=m[q.toLowerCase()];var n=p?new p(o[0],o[1]):null;return n};l.newChartInstance=function(q,o){if(!q){return null}if(i===null){i=new ghca_charts.view.component.chartMap().getMap()}var p=i[q.toLowerCase()];var n=p?new p(o[0],o[1]):null;return n};l.instanceofChart=function(n){if(!n){return false}if(i===null){i=new ghca_charts.view.component.chartMap().getMap()}var o=n.constructor;return o.hasOwnProperty("clazzName")&&i.hasOwnProperty(o.clazzName.toLowerCase())};l.newLinkInstance=function(q,o){if(!q){return null}if(j===null){j=new ghca_charts.view.elements.plugins.linkMap().getMap()}var p=j[q.toLowerCase()];var n=p?new p(o[0],o[1]):null;return n};l.newNodeInstance=function(q,o){if(!q){return null}if(k===null){k=new ghca_charts.view.elements.plugins.nodeMap().getMap()}var p=k[q.toLowerCase()];var n=p?new p(o[0],o[1]):null;return n};l.newRenderersInstanceByData=function(s,u,p,F,v,E,I){if(!p||!F||!s||!u){return null}if(v===undefined||v===null){v=true}if(!E){E="fill"}var D,A,G,r,n=[],C=ghca_charts.view.component.baseComponent;for(var z=0,B=F.length;z<B;z++){A=F[z];r=u.getRendererConfig(A,E);if(r.type&&r.type==="shape"){var q=l.newNodeInstance;var H=q(r.clazz,[s.mainContainer(),A]);H.className(p);if(I){I.call(null,H)}H.render();s.normalChild(H);A.ins=H;A.legendIns=H;continue}G=new C();G.className(p);G.isLight(true);G.title(A.title?A.title:null);s.addChild(G);if(r.type&&r.type==="chart"){var o=new l.newChartInstance(r.type,[r,null]);o.isRenderer(true);G.addChild(o);n.push(G);A.ins=o;A.legendIns=o;G.mainContainer().data([A])}else{var t=G.mainContainer().data([A]);t.each(function(M,J){var K=v?l.newNodeInstance:l.newLinkInstance;var L=K(r.clazz,[g.select(this),M]);if(I){I.call(null,L)}if(L.config){L.config(r.config)}L.render();G.normalChild(L);n.push(G);M.ins=L;M.legendIns=L})}}return n};e.exports=l}.call(c,f(2)))},function(e,c,f){(function(i){var j={};const g=i.scaleOrdinal(i.schemeCategory20);j.getColor=function(l,k){return(Object.prototype.toString.call(k)==="[object Array]"&&k.length>0)?k[l%k.length]:g(l)};j.setAlpha=function(k,m){var l=i.color(k).rgb();l.opacity=m;return l};j.getLinearGradientDef=function(o,k,t){var n=ghca_charts.view.util.UUIDUtil;var p=ghca_charts.view.util.constant;var r=i.select(o.ownerSVGElement);var q=r.select("svg defs");if(q.node()==null){q=r.append("defs")}var m=k.length,s=Math.floor(100/m),l=n.generateUUID();var u=q.append("svg:linearGradient").attr("id",l);if(p.HOR_DRAG_TYPE=t){u.attr("y1",1).attr("y2",1).attr("x1",0).attr("x2",1)}if(p.VER_DRAG_TYPE=t){u.attr("y1",0).attr("y2",1).attr("x1",1).attr("x2",1)}k.forEach(function(v,A){var z=u.append("stop").attr("stop-color",v);if(A==m-1){z.attr("offset","100%")}else{z.attr("offset",A*s+"%")}});return l};e.exports=j}.call(c,f(2)))},function(f,c){var e={};e.getBrowserType=function(){var i=navigator.userAgent;var g=i.indexOf("Opera")>-1;if(g){return"Opera"}if(i.indexOf("compatible")>-1&&i.indexOf("MSIE")>-1&&!g){return"IE"}if(i.indexOf("Edge")>-1){return"Edge"}if(window.ActiveXObject||"ActiveXObject" in window){return"IE"}if(i.indexOf("Firefox")>-1){return"Firefox"}if(i.indexOf("Safari")>-1&&i.indexOf("Chrome")==-1){return"Safari"}if(i.indexOf("Chrome")>-1&&i.indexOf("Safari")>-1){return"Chrome"}};e.browserType=e.getBrowserType();e.isIE=function(){return"IE"===e.browserType};e.isFirefox=function(){return"Firefox"===e.browserType};e.isChrome=function(){return"Chrome"===e.browserType};e.isOpera=function(){return"Opera"===e.browserType};e.isSafari=function(){return"Safari"===e.browserType};e.isEdge=function(){return"Edge"===e.browserType};f.exports=e},function(e,c){var f={};f.NO_SCALE_TYPE=-1;f.COMPONENT_SCALE_TYPE=0;f.LAYOUT_SCALE_TYPE=1;f.LAYOUT_HOR_SCALE_TYPE=2;f.LAYOUT_VER_SCALE_TYPE=3;f.HOR_DRAG_TYPE="hor";f.VER_DRAG_TYPE="ver";f.FREE_DRAG_TYPE="free";f.FIX_DRAG_TYPE="fix";f.TREE_RADIAL_TYPE="radial";f.TREE_HOR_TYPE="hor";f.TREE_VER_TYPE="ver";e.exports=f},function(f,e){var j={};j.parse=function(l,k,m){if(!l){return}i(l);g(l,k,m);c(l)};const c=function(p){var o=ghca_charts.view.util.objectUtil;var l=p.type==="chart";var n=l?p.series:p.children;var q=l?p.seriesConfig:null;if(o.isArray(n)){for(var m=0,k=n.length;m<k;m++){j.parse(n[m],l,q)}}};const i=function(n){var m=ghca_charts.view.util.objectUtil;var k=ghca_charts.view.util.regexUtil;var l=function(t,q,p){if(!t.hasOwnProperty(q)){return}var s=t[q];if(!m.isString(s)){return}var o=s.match(k.percentRegex);if(o===null){return}var r=parseFloat(o[1]);if(isNaN(r)){return}t[p]=r};l(n,"x","percentX");l(n,"y","percentY");l(n,"z","percentZ");l(n,"width","percentWidth");l(n,"height","percentHeight")};const g=function(q,k,o){if(!k){return}if(q.useSeriesConfig!==false&&o){var v=ghca_charts.view.util.objectUtil;var m=v.cloneObj(o);for(var z in m){q[z]=m[z]}var t=q.data;if(v.isArray(t)&&t.length>0&&q.renderers){var n=q.renderers;for(var l in n){break}if(l){for(var p=0,s=t.length;p<s;p++){t[p].renderer=l}}}}if(!q.type){return}var r=q.layout;if(!r||!r.type){r={};q.layout=r;var u;switch(q.type.toLowerCase()){case"topo":u="topoLayout";break;case"tree":u="treeLayout";break;case"sankey":u="sankeyLayout";break;case"pie":u="pieLayout";break;case"sunburst":u="sunburstLayout";break;case"scatter":case"line":case"area":u="scatterLayout";break;case"bar":u="barLayout";break;case"treemap":u="treemapLayout";break;default:break}if(u){r.type=u}}};j.createPieData=function(n,m){if(n.key&&n.key!==""){var s=n.key;var q=n.itemRenderer;if(!q){for(var l in m.renderers){q=l}}if(m.hasOwnProperty(s)){var r;if(n.keyPath&&n!==""){r=n.keyPath}var p=r?m[r][s]:m[s];var t=[];var o=1;p.forEach(function(A){if(A!==null&&A!==undefined){var v=false,z={};for(var u in A){z[u]=A[u];v=true}if(!v){z.value=A}z.id=o++;if(q!==undefined){z.renderer=q}t.push(z)}});n.data=t}}return n};j.createChartData=function(l,k){if(!l||!k){return null}switch(l.type.toLowerCase()){case"pie":case"area":case"line":case"bar":case"scatter":l=j.createPieData(l,k);break;default:break}return l};f.exports=j},function(f,e){var c={};c.setElementProperties=function(j,i){if(j&&i){for(var g in i){j.attr(g,i[g])}}};c.setElementStyles=function(j,i){if(j&&i){for(var g in i){j.style(g,i[g])}}};c.createText=function(i,g){var j=i.append("text");c.setElementProperties(j,g);return j};c.createRect=function(i,g){var j=i.append("rect");c.setElementProperties(j,g);return j};c.createCircle=function(i,g){var j=i.append("circle");c.setElementProperties(j,g);return j};c.createPath=function(i,g){var j=i.append("path");c.setElementProperties(j,g);return j};f.exports=c},function(e,c){var f={};f.createCustomEvent=function(k,i,g,j){var l;if(ghca_charts.view.util.commonUtil.isIE()){var l=document.createEvent("CustomEvent");if(arguments.length>1&&Object.prototype.toString.call(arguments[1])==="[object Object]"){var m=arguments[1];l.initCustomEvent(k,m.bubble,m.cancelable,m.detail)}else{l.initCustomEvent(k,i,g,j)}}else{if(arguments.length>1&&Object.prototype.toString.call(arguments[1])==="[object Object]"){l=new CustomEvent(k,arguments[1])}else{l=new CustomEvent(k,{bubbles:i,cancelable:g,detail:j})}}return l};f.createEvent=function(j,i,g){var k;if(ghca_charts.view.util.commonUtil.isIE()){var k=document.createEvent("Event");if(arguments.length>1&&Object.prototype.toString.call(arguments[1])==="[object Object]"){var l=arguments[1];k.initEvent(j,l.bubble,l.cancelable)}else{k.initEvent(j,i,g)}}else{if(arguments.length>1&&Object.prototype.toString.call(arguments[1])==="[object Object]"){k=new Event(j,arguments[1])}else{k=new Event(j,{bubbles:i,cancelable:g})}}return k};e.exports=f},function(e,c,f){(function(k){var l={};l.circumferencePoint=function(p,q,o){if(arguments.length<3){o={x:0,y:0}}return[o.x+p*Math.cos(q),o.y+p*Math.sin(q)]};l.radialLinkAngle=function(p,r){var q=l.circumferencePoint(p.y,(p.x-90)/180*Math.PI),o=l.circumferencePoint(r.y,(r.x-90)/180*Math.PI);return l.linkAngle({x:q[0],y:q[1]},{x:o[0],y:o[1]})};l.radialCenterPoint=function(p,r){var q=l.circumferencePoint(p.y,(p.x-90)/180*Math.PI),o=l.circumferencePoint(r.y,(r.x-90)/180*Math.PI);return l.calculateCenter({x:q[0],y:q[1]},{x:o[0],y:o[1]})};l.radialLinkPath=function(o,q){var p={x:o.cx,y:o.cy};return"M"+l.circumferencePoint(o.r,o.angle,p)+"C"+l.circumferencePoint((o.r+q.r)/2,o.angle,p)+" "+l.circumferencePoint((o.r+q.r)/2,q.angle,p)+" "+l.circumferencePoint(q.r,q.angle,p)};l.polylinePath=function(u,v,s,t){var p=v.x-u.x;var o=v.y-u.y;if(p===0||o===0){return"M"+[u.x,u.y]+"L"+[v.x,v.y]}var r=u.x+p/2;var q=u.y+o/2;t=isNaN(t)?0:t;if(s){t=u.x<v.x?-t:t;return"M"+[u.x,u.y]+"L"+[u.x,q]+"L"+[u.x+t,q]+"L"+[v.x,q]+"L"+[v.x,v.y]}t=u.y<v.y?-t:t;return"M"+[u.x,u.y]+"L"+[r,u.y]+"L"+[r,u.y+t]+"L"+[r,v.y]+"L"+[v.x,v.y]};l.besselLinkPath=function(r,t,p){var u=r,q=t,o;var s=k.path();s.moveTo(u.x,u.y);if(p){o=(u.x+q.x)/2;s.bezierCurveTo(o,u.y,o,q.y,q.x,q.y)}else{o=(u.y+q.y)/2;s.bezierCurveTo(u.x,o,q.x,o,q.x,q.y)}return s.toString()};l.quadraticCurveLinkPath=function(o,v,s,t,r,q){var p,A;if(r!==undefined&&q!==undefined){p=r;A=q}else{var u=l.parallelDeviationPoint(o,v,s,t);p=u[1].x;A=u[1].y}var z=k.path();z.moveTo(o.x,o.y);z.quadraticCurveTo(p,A,v.x,v.y);return z.toString()};l.quadraticCurveLinkPathWithControlPoint=function(p,r,o,s){var q=k.path();q.moveTo(p.x,p.y);q.quadraticCurveTo(o,s,r.x,r.y);return q.toString()};l.baseLinkPath=function(o,q){var p=k.path();p.moveTo(o.x,o.y);p.lineTo(q.x,q.y);return p.toString()};l.calculateNormalVector=function(o,t,p){var z=t.x-o.x,v=t.y-o.y;var s=-v,r=z;var q=Math.sqrt(s*s+r*r);var u=q!==0?p/q:0;return{x:s*u,y:r*u}};function m(o){o=o%360;if(o<0){o=o+360}return(Math.PI*o)/180}function g(o){return o*(180/Math.PI)}l.calculateIntersection=function(o,q,v){var z=q.x-o.x,u=q.y-o.y,p=Math.sqrt(z*z+u*u);console.info("length"+p);if(p===0){return{x:o.x,y:o.y}}innerDistance=188;var r=2,t=z*r+o.x,s=u*r+o.y;return{x:t,y:s}};l.calculateCenter=function(p,o){return{x:(p.x+o.x)/2,y:(p.y+o.y)/2}};l.linkAngle=function(t,p){var o=p.y>t.y?p:t;var u=p.y>t.y?t:p;var q=Math.sqrt(Math.pow(o.x-u.x,2)+Math.pow(o.y-u.y,2));var s=o.x>u.x?o.x-u.x:u.x-o.x;var v=q===0?0:Math.asin(s/q)/Math.PI*180;var r=0;var z=90;o.x>u.x?(r=z-v):(r=z+v);if(t.x>p.x&&t.y<p.y){r+=180}if(t.x<p.x&&t.y>p.y){r-=180}return r};l.treeBessel=function j(v,r,q){var z=v,s=r,o,u;var t=k.path();t.moveTo(z.x,z.y);if(q){o=(z.x+s.x)/2;t.bezierCurveTo(o,z.y,o,s.y,s.x,s.y)}else{o=(z.y+s.y)/2;t.bezierCurveTo(z.x,o,s.x,o,s.x,s.y)}return t.toString()};l.foldLinkPoint=function(o,t,A,q,s){if(o.x==t.x||o.y==t.y){return[o,t]}var r=ghca_charts.view.util.constant;var B=[];var p=s%2==0?Math.floor(s/2):Math.ceil(s/2);var z,u,v=s%2==0?p*q:-p*q;return r.HOR_DRAG_TYPE==A?(z=t.x+v,u=o.y-v,B.push({x:o.x,y:u}),B.push({x:z,y:u}),B.push({x:z,y:t.y})):(z=o.x+v,u=t.y-v,B.push({x:z,y:o.y}),B.push({x:z,y:u}),B.push({x:t.x,y:u})),B};l.parallelDeviationPoint=function(o,z,u,v){var t=l.linkAngle(o,z);var q=v%2==0?Math.floor(v/2):Math.ceil(v/2);var t=v%2==0?t+270:t+90;var p=q*u;var s=l.circumferencePoint(p,t*Math.PI/180,o);var A=l.circumferencePoint(p,t*Math.PI/180,z);return[{x:s[0],y:s[1]},{x:(s[0]+A[0])/2,y:(s[1]+A[1])/2},{x:A[0],y:A[1]}]};l.getCrossPointInTwoSegments=function(q,B,p,z,o,u,C,t){if(i(q,B,p,z,o,u,C,t)){if(n(q,B,p,z,o,u,C,t)){var A,v,s,r;s=(C-o)*(B-z)-(p-q)*(u-t);r=(B-u)*(p-q)*(C-o)+o*(t-u)*(p-q)-q*(z-B)*(C-o);A=r/s;s=(q-p)*(t-u)-(z-B)*(o-C);r=z*(q-p)*(t-u)+(C-p)*(t-u)*(B-z)-t*(o-C)*(z-B);v=r/s;return[A,v]}}return null};l.getCrossPointInRectAndSegment=function(q,o,F,z,v,r,t,p){var C,H=q,B=o,G=q+F,A=B,E=G,u=o+z,D=H,s=u,C=l.getCrossPointInTwoSegments(H,B,G,A,v,r,t,p);if(C){return C}C=l.getCrossPointInTwoSegments(G,A,E,u,v,r,t,p);if(C){return C}C=l.getCrossPointInTwoSegments(E,u,D,s,v,r,t,p);if(C){return C}C=l.getCrossPointInTwoSegments(D,s,H,B,v,r,t,p);if(C){return C}return null};var i=function(t,v,r,u,p,s,o,q){return Math.min(t,r)<=Math.max(p,o)&&Math.min(p,o)<=Math.max(t,r)&&Math.min(v,u)<=Math.max(s,q)&&Math.min(s,q)<=Math.max(v,u)};var n=function(q,u,p,t,o,s,A,r){var z,v;z=q*(s-t)+p*(u-s)+o*(t-u);v=q*(r-t)+p*(u-r)+A*(t-u);if(((z^v)>=0)&&!(z==0&&v==0)){return false}z=o*(u-r)+A*(s-u)+q*(r-s);v=o*(t-r)+A*(s-t)+p*(r-s);if(((z^v)>=0)&&!(z==0&&v==0)){return false}return true};l.isPointInsideBBox=function(o,q,p){return o>=p.x&&o<=(p.x+p.width)&&q>=p.y&&q<=(p.y+p.height)};l.isCollisionInTwoRects=function(p,o){return p.x<o.x+o.width&&p.x+p.width>o.x&&p.y<o.y+o.height&&p.height+p.y>o.y};l.roundPathCorners=function(F,u,C){function q(W,V,S){var T=(V.x-W.x);var R=(V.y-W.y);var U=Math.sqrt(T*T+R*R);return z(W,V,Math.min(1,S/U))}function z(T,S,R){return{x:T.x+(S.x-T.x)*R,y:T.y+(S.y-T.y)*R}}function I(S,R){if(S.length>2){S[S.length-2]=R.x;S[S.length-1]=R.y}}function H(R){return{x:parseFloat(R[R.length-2]),y:parseFloat(R[R.length-1])}}var Q=F.split(/[,\s]/).reduce(function(T,S){var R=S.match("([a-zA-Z])(.+)");if(R){T.push(R[1]);T.push(R[2])}else{T.push(S)}return T},[]);var A=Q.reduce(function(R,S){if(parseFloat(S)==S&&R.length){R[R.length-1].push(S)}else{R.push([S])}return R},[]);var o=[];if(A.length>1){var E=H(A[0]);var J=null;if(A[A.length-1][0]=="Z"&&A[0].length>2){J=["L",E.x,E.y];A[A.length-1]=J}o.push(A[0]);var K,v,p,L,P,O,D,t,B,G,M;for(var s=1,N=A.length;s<N;s++){K=o[o.length-1];v=A[s];p=(v==J)?A[1]:A[s+1];if(p&&K&&(K.length>2)&&v[0]==="L"&&p.length>2&&p[0]==="L"){L=H(K);P=H(v);O=H(p);if(C){D=z(P,K.origPoint||L,u);t=z(P,p.origPoint||O,u)}else{D=q(P,L,u);t=q(P,O,u)}I(v,D);v.origPoint=P;o.push(v);B=z(D,P,0.5);G=z(P,t,0.5);M=["C",B.x,B.y,G.x,G.y,t.x,t.y];M.origPoint=P;o.push(M)}else{o.push(v)}}if(J){var r=H(o[o.length-1]);o.push(["Z"]);I(o[0],r)}}else{o=A}return o.reduce(function(R,S){return R+S.join(" ")+" "},"")};l.pointsToPolygonHullRoundPath=function(z,v,u){if(z.length<2){return""}else{if(z.length===2){return"M"+z[0]+" L"+z[1]}else{z=k.polygonHull(z);var B=" L",o=" ";var r="M"+z[0][0]+o+z[0][1];for(var q,s=1,t=z.length;s<t;s++){q=z[s];r+=B+q[0]+o+q[1]}r+=" Z";var A=l.roundPathCorners(r,v,u);return A}}};l.calcQBezCurveAndLineIntersects=function(q,p,o,S,P){var u=function(U,T,t){return(U+t*(T-U))};var R=[];var Q={x:S.y-P.y,y:P.x-S.x};var B={x:q.x+p.x*-2+o.x,y:q.y+p.y*-2+o.y};var C={x:q.x*-2+p.x*2,y:q.y*-2+p.y*2};var D={x:q.x,y:q.y};var s=S.x*P.y-P.x*S.y;var O=Q.x*B.x+Q.y*B.y;var N=(Q.x*C.x+Q.y*C.y)/O;var M=(Q.x*D.x+Q.y*D.y+s)/O;var r=[];d=N*N-4*M;if(d>0){var I=Math.sqrt(d);r.push((-N+Math.sqrt(d))/2);r.push((-N-Math.sqrt(d))/2)}else{if(d==0){r.push(-N/2)}}for(var F=0,G=r.length;F<G;F++){var L=Math.min(S.x,P.x);var K=Math.min(S.y,P.y);var J=Math.max(S.x,P.x);var H=Math.max(S.y,P.y);var A=r[F];if(A>=0&&A<=1){var E=[u(u(q.x,p.x,A),u(p.x,o.x,A),A),u(u(q.y,p.y,A),u(p.y,o.y,A),A)];var z=E[0];var v=E[1];if(S.x==P.x&&v>=K&&v<=H){R.push(E)}else{if(S.y==P.y&&z>=L&&z<=J){R.push(E)}else{if(z>=L&&v>=K&&z<=J&&v<=H){R.push(E)}}}}}return R};l.calcQBezCurveAndRectIntersects=function(B,A,v,u){var C=function(H,F){for(var G=0,E=H.length;G<E;G++){F.push(H[G])}};var r={x:u.x,y:u.y},q={x:u.x+u.width,y:u.y},p={x:u.x+u.width,y:u.y+u.height},D={x:u.x,y:u.y+u.height};var t=l.calcQBezCurveAndLineIntersects(B,A,v,r,q);var z=l.calcQBezCurveAndLineIntersects(B,A,v,q,p);var o=l.calcQBezCurveAndLineIntersects(B,A,v,p,D);var s=l.calcQBezCurveAndLineIntersects(B,A,v,D,r);C(z,t);C(o,t);C(s,t);return t};e.exports=l}.call(c,f(2)))},function(f,e){var c={};c.relativeX=function(i,g){return i.pageX||(i.clientX+(g.scrollLeft||document.body.scrollLeft))};c.relativeY=function(i,g){return i.pageY||(i.clientY+(g.scrollTop||document.body.scrollTop))};f.exports=c},function(f,c){var e={};e.cloneObj=function(k){var l,j=k.constructor===Array?[]:{};if(typeof k!=="object"){return}else{if(window.JSON){l=JSON.stringify(k),j=JSON.parse(l)}else{for(var g in k){j[g]=typeof k[g]==="object"?cloneObj(k[g]):k[g]}}}return j};e.isObject=function(g){return Object.prototype.toString.call(g)==="[object Object]"};e.isString=function(g){return Object.prototype.toString.call(g)==="[object String]"};e.isArray=function(g){return Object.prototype.toString.call(g)==="[object Array]"};e.isNumber=function(g){return Object.prototype.toString.call(g)==="[object Number]"};e.isBoolean=function(g){return Object.prototype.toString.call(g)==="[object Boolean]"};e.isFunction=function(g){return Object.prototype.toString.call(g)==="[object Function]"};e.isUndefined=function(g){return Object.prototype.toString.call(g)==="[object Undefined]"};e.isNull=function(g){return Object.prototype.toString.call(g)==="[object Null]"};f.exports=e},function(f,e){var c={};c.dataRegex=/\{([\w.]+)\}/g;c.jsRegex=/{#(((?!#}).)*)#}/ig;c.percentRegex=/^([-+]?[0-9.]+)%$/;c.whiteSpaceRegex=/^[ ]*$/;c.arrayFormatRegex=/^([^.]+)\[([^.]+)\]$/;c.replace=function(j,l,k){if(!l||!ghca_charts.view.util.objectUtil.isString(l)){return l}var i=l.match(j);var g=null;if(i==null){return l}i.forEach(function(r){var s=new RegExp(j).exec(r);var q=s[1];var n=k;if(q!="this"){var m=q.toString().split(".");var p=!m?0:m.length;for(var o=0;o<p;o++){if(n.hasOwnProperty(m[o])){n=n[m[o]]}else{n=s[0]}}}if(n instanceof Object){g=n}l=l.replace(s[0],n)});if(g){return g}return l};c.translate=function(i){try{return i.match(/translate\((.*?)\)/)[1].split(",")}catch(g){}return[0,0]};c.scale=function(i){try{return i.match(/scale\((.*?)\)/)[1].split(",")}catch(g){}return[1,1]};c.rotate=function(i){try{return i.match(/rotate\((.*?)\)/)[1]}catch(g){}return[0]};f.exports=c},function(e,c,f){(function(ad){var z={};var F=[];var X=[];var C,U,L,H,J,O,M,D,R,I,u,B,p,g,T,K,l,ab=3.5,q=20,Z=1,S="#cc4c14",ag="#ff7f00",t=10,G=10,o=1;rotateUrl="url(../image/svg_canvas/rotate_cursor.ico) 8 8,auto";rotateCursor="cursor:"+rotateUrl;resizeCursorList=["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"];z.addNode=function(aj,r){if(!aj||Q(aj)){return}var ai=aj.getBBox();if(r){r.path=A(aj)}else{r={x:ai.x,y:ai.y,width:ai.width,height:ai.height,tx:0,ty:0,rotate:0,path:A(aj)}}ad.select(aj).datum(r);aj.setAttribute("z-index",F.length);F.push(aj)};z.removeSelectedNodes=function(){while(X.length>0){z.removeNode(X[0])}};z.removeNode=function(ai){if(!ai){return}var r=v(ai,F);if(r!==-1){F.splice(r,1)}r=v(ai,X);if(r!==-1){X.splice(r,1)}ad.select(ai).remove()};z.removeAllNodes=function(){F.length=0;X.length=0};z.getAllNodes=function(){return F};z.getSelectedNodes=function(){return X};z.getSelectedNodesInBBox=function(am){var at=[];if(!am||F.length===0){return at}var ap=am.x,ao=am.y,r=am.width,ar=am.height;for(var al=0,an=F.length;al<an;al++){var aj=F[al];var ak=aj.__data__;if(j(am,ak)){at.push(aj)}else{var aq="M"+ap+","+ao+" L"+(ap+r)+","+ao+" L"+(ap+r)+","+(ao+ar)+" L"+(ap)+","+(ao+ar)+"Z";var ai=Raphael.pathIntersection(ak.path,aq);if(ai.length>0){at.push(aj)}}}return at};z.showControlPoints=function(r,ai){if(!r||ai.length===0){return}X=ai;ah(r,ai);N(ai);Y(ai);ac(ai);af(r,ai)};z.removeControlPoints=function(r){N();if(r){ad.select(r).selectAll("*").remove()}if(C){C.remove()}X.length=0};z.validateNodes=function(ai,an){for(var ak,am,aj=0,r=ai.length;aj<r;aj++){ak=ai[aj];am=ak.__data__;var al=(an&&aj<an.length)?an[aj]:k(am);am.x+=am.tx;am.y+=am.ty;am.tx=0;am.ty=0;aa(ak,al)}E(ai)};z.moveNodes=function(ao,ak){if(X.length===0){return}var aq=0,ap=0,ak=ak===undefined?5:ak;if(ao===0){ap=-ak}else{if(ao===1){aq=ak}else{if(ao===2){ap=ak}else{if(ao===3){aq=-ak}}}}var r=C.datum();r.tlX+=aq;r.tlY+=ap;r.brX+=aq;r.brY+=ap;i(X,r,false);for(var ai,am,aj=0,al=X.length;aj<al;aj++){ai=X[aj];am=ai.__data__;var an=k(am);am.x+=aq;am.y+=ap;aa(ai,an)}E(X)};var s=function(ai){if(ai===undefined||!C){return null}var r=resizeCursorList.indexOf(ai);if(r===-1){return null}var aj=C.datum();var ak=Math.floor(((aj.rotate%360+360)%360+27.5)/45);r=(r+ak)%8;return resizeCursorList[r]};var E=function(r){W(r);N(r)};var W=function(ai){if(!ai||ai.length===0){return}for(var aj=0,r=ai.length;aj<r;aj++){n(ai[aj])}};var N=function(ai){if(!U){return}var ak=ghca_charts.view.util.eventUtil;var aj=ghca_charts.events.BaseEvent;var r=(ai&&ai.length===1)?ak.createCustomEvent(aj.UPDATE_PROPERTIES,true,true,ai[0]):ak.createCustomEvent(aj.HIDDEN_PROPERTIES,true,true);U.ownerSVGElement.dispatchEvent(r)};var n=function(r){if(!r){return}var r=Q(r);if(r){var ai=r.__data__;ai.x=P(ai.x);ai.y=P(ai.y);ai.width=P(ai.width);ai.height=P(ai.height);ai.rotate=P(ai.rotate);ai.path=A(r)}else{z.addNode(r)}};var A=function(av){var aj=av.tagName;var ar=null;if(aj==="circle"){var ap=parseFloat(av.getAttribute("r"));ar="M "+av.getAttribute("cx")+" "+av.getAttribute("cy")+"m "+(-ap)+" "+0+"a "+ap+","+ap+" 0 1,0 "+(ap*2)+",0a "+ap+","+ap+" 0 1,0 "+(-ap*2)+",0"}else{if(aj==="ellipse"){var aw=0.5522848,ao=parseFloat(av.getAttribute("cx"));an=parseFloat(av.getAttribute("cy"));a=parseFloat(av.getAttribute("rx"));b=parseFloat(av.getAttribute("ry"));ox=a*aw,oy=b*aw;var at=ad.path();at.moveTo(ao-a,an);at.bezierCurveTo(ao-a,an-oy,ao-ox,an-b,ao,an-b);at.bezierCurveTo(ao+ox,an-b,ao+a,an-oy,ao+a,an);at.bezierCurveTo(ao+a,an+oy,ao+ox,an+b,ao,an+b);at.bezierCurveTo(ao-ox,an+b,ao-a,an+oy,ao-a,an);at.closePath();ar=at.toString()}else{if(aj==="line"){var az=parseFloat(av.getAttribute("x1")),ak=parseFloat(av.getAttribute("y1")),ay=parseFloat(av.getAttribute("x2")),ai=parseFloat(av.getAttribute("y2"));ar="M"+az+","+ak+" L"+ay+","+ai}else{if(aj==="polyline"||aj==="polygon"){var ax=av.getAttribute("points").split(/\s+|,/);var aA=ax.shift(),al=ax.shift();ar="M"+aA+","+al+"L"+ax.join(" ");if(aj==="polygon"){ar+="Z"}}else{if(aj==="path"){ar=av.getAttribute("d")}else{var ao=parseFloat(av.getAttribute("x")),an=parseFloat(av.getAttribute("y")),au=parseFloat(av.getAttribute("width")),aq=parseFloat(av.getAttribute("height"));ar="M"+ao+","+an+" L"+(ao+au)+","+an+" L"+(ao+au)+","+(an+aq)+" L"+(ao)+","+(an+aq)+"Z"}}}}}var am=av.__data__?av.__data__.transformArray:null;if(am&&am.length>0){ar=Raphael.transformPath(ar,am).join(" ")}return ar};var aa=function(au,ai){var al=au.tagName;var aB=au.__data__;var ap=P(aB.width/2);var aq=P(aB.height/2);var an=P(aB.x+ap);var ak=P(aB.y+aq);if(al==="circle"){var ar=P((aB.width<aB.height?aB.width:aB.height)/2);au.setAttribute("cx",an);au.setAttribute("cy",ak);au.setAttribute("r",ar)}else{if(al==="ellipse"){au.setAttribute("cx",an);au.setAttribute("cy",ak);au.setAttribute("rx",ap);au.setAttribute("ry",aq)}else{if(al==="line"){var az=parseFloat(au.getAttribute("x1")),am=parseFloat(au.getAttribute("y1")),ay=parseFloat(au.getAttribute("x2")),aj=parseFloat(au.getAttribute("y2"));av=V([az,am,ay,aj],aB,ai);au.setAttribute("x1",av[0]);au.setAttribute("y1",av[1]);au.setAttribute("x2",av[2]);au.setAttribute("y2",av[3])}else{if(al==="polyline"||al==="polygon"){var av=au.getAttribute("points").split(/\s+|,/);av=V(av,aB,ai);au.setAttribute("points",av)}else{if(al==="path"){var av=au.getAttribute("d").split(/[^0-9.-]+/);av.shift();av=V(av,aB,ai);var aA=av.shift(),ao=av.shift();for(var aw=0,ax=av.length;aw<ax;aw+=2){av[aw]=" L "+av[aw]+" "}var at="M "+aA+" "+ao+av.join("");au.setAttribute("d",at)}else{au.setAttribute("x",aB.x);au.setAttribute("y",aB.y);au.setAttribute("width",aB.width);au.setAttribute("height",aB.height)}}}}}ad.select(au).attr("transform","translate("+aB.tx+","+aB.ty+")rotate("+aB.rotate+" "+an+" "+ak+")");aB.transformArray=["t",aB.tx,aB.ty,"r",aB.rotate,an,ak]};var V=function(ar,al,ap){var aq=al.x,ao=al.y,ai=al.width,at=al.height,ak=ap.x,r=ap.y,au=ap.width,aj=ap.height;sx=ai/au;sy=at/aj;for(var am=0,an=ar.length;am<an;am++){ar[am]=P((ar[am]-ak)*sx+aq);am++;ar[am]=P((ar[am]-r)*sy+ao)}return ar};var ah=function(am,ao){var ap,aB,r,aw,av,ay,an,aj=NaN,ai=NaN,al=NaN,ak=NaN,az=0,ax=0,at=0,au=ao.length;U=am,am=ad.select(am);if(au===1){ap=ao[0];aB=ap.__data__;aw=aB.x;av=aB.y;ay=aB.width;an=aB.height;if(isNaN(aj)||aw<aj){aj=aw}if(isNaN(ai)||av<ai){ai=av}if(isNaN(al)||aw+ay>al){al=aw+ay}if(isNaN(ak)||av+an>ak){ak=av+an}az=aB.tx;ax=aB.ty;at=aB.rotate}else{conRect=am.node().getBoundingClientRect();for(var ar=0;ar<au;ar++){ap=ao[ar];aB=ap.__data__;r=ap.getBoundingClientRect();aw=r.left-conRect.left;av=r.top-conRect.top;ay=r.right-r.left;an=r.bottom-r.top;if(isNaN(aj)||aw<aj){aj=aw}if(isNaN(ai)||av<ai){ai=av}if(isNaN(al)||aw+ay>al){al=aw+ay}if(isNaN(ak)||av+an>ak){ak=av+an}}}var aq={tlX:aj,tlY:ai,brX:al,brY:ak,tx:az,ty:ax,rotate:at};C=am.append("g").datum(aq);L=C.append("rect").attr("class","moveArea").attr("x",aj).attr("y",ai).attr("width",al-aj).attr("height",ak-ai).attr("stroke","none").attr("fill",ag).attr("fill-opacity","0").attr("cursor","move");var aA=(ao.length===1&&ao[0].tagName==="text")?"none":"block";H=C.append("circle").attr("display",aA).attr("cx",aj).attr("cy",ai).attr("r",ab).attr("stroke",S).attr("fill",ag).attr("cursor",s("nw-resize"));J=C.append("circle").attr("display",aA).attr("cx",al).attr("cy",ai).attr("r",ab).attr("stroke",S).attr("fill",ag).attr("cursor",s("ne-resize"));O=C.append("circle").attr("display",aA).attr("cx",al).attr("cy",ak).attr("r",ab).attr("stroke",S).attr("fill",ag).attr("cursor",s("se-resize"));M=C.append("circle").attr("display",aA).attr("cx",aj).attr("cy",ak).attr("r",ab).attr("stroke",S).attr("fill",ag).attr("cursor",s("sw-resize"));D=C.append("circle").attr("display",aA).attr("cx",aj+(al-aj)/2).attr("cy",ai).attr("r",ab).attr("stroke",S).attr("fill",ag).attr("cursor",s("n-resize"));R=C.append("circle").attr("display",aA).attr("cx",al).attr("cy",ai+(ak-ai)/2).attr("r",ab).attr("stroke",S).attr("fill",ag).attr("cursor",s("e-resize"));I=C.append("circle").attr("display",aA).attr("cx",aj+(al-aj)/2).attr("cy",ak).attr("r",ab).attr("stroke",S).attr("fill",ag).attr("cursor",s("s-resize"));u=C.append("circle").attr("display",aA).attr("cx",aj).attr("cy",ai+(ak-ai)/2).attr("r",ab).attr("stroke",S).attr("fill",ag).attr("cursor",s("w-resize"));B=C.append("circle").attr("cx",aj+(al-aj)/2).attr("cy",ai-q).attr("r",ab).attr("stroke",S).attr("fill","yellow").attr("style",rotateCursor);p=C.insert("line","*").attr("x1",aj+(al-aj)/2).attr("y1",ai).attr("x2",aj+(al-aj)/2).attr("y2",ai-q).attr("stroke",S);g=C.insert("line","*").attr("x1",aj-Z).attr("y1",ai-Z).attr("x2",al+Z).attr("y2",ai-Z).attr("stroke",S).attr("stroke-dasharray","4,4");T=C.insert("line","*").attr("x1",aj-Z).attr("y1",ai-Z).attr("x2",aj-Z).attr("y2",ak+Z).attr("stroke",S).attr("stroke-dasharray","4,4");K=C.insert("line","*").attr("x1",aj-Z).attr("y1",ak+Z).attr("x2",al+Z).attr("y2",ak+Z).attr("stroke",S).attr("stroke-dasharray","4,4");l=C.insert("line","*").attr("x1",al+Z).attr("y1",ai-Z).attr("x2",al+Z).attr("y2",ak+Z).attr("stroke",S).attr("stroke-dasharray","4,4");i(ao,aq,false)};var ae=function(){H.attr("cursor",s("nw-resize"));J.attr("cursor",s("ne-resize"));O.attr("cursor",s("se-resize"));M.attr("cursor",s("sw-resize"));D.attr("cursor",s("n-resize"));R.attr("cursor",s("e-resize"));I.attr("cursor",s("s-resize"));u.attr("cursor",s("w-resize"))};var m=function(r){if(!r){ae();B.attr("style",rotateCursor);L.attr("cursor","move");p.attr("cursor","");g.attr("cursor","");T.attr("cursor","");K.attr("cursor","");l.attr("cursor","");document.body.style.cursor=""}else{H.attr("cursor",r);J.attr("cursor",r);O.attr("cursor",r);M.attr("cursor",r);D.attr("cursor",r);R.attr("cursor",r);I.attr("cursor",r);u.attr("cursor",r);B.attr("style","cursor:"+r);L.attr("cursor",r);p.attr("cursor",r);g.attr("cursor",r);T.attr("cursor",r);K.attr("cursor",r);l.attr("cursor",r);document.body.style.cursor=r}};var i=function(au,aA,ao,an,al,aq){var ay=aA.rotate;var ai=aA.tlX;var r=aA.tlY;var am=aA.brX;var ak=aA.brY;L.attr("x",ai).attr("y",r).attr("width",am-ai).attr("height",ak-r);H.attr("cx",ai).attr("cy",r).attr("r",ab);J.attr("cx",am).attr("cy",r).attr("r",ab);O.attr("cx",am).attr("cy",ak).attr("r",ab);M.attr("cx",ai).attr("cy",ak).attr("r",ab);D.attr("cx",ai+(am-ai)/2).attr("cy",r).attr("r",ab);R.attr("cx",am).attr("cy",r+(ak-r)/2).attr("r",ab);I.attr("cx",ai+(am-ai)/2).attr("cy",ak).attr("r",ab);u.attr("cx",ai).attr("cy",r+(ak-r)/2).attr("r",ab);B.attr("cx",ai+(am-ai)/2).attr("cy",r-q).attr("r",ab);p.attr("x1",ai+(am-ai)/2).attr("y1",r).attr("x2",ai+(am-ai)/2).attr("y2",r-q);g.attr("x1",ai-Z).attr("y1",r-Z).attr("x2",am+Z).attr("y2",r-Z);T.attr("x1",ai-Z).attr("y1",r-Z).attr("x2",ai-Z).attr("y2",ak+Z);K.attr("x1",ai-Z).attr("y1",ak+Z).attr("x2",am+Z).attr("y2",ak+Z);l.attr("x1",am+Z).attr("y1",r-Z).attr("x2",am+Z).attr("y2",ak+Z);var aG=aA.tlX+(aA.brX-aA.tlX)/2;var aF=aA.tlY+(aA.brY-aA.tlY)/2;var aC=aA.tx;var aB=aA.ty;if(ao&&an!==undefined&&al!==undefined){var at=aG-an;var ar=aF-al;var aw=Math.sqrt(at*at+ar*ar);var ap=Math.atan2(ar,at);var aD=ap+ay*Math.PI/180;at=(an+Math.round(aw*Math.cos(aD)))-aG;ar=(al+Math.round(aw*Math.sin(aD)))-aF;aC+=at;aB+=ar;for(var av,aE,ax=0,az=au.length;ax<az;ax++){av=au[ax];aE=av.__data__;aE.tx=at;aE.ty=ar}if(aq){aA.tx=aC;aA.ty=aB;for(var av,aA,ax=0,az=au.length;ax<az;ax++){av=au[ax];aA=av.__data__;var aj=k(aA);aA.x+=aA.tx;aA.y+=aA.ty;aA.tx=0;aA.ty=0;aa(av,aj)}}}C.attr("transform","translate("+aC+","+aB+")rotate("+ay+" "+aG+" "+aF+")")};var k=function(r){return{x:r.x,y:r.y,width:r.width,height:r.height}};var P=function(ai,r){if(r===undefined){r=o}return parseFloat(ai.toFixed(r))};var Y=function(ai){var r=ad.select(window);var aj=C.datum();L.on("mousedown.translate",function(){ad.event.stopImmediatePropagation();m("move");var ak=ad.event;r.on("mousemove.translate",function(){var an=P(ad.event.movementX||(ad.event.screenX-ak.screenX));var am=P(ad.event.movementY||(ad.event.screenY-ak.screenY));ak=ad.event;aj.tlX+=an;aj.tlY+=am;aj.brX+=an;aj.brY+=am;i(ai,aj,false);for(var ap,ar,ao=0,al=ai.length;ao<al;ao++){ap=ai[ao];ar=ap.__data__;var aq=k(ar);ar.x+=an;ar.y+=am;aa(ap,aq)}});r.on("mouseup.translate",function(){r.on("mousemove.translate",null);r.on("mouseup.translate",null);m();E(ai)})})};var af=function(ai,aj){var r=ad.select(window);var ak=C.datum();B.on("mousedown.rotate",function(){ad.event.stopImmediatePropagation();m(rotateUrl);var al=ak.tlX+(ak.brX-ak.tlX)/2+ak.tx;var ap=ak.tlY+(ak.brY-ak.tlY)/2+ak.ty;var an=ak.rotate;var am=ak.rotate;var ao=C.append("circle").attr("r",2).attr("cx",al-ak.tx).attr("cy",ap-ak.ty).attr("fill","black");r.on("mousemove.rotate",function(){var ax=ad.mouse(ai);var aB=P(Math.atan2(ax[1]-ap,ax[0]-al)*180/Math.PI+90);ak.rotate=aB;i(aj,ak,false);ao.attr("cx",al-ak.tx).attr("cy",ap-ak.ty);var aC=aj.length;if(aC===1){for(var ay,aF,aA=0,aC;aA<aC;aA++){ay=aj[aA];aF=ay.__data__;var ar=k(aF);aF.rotate=aB;aa(ay,ar)}}else{if(aC>1){var aH=ak.rotate-an;an=ak.rotate;var aw=(ak.rotate-am)/180*Math.PI;for(var ay,aF,aA=0;aA<aC;aA++){ay=aj[aA];aF=ay.__data__;aF.rotate+=aH;var aE=aF.x+aF.width/2-al;var au=aF.y+aF.height/2-ap;var av=Math.atan2(au,aE);var aJ=aw+av;var az=Math.sqrt(aE*aE+au*au);var aD=az*Math.cos(aJ);var at=az*Math.sin(aJ);var aI=aD-aE;var aG=at-au;var aq=aI-(aF.oldTx===undefined?0:aF.oldTx);var aK=aG-(aF.oldTy===undefined?0:aF.oldTy);aF.oldTx=aI;aF.oldTy=aG;aF.tx+=aq;aF.ty+=aK;aa(ay,k(aF))}}}});r.on("mouseup.rotate",function(){r.on("mousemove.rotate",null);r.on("mouseup.rotate",null);m();i(aj,ak,false);ae();if(aj.length>1){for(var at,aw,ar=0,aq=aj.length;ar<aq;ar++){at=aj[ar];aw=at.__data__;var ax=aw.oldTx===undefined?0:aw.oldTx;var av=aw.oldTy===undefined?0:aw.oldTy;aw.tx-=ax;aw.ty-=av;var au=k(aw);aw.x+=ax;aw.y+=av;aa(at,au);delete aw.oldTx;delete aw.oldTy}}E(aj);ao.remove()})})};var ac=function(ai){var r=ad.select(window);var aj=C.datum();H.on("mousedown.tlP",function(){ad.event.stopImmediatePropagation();m(s("nw-resize"));var ak=aj.brX-aj.tlX;var ap=aj.brY-aj.tlY;var ao=ak/ap;var am=aj.tlX+ak/2;var al=aj.tlY+ap/2;var aq=aj.rotate/180*Math.PI;var at,ar;var an=ad.event;r.on("mousemove.tlP",function(){var aI=ad.event.movementX||(ad.event.screenX-an.screenX);var aH=ad.event.movementY||(ad.event.screenY-an.screenY);an=ad.event;var aB=Math.sqrt(aI*aI+aH*aH);var aw=Math.atan2(aH,aI)-aq;var aA=Math.round(aB*Math.cos(aw));var az=Math.round(aB*Math.sin(aw));if(aA===0||az===0||aA*az<0){return}else{if(aA/az>ao){at=az*ao;ar=az}else{at=aA;ar=aA/ao}}if(aj.brX-aj.tlX-at<=t||aj.brY-aj.tlY-ar<=G){return}var aE=aj.brX-aj.tlX;var ax=aj.brY-aj.tlY;if(ai.length>1){for(var aF,aC=0,aD=ai.length;aC<aD;aC++){aF=ai[aC].__data__;var av=at*aF.width/aE;var au=ar*aF.height/ax;if(aF.width-av<=t||aF.height-au<=G){return}}}aj.tlX+=at;aj.tlY+=ar;i(ai,aj,true,am,al);for(var ay,aF,aC=0,aD=ai.length;aC<aD;aC++){ay=ai[aC];aF=ay.__data__;var aG=k(aF);if(aD===1){aF.x+=at;aF.y+=ar;aF.width-=at;aF.height-=ar}else{var av=at*aF.width/aE;var au=ar*aF.height/ax;aF.x=(aF.x-aj.brX)*(aE-at)/aE+aj.brX;aF.y=(aF.y-aj.brY)*(ax-ar)/ax+aj.brY;aF.width-=av;aF.height-=au}aa(ay,aG)}});r.on("mouseup.tlP",function(){r.on("mousemove.tlP",null);r.on("mouseup.tlP",null);m();i(ai,aj,true,am,al,true);E(ai)})});J.on("mousedown.trP",function(){ad.event.stopImmediatePropagation();m(s("ne-resize"));var ak=aj.brX-aj.tlX;var ap=aj.brY-aj.tlY;var ao=ak/ap;var am=aj.tlX+ak/2;var al=aj.tlY+ap/2;var aq=aj.rotate/180*Math.PI;var at,ar;var an=ad.event;r.on("mousemove.trP",function(){var aI=ad.event.movementX||(ad.event.screenX-an.screenX);var aH=ad.event.movementY||(ad.event.screenY-an.screenY);an=ad.event;var aB=Math.sqrt(aI*aI+aH*aH);var aw=Math.atan2(aH,aI)-aq;var aA=Math.round(aB*Math.cos(aw));var az=Math.round(aB*Math.sin(aw));if(aA===0||az===0||aA*az>0){return}else{if(-aA/az>ao){at=-az*ao;ar=az}else{at=aA;ar=-aA/ao}}if(aj.brX-aj.tlX+at<=t||aj.brY-aj.tlY-ar<=G){return}var aE=aj.brX-aj.tlX;var ax=aj.brY-aj.tlY;if(ai.length>1){for(var aF,aC=0,aD=ai.length;aC<aD;aC++){aF=ai[aC].__data__;var av=at*aF.width/aE;var au=ar*aF.height/ax;if(aF.width+av<=t||aF.height-au<=G){return}}}aj.brX+=at;aj.tlY+=ar;i(ai,aj,true,am,al);for(var ay,aF,aC=0,aD=ai.length;aC<aD;aC++){ay=ai[aC];aF=ay.__data__;var aG=k(aF);if(aD===1){aF.y+=ar;aF.width+=at;aF.height-=ar}else{var av=at*aF.width/aE;var au=ar*aF.height/ax;aF.x=(aF.x-aj.tlX)*(aE+at)/aE+aj.tlX;aF.y=(aF.y-aj.brY)*(ax-ar)/ax+aj.brY;aF.width+=av;aF.height-=au}aa(ay,aG)}});r.on("mouseup.trP",function(){r.on("mousemove.trP",null);r.on("mouseup.trP",null);m();i(ai,aj,true,am,al,true);E(ai)})});O.on("mousedown.brP",function(){ad.event.stopImmediatePropagation();m(s("se-resize"));var ak=aj.brX-aj.tlX;var ap=aj.brY-aj.tlY;var ao=ak/ap;var am=aj.tlX+ak/2;var al=aj.tlY+ap/2;var aq=aj.rotate/180*Math.PI;var at,ar;var an=ad.event;r.on("mousemove.brP",function(){var aI=ad.event.movementX||(ad.event.screenX-an.screenX);var aH=ad.event.movementY||(ad.event.screenY-an.screenY);an=ad.event;var aB=Math.sqrt(aI*aI+aH*aH);var aw=Math.atan2(aH,aI)-aq;var aA=Math.round(aB*Math.cos(aw));var az=Math.round(aB*Math.sin(aw));if(aA===0||az===0||aA*az<0){return}else{if(aA/az>ao){at=az*ao;ar=az}else{at=aA;ar=aA/ao}}if(aj.brX-aj.tlX+at<=t||aj.brY-aj.tlY+ar<=G){return}var aE=aj.brX-aj.tlX;var ax=aj.brY-aj.tlY;if(ai.length>1){for(var aF,aC=0,aD=ai.length;aC<aD;aC++){aF=ai[aC].__data__;var av=at*aF.width/aE;var au=ar*aF.height/ax;if(aF.width+av<=t||aF.height+au<=G){return}}}aj.brX+=at;aj.brY+=ar;i(ai,aj,true,am,al);for(var ay,aF,aC=0,aD=ai.length;aC<aD;aC++){ay=ai[aC];aF=ay.__data__;var aG=k(aF);if(aD===1){aF.width+=at;aF.height+=ar}else{var av=at*aF.width/aE;var au=ar*aF.height/ax;aF.x=(aF.x-aj.tlX)*(aE+at)/aE+aj.tlX;aF.y=(aF.y-aj.tlY)*(ax+ar)/ax+aj.tlY;aF.width+=av;aF.height+=au}aa(ay,aG)}});r.on("mouseup.brP",function(){r.on("mousemove.brP",null);r.on("mouseup.brP",null);m();i(ai,aj,true,am,al,true);E(ai)})});M.on("mousedown.blP",function(){ad.event.stopImmediatePropagation();m(s("sw-resize"));var ak=aj.brX-aj.tlX;var ap=aj.brY-aj.tlY;var ao=ak/ap;var am=aj.tlX+ak/2;var al=aj.tlY+ap/2;var aq=aj.rotate/180*Math.PI;var at,ar;var an=ad.event;r.on("mousemove.blP",function(){var aI=ad.event.movementX||(ad.event.screenX-an.screenX);var aH=ad.event.movementY||(ad.event.screenY-an.screenY);an=ad.event;var aB=Math.sqrt(aI*aI+aH*aH);var aw=Math.atan2(aH,aI)-aq;var aA=Math.round(aB*Math.cos(aw));var az=Math.round(aB*Math.sin(aw));if(aA===0||az===0||aA*az>0){return}else{if(-aA/az>ao){at=-az*ao;ar=az}else{at=aA;ar=-aA/ao}}if(aj.brX-aj.tlX-at<=t||aj.brY-aj.tlY+ar<=G){return}var aE=aj.brX-aj.tlX;var ax=aj.brY-aj.tlY;if(ai.length>1){for(var aF,aC=0,aD=ai.length;aC<aD;aC++){aF=ai[aC].__data__;var av=at*aF.width/aE;var au=ar*aF.height/ax;if(aF.width-av<=t||aF.height+au<=G){return}}}aj.tlX+=at;aj.brY+=ar;i(ai,aj,true,am,al);for(var ay,aF,aC=0,aD=ai.length;aC<aD;aC++){ay=ai[aC];aF=ay.__data__;var aG=k(aF);if(aD===1){aF.x+=at;aF.width-=at;aF.height+=ar}else{var av=at*aF.width/aE;var au=ar*aF.height/ax;aF.x=(aF.x-aj.brX)*(aE-at)/aE+aj.brX;aF.y=(aF.y-aj.tlY)*(ax+ar)/ax+aj.tlY;aF.width-=av;aF.height+=au}aa(ay,aG)}});r.on("mouseup.blP",function(){r.on("mousemove.blP",null);r.on("mouseup.blP",null);m();i(ai,aj,true,am,al,true);E(ai)})});D.on("mousedown.tcP",function(){ad.event.stopImmediatePropagation();m(s("n-resize"));var an=aj.tlX+(aj.brX-aj.tlX)/2;var ap=aj.tlY+(aj.brY-aj.tlY)/2;var am=-aj.rotate/180*Math.PI;var al=Math.cos(am);var ao=Math.sin(am);var ak=ad.event;r.on("mousemove.tcP",function(){var az=ad.event.movementX||(ad.event.screenX-ak.screenX);var ay=ad.event.movementY||(ad.event.screenY-ak.screenY);ak=ad.event;var aB=Math.round(az*al+ay*ao);var aA=Math.round(ay*al+az*ao);if(aj.brY-aj.tlY-aA<=G){return}var ar=aj.brY-aj.tlY;if(ai.length>1){for(var aw,au=0,av=ai.length;au<av;au++){aw=ai[au].__data__;var aq=aA*aw.height/ar;if(aw.height-aq<=G){return}}}aj.tlY+=aA;i(ai,aj,true,an,ap);for(var at,aw,au=0,av=ai.length;au<av;au++){at=ai[au];aw=at.__data__;var ax=k(aw);if(av===1){aw.y+=aA;aw.height-=aA}else{var aq=aA*aw.height/ar;aw.y=(aw.y-aj.brY)*(ar-aA)/ar+aj.brY;aw.height-=aq}aa(at,ax)}});r.on("mouseup.tcP",function(){r.on("mousemove.tcP",null);r.on("mouseup.tcP",null);m();i(ai,aj,true,an,ap,true);E(ai)})});R.on("mousedown.rcP",function(){ad.event.stopImmediatePropagation();m(s("e-resize"));var an=aj.tlX+(aj.brX-aj.tlX)/2;var ap=aj.tlY+(aj.brY-aj.tlY)/2;var am=aj.rotate/180*Math.PI;var al=Math.cos(am);var ao=Math.sin(am);var ak=ad.event;r.on("mousemove.rcP",function(){var aA=ad.event.movementX||(ad.event.screenX-ak.screenX);var az=ad.event.movementY||(ad.event.screenY-ak.screenY);ak=ad.event;var aC=Math.round(aA*al+az*ao);var aB=Math.round(az*al+aA*ao);if(aj.brX-aj.tlX+aC<=t){return}var aw=aj.brX-aj.tlX;var ar=aj.brY-aj.tlY;if(ai.length>1){for(var ax,au=0,av=ai.length;au<av;au++){ax=ai[au].__data__;var aq=aC*ax.width/aw;if(ax.width+aq<=t){return}}}aj.brX+=aC;i(ai,aj,true,an,ap);for(var at,ax,au=0,av=ai.length;au<av;au++){at=ai[au];ax=at.__data__;var ay=k(ax);if(av===1){ax.width+=aC}else{var aq=aC*ax.width/aw;ax.x=(ax.x-aj.tlX)*(aw+aC)/aw+aj.tlX;ax.width+=aq}aa(at,ay)}});r.on("mouseup.rcP",function(){r.on("mousemove.rcP",null);r.on("mouseup.rcP",null);m();i(ai,aj,true,an,ap,true);E(ai)})});I.on("mousedown.bcP",function(){ad.event.stopImmediatePropagation();m(s("s-resize"));var an=aj.tlX+(aj.brX-aj.tlX)/2;var ap=aj.tlY+(aj.brY-aj.tlY)/2;var am=-aj.rotate/180*Math.PI;var al=Math.cos(am);var ao=Math.sin(am);var ak=ad.event;r.on("mousemove.bcP",function(){var az=ad.event.movementX||(ad.event.screenX-ak.screenX);var ay=ad.event.movementY||(ad.event.screenY-ak.screenY);ak=ad.event;var aB=Math.round(az*al+ay*ao);var aA=Math.round(ay*al+az*ao);if(aj.brY-aj.tlY+aA<=G){return}var ar=aj.brY-aj.tlY;if(ai.length>1){for(var aw,au=0,av=ai.length;au<av;au++){aw=ai[au].__data__;var aq=aA*aw.height/ar;if(aw.height+aq<=G){return}}}aj.brY+=aA;i(ai,aj,true,an,ap);for(var at,aw,au=0,av=ai.length;au<av;au++){at=ai[au];aw=at.__data__;var ax=k(aw);if(av===1){aw.height+=aA}else{var aq=aA*aw.height/ar;aw.y=(aw.y-aj.tlY)*(ar+aA)/ar+aj.tlY;aw.height+=aq}aa(at,ax)}});r.on("mouseup.bcP",function(){r.on("mousemove.bcP",null);r.on("mouseup.bcP",null);m();i(ai,aj,true,an,ap,true);E(ai)})});u.on("mousedown.lcP",function(){ad.event.stopImmediatePropagation();m(s("w-resize"));var an=aj.tlX+(aj.brX-aj.tlX)/2;var ap=aj.tlY+(aj.brY-aj.tlY)/2;var am=aj.rotate/180*Math.PI;var al=Math.cos(am);var ao=Math.sin(am);var ak=ad.event;r.on("mousemove.lcP",function(){var az=ad.event.movementX||(ad.event.screenX-ak.screenX);var ay=ad.event.movementY||(ad.event.screenY-ak.screenY);ak=ad.event;var aB=Math.round(az*al+ay*ao);var aA=Math.round(ay*al+az*ao);if(aj.brX-aj.tlX-aB<=t){return}var au=aj.brX-aj.tlX;if(ai.length>1){for(var aw,at=0,av=ai.length;at<av;at++){aw=ai[at].__data__;var aq=aB*aw.width/au;if(aw.width-aq<=t){return}}}aj.tlX+=aB;i(ai,aj,true,an,ap);for(var ar,aw,at=0,av=ai.length;at<av;at++){ar=ai[at];aw=ar.__data__;var ax=k(aw);if(av===1){aw.x+=aB;aw.width-=aB}else{var aq=aB*aw.width/au;aw.x=(aw.x-aj.brX)*(au-aB)/au+aj.brX;aw.width-=aq}aa(ar,ax)}});r.on("mouseup.lcP",function(){r.on("mousemove.lcP",null);r.on("mouseup.lcP",null);m();i(ai,aj,true,an,ap,true);E(ai)})})};var j=function(ai,r){var ak=r.hasOwnProperty("tx")?r.x+r.tx:r.x;var aj=r.hasOwnProperty("ty")?r.y+r.ty:r.y;return ai.x<ak&&ai.y<aj&&ai.x+ai.width>ak+r.width&&ai.y+ai.height>aj+r.height};var Q=function(aj){for(var ai=0,r=F.length;ai<r;ai++){if(F[ai]===aj){return F[ai]}}return null};var v=function(aj,ak){for(var ai=0,r=ak.length;ai<r;ai++){if(ak[ai]===aj){return ai}}return -1};e.exports=z}.call(c,f(2)))},function(module,exports){var StringUtil={};StringUtil.splitByLine=function(text,width,fontsize,textLine){if(width==0){return[text]}var curLen=0,line=1;var result=[];var start=0,end=0;for(var i=0;i<text.length;i++){var code=text.charCodeAt(i);var pixelLen=code>255?fontsize:fontsize/2;curLen+=pixelLen;if(curLen>width){end=i;if(line===textLine&&i!==text.length-1){end>3?(code>255?end=end-2:end=end-3):end=1;result.push(text.substring(start,end)+"...");break}result.push(text.substring(start,end));start=i;curLen=pixelLen;line++}if(i===text.length-1){end=i;result.push(text.substring(start,end+1))}}return result};StringUtil.fixTextSpace=function(ele,spaceWidth){var content=ele.textContent;var dx=[];var i=-1;var counter=0;spaceWidth=spaceWidth||0.5;while(++i<content.length){if(content[i]===" "){counter++}else{dx.push(counter*spaceWidth+"em");counter=0}}ele.textContent=content.replace(/ /g,"");ele.setAttribute("dx",dx.join(","))};StringUtil.parsePercent=function(value){if(!ghca_charts.view.util.objectUtil.isString(value)){return value}var result=value.match(ghca_charts.view.util.regexUtil.percentRegex);if(result===null){return value}var pv=parseFloat(result[1]);if(isNaN(pv)){return value}return pv};StringUtil.parseArray=function(value){if(!ghca_charts.view.util.objectUtil.isString(value)){return value}var result;try{result=eval(value)}catch(e){return value}return ghca_charts.view.util.objectUtil.isArray(result)?result:value};module.exports=StringUtil},function(g,e){var i={};i.removeAllChildren=function(k){if(k){while(k.hasChildNodes()){k.removeChild(k.firstChild)}}};i.sortByZIndex=function(q,l){var o=[];for(var m=0,k=q.length;m<k;m++){var p=q[m];if(!p.getAttribute){continue}if(l&&p.childNodes){i.sortByZIndex(p.childNodes)}if(!p.getAttribute("z-index")){p.setAttribute("z-index",0)}o.push(p)}if(o.length===0){return}o.sort(function(u,t){var s=parseInt(u.getAttribute("z-index"));var r=parseInt(t.getAttribute("z-index"));if(s===r){return 0}else{if(s<r){return -1}else{return 1}}});var n=o[0]&&o[0].parentNode;for(var m=0,k=o.length;m<k;m++){var p=o[m];n.appendChild(p)}};i.hasElementInDefs=function(l,m){if(!l){return false}var k=f(l);if(!k){return false}return k.select("#"+m).node()!==null};i.createDefElement=function(l,o){if(!i.hasElementInDefs(l,o.id)){var k=f(l);if(!k){k=c(l)}switch(o.clazz){case"image":var m=o.config;var n=k.append("g").attr("id",o.id);n.append("image").attr("width",m.imageWidth).attr("height",m.imageHeight).attr("xlink:href",m.url).attr("x",-m.imageWidth/2).attr("y",-m.imageHeight/2)}}};i.createRectMask=function(p,l,r,q,n,s,m,k){if(isNaN(m)&&isNaN(k)){m=0;k=0}else{if(!isNaN(m)&&isNaN(k)){k=m}else{if(isNaN(m)&&!isNaN(k)){m=k}}}if(i.hasElementInDefs(p,l)){p.select("#"+l+" rect").attr("x",r).attr("y",q).attr("width",n).attr("height",s).attr("rx",m).attr("ry",k);return null}var o=c(p);var t=o.append("mask").attr("id",l).attr("maskUnits","userSpaceOnUse").append("rect").attr("x",r).attr("y",q).attr("width",n).attr("height",s).attr("rx",m).attr("ry",k).attr("fill","#fff");return t};i.deleteDefsElement=function(l,m){var k=f(l);if(k){k.select("#"+m).remove()}};const f=function(l){if(!l){return null}var k=l.select("defs");if(k.node()===null){return null}return k};const c=function(l){var k=f(l);if(!k){k=l.insert("defs","svg.svgContainer g.bgContainer")}return k};const j=function(l){var k=f(l);if(k){k.remove()}};g.exports=i},function(e,c){var f={};f.generateUUID=function(){var i=new Date().getTime();var g="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx-xxxx".replace(/[xy]/g,function(k){var j=(i+Math.random()*16)%16|0;i=Math.floor(i/16);return(k=="x"?j:(j&3|8)).toString(16)});return g};e.exports=f}]);