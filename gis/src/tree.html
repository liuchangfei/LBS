<!DOCTYPE HTML>
<html>
<head>
    <title>tree demo</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <!--tree相关-->
    <link rel="stylesheet" href="js/tree/css/zTreeStyle/zTreeStyle.css" type="text/css">
    <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="js/tree/js/jquery.ztree.core.js"></script>
    <script type="text/javascript" src="js/testData.js"></script>
</head>
<body>
    <div id="tree" class="ztree" style="height:100px;overflow-y:scroll;"></div>
    <script type="text/javascript">
        var setting = {
            view: {
                showIcon:function(treeId, treeNode) {
		            return !treeNode.isParent;
		        },
		        showLine:false,
		        showTitle:true
            },
            data: {
                key:{
                    name:function(node) {
                        return node.level === 0 ? "id" : "addr";
                    },
                    title:function(node) {
                        return node.level === 0 ? "id" : "time";
                    },
                    children:"posList"
                },
                simpleData: {
                    enable: false
                }
            }
        };

        var zNodes =[
            { id:1, pId:0, name:"父节点1 - 展开", open:true},
            { id:11, pId:1, name:"父节点11 - 折叠"},
            { id:111, pId:11, name:"叶子节点111"},
            { id:112, pId:11, name:"叶子节点112"},
            { id:113, pId:11, name:"叶子节点113"},
            { id:114, pId:11, name:"叶子节点114"},
            { id:12, pId:1, name:"父节点12 - 折叠"},
            { id:121, pId:12, name:"叶子节点121"},
            { id:122, pId:12, name:"叶子节点122"},
            { id:123, pId:12, name:"叶子节点123"},
            { id:124, pId:12, name:"叶子节点124"},
            { id:13, pId:1, name:"父节点13 - 没有子节点", isParent:true},
            { id:2, pId:0, name:"父节点2 - 折叠"},
            { id:21, pId:2, name:"父节点21 - 展开", open:true},
            { id:211, pId:21, name:"叶子节点211"},
            { id:212, pId:21, name:"叶子节点212"},
            { id:213, pId:21, name:"叶子节点213"},
            { id:214, pId:21, name:"叶子节点214"},
            { id:22, pId:2, name:"父节点22 - 折叠"},
            { id:221, pId:22, name:"叶子节点221"},
            { id:222, pId:22, name:"叶子节点222"},
            { id:223, pId:22, name:"叶子节点223"},
            { id:224, pId:22, name:"叶子节点224"},
            { id:23, pId:2, name:"父节点23 - 折叠"},
            { id:231, pId:23, name:"叶子节点231"},
            { id:232, pId:23, name:"叶子节点232"},
            { id:233, pId:23, name:"叶子节点233"},
            { id:234, pId:23, name:"叶子节点234"},
            { id:3, pId:0, name:"父节点3 - 没有子节点", isParent:true}
        ];
        
        var treeData = [
	            {
	                "id": "Z2017102920330322",
	                "open": true,
	                "startPos": {
	                    "addr" : "陕西省西安市户县",
	                    "pos" : [108.585726, 34.022683]
	                },
	                "endPos": {
	                    "addr": "addr10",
	                    "pos" : [108.58288, 34.023229]
	                },
	                "portraitUrl": "https://pic.renyaoxing.com/FsSRl1J4AnyTbRi2Ao4M8GtiPL1f?e=1509288231&token=l0Aa0zIddqS9G3X8S-GUFAtsUCKC9HsNATcjnLxJ:CxDw0NEAcmwJsq3UFMQYQWnK674=",
	                "name": "付代成",
	                "tel": "13458588890",
	                "driveTime": "000000510101079302",
	                "carNumber": "川A99999",
	                "company": "承运商B",
	                "consignor": "货主公司A",
	                "consignee": "张家口第一人民医院",
	                "containerTemp": "-2℃",
	                "outdoorTemp": "33℃",
		            posList: [{
	                    "addr": "addr1",
	                    "pos" : [108.585726, 34.022683],
	                    "time" : "2017-08-12 13:31:02"
	                }, {
	                    "addr": "addr2",
	                    "pos" : [108.58482, 34.022569],
	                    "time" : "2017-08-12 13:32:42"
	                }, {
	                    "addr": "addr3",
	                    "pos" : [108.584104, 34.022708],
	                    "time" : "2017-08-12 13:34:22"
	                }, {
	                    "addr": "addr4",
	                    "pos" : [108.583696, 34.022822],
	                    "time" : "2017-08-12 13:36:02"
	                }, {
	                    "addr": "addr5",
	                    "pos" : [108.583049, 34.022691],
	                    "time" : "2017-08-12 13:37:42"
	                }, {
	                    "addr": "addr6",
	                    "pos" : [108.58283, 34.022708],
	                    "time" : "2017-08-12 13:39:22"
	                }, {
	                    "addr": "addr7",
	                    "pos" : [108.582602, 34.022794],
	                    "time" : "2017-08-12 13:41:02"
	                }, {
	                    "addr": "addr8",
	                    "pos" : [108.582562, 34.022843],
	                    "time" : "2017-08-12 13:42:42"
	                }, {
	                    "addr": "addr9",
	                    "pos" : [108.582791, 34.023007],
	                    "time" : "2017-08-12 13:44:22"
	                }, {
	                    "addr": "addr10",
	                    "pos" : [108.58288, 34.023229],
	                    "time" : "2017-08-12 13:46:02"
	                }]
                }
	            ,
	            {
                    "id": "Z2017102920330323",
                    "open": true,
                    "startPos": {
                        "addr" : "陕西省西安市户县",
                        "pos" : [108.585726, 34.022683]
                    },
                    "endPos": {
                        "addr": "addr10",
                        "pos" : [108.58288, 34.023229]
                    },
                    "portraitUrl": "https://pic.renyaoxing.com/FsSRl1J4AnyTbRi2Ao4M8GtiPL1f?e=1509288231&token=l0Aa0zIddqS9G3X8S-GUFAtsUCKC9HsNATcjnLxJ:CxDw0NEAcmwJsq3UFMQYQWnK674=",
                    "name": "付代成",
                    "tel": "13458588890",
                    "driveTime": "000000510101079302",
                    "carNumber": "川A99999",
                    "company": "承运商B",
                    "consignor": "货主公司A",
                    "consignee": "张家口第一人民医院",
                    "containerTemp": "-2℃",
                    "outdoorTemp": "33℃",
	                posList: [{
	                    "addr": "addr1",
	                    "pos" : [108.585726, 34.022683],
	                    "time" : "2017-08-12 13:31:02"
	                }, {
	                    "addr": "addr2",
	                    "pos" : [108.58482, 34.022569],
	                    "time" : "2017-08-12 13:32:42"
	                }, {
	                    "addr": "addr3",
	                    "pos" : [108.584104, 34.022708],
	                    "time" : "2017-08-12 13:34:22"
	                }, {
	                    "addr": "addr4",
	                    "pos" : [108.583696, 34.022822],
	                    "time" : "2017-08-12 13:36:02"
	                }, {
	                    "addr": "addr5",
	                    "pos" : [108.583049, 34.022691],
	                    "time" : "2017-08-12 13:37:42"
	                }, {
	                    "addr": "addr6",
	                    "pos" : [108.58283, 34.022708],
	                    "time" : "2017-08-12 13:39:22"
	                }, {
	                    "addr": "addr7",
	                    "pos" : [108.582602, 34.022794],
	                    "time" : "2017-08-12 13:41:02"
	                }, {
	                    "addr": "addr8",
	                    "pos" : [108.582562, 34.022843],
	                    "time" : "2017-08-12 13:42:42"
	                }, {
	                    "addr": "addr9",
	                    "pos" : [108.582791, 34.023007],
	                    "time" : "2017-08-12 13:44:22"
	                }, {
	                    "addr": "addr10",
	                    "pos" : [108.58288, 34.023229],
	                    "time" : "2017-08-12 13:46:02"
	                }]
                }
	        ];

        $(document).ready(function(){
            $.fn.zTree.init($("#tree"), setting, treeData);
        });
    </script>
</body>
</html>